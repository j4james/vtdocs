<!DOCTYPE html>
<html lang="en">
<head>
<title>VSRM - Character Cell Display</title>
<meta charset="UTF-8" />
<style>*{font-family:"Courier New";font-weight:bold;font-size:16.2px;line-height:15.3px;color:#000000;padding:0;margin:0;border-collapse:collapse}body{background:#d4d4d8;>header,>main,>footer{width:66ch;padding-left:6.5ch;padding-right:12.5ch;padding-bottom:15.3px;background:#ffffff;margin:0 auto}>footer{border-bottom:11px solid #d4d4d8}}a{text-decoration:none}a[href]:hover{color:#bb0000}hgroup{margin-bottom:30.6px;>h1{margin-bottom:30.6px;text-align:center;&:first-line{text-transform:uppercase}+p{text-align:center}>br{margin-bottom:15.3px;display:block;content:' '}}header>&{margin-bottom:45.9px}}h2,h3,h4,p{margin-bottom:15.3px;white-space:pre-wrap}section{&:has(>h2){margin-top:45.9px}&:has(>h3){margin-top:45.9px}&:has(>h4){margin-top:45.9px}a[id]+&{margin-top:0}h2+&{margin-top:15.3px}>h2{text-transform:uppercase}>h4{padding-left:9ch;text-indent:-9ch;&:after{content:' -';padding-right:0.999ch;white-space:pre}}}aside{margin:30.6px auto;width:50ch;>h4{text-align:center;margin-bottom:15.3px}>ul>li{padding-left:4ch;text-indent:-4ch;&:before{content:' -  '}}a[id]{transform:translateX(-8ch)}p+&{margin-top:0}header>&{position:relative;overflow:hidden;white-space:nowrap;&:before{content:'+----------------------------------------------------------------------------\A|\A|\A|\A|\A|\A|\A|\A|\A|';white-space:pre;position:absolute;top:0;left:0;pointer-events:none}&:after{content:'+----------------------------------------------------------------------------'}>*{padding:0 2ch;&:first-child{padding-top:15.3px;&:before{content:'+\A|\A|\A|\A|\A|\A|\A|\A|\A|';white-space:pre;position:absolute;top:0;right:0;background:#ffffff}}&:last-child{margin:0;&:after{content:'+';position:absolute;bottom:0;right:0;background:#ffffff}}}&:nth-of-type(1){width:66ch}&:nth-of-type(2){width:42ch;left:-1ch}}}dl{width:66ch;margin-bottom:15.3px;>dt{float:left;padding-right:0.999ch;white-space:pre-wrap;&:after{content:' -'}}>dd{margin-bottom:15.3px;white-space:pre-wrap;&:has(>table),&:has(>p){white-space:normal}>p{display:inline}}}header>dl{margin-top:30.6px;>dt{text-transform:uppercase}>dt:after{content:':'}>dd{margin-bottom:30.6px}&:nth-of-type(1)>dt{padding-right:2ch}&:nth-of-type(2)>dd{td{min-width:22ch}&:last-of-type tr:first-of-type>td{padding-bottom:15.3px}}&:nth-of-type(3){margin-bottom:45.9px;>dt{min-width:26ch;text-transform:none}>dd{margin-bottom:0}}&:nth-of-type(4)>dd>p{display:table;margin-left:10ch;&:first-child{margin-bottom:30.6px;max-width:50ch}}}ul{list-style:none;margin-bottom:15.3px;li>&{margin-bottom:0}>li{padding-left:2ch;white-space:pre-wrap;a[id]{transform:translateX(-2ch)}li a[id]{transform:translateX(-4ch)}li li a[id]{transform:translateX(-6ch)}span{color:transparent;white-space:pre;text-indent:0;&:before{content:' - ';color:#000000;position:absolute}}>code{white-space:pre}&:has(>code),&:has(>p),&:has(>ul){white-space:normal}}}ol{list-style-type:none;white-space:collapse;>li{position:relative;margin-bottom:15.3px;padding-left:9ch;a[id]{transform:translateX(-9ch)}>ol{margin-left:-5ch}>pre{margin-left:4ch}>ul>li{padding:0}&:before{content:counter(list-item,decimal) ".";position:absolute;width:3ch;left:4ch;text-align:right}}&[type="a"]{margin-bottom:30.6px;>li:before{content:counter(list-item,lower-alpha) "."}}h3+&{margin-top:30.6px}}#Contents{>hgroup{text-transform:uppercase;>h2{margin-bottom:45.9px;padding-left:33ch}>p{padding-left:16ch;text-indent:-16ch;white-space:normal;>br{margin-top:-15.3px;display:block;content:' '}}}a[href]{background:#ffffff;position:relative;z-index:1;&:nth-of-type(1):after{content:'\A0'}&:nth-of-type(2){position:absolute;right:4ch;&:before{content:'\A0'}}}ul{white-space:normal;>li{margin-bottom:0;padding-left:16ch;>ul>li{padding-left:2ch}}}ol{margin:0;>li{padding:0;margin:0;>a[id]{transform:none}&:before{content:"5." counters(list-item,".");padding-left:4ch;padding-right:5ch;position:static;white-space:pre}&:has(>a>br){padding-left:16ch;text-indent:-16ch}}}>ol>li{margin-top:15.3px;>a:first-child{text-transform:uppercase}&:nth-of-type(n+10):before{padding-right:4ch}&:nth-of-type(n+10) li:before{padding-right:4ch}>ul>li{padding-left:14ch}&:nth-of-type(6)>ul>li{padding-left:16ch}&:nth-of-type(2){margin-top:0}&:nth-of-type(10){margin-top:0}&:nth-of-type(11){margin-top:0}&:nth-of-type(15){margin-top:0}}li>span{color:transparent;&:after{content:'. . . . . . . . . . . . . . . . . . . . .';color:#000000;position:absolute;right:4ch}}li:has(>a>br){>span:after{right:8ch}>a[href]:nth-of-type(2){right:-6ch}}}#Index{>h2{text-align:center;text-transform:none;white-space:pre;&:after{content:' \A------------- '}}>ul{column-count:2;column-gap:2ch;width:70ch;>li{padding-left:4ch;text-indent:-4ch;padding-right:1ch}&:nth-of-type(3){margin-top:-15.3px}&:nth-of-type(1)>li{&:nth-child(9),&:nth-child(20){margin-top:15.3px}}&:nth-of-type(2)>li{&:nth-child(12){margin-top:15.3px}}&:nth-of-type(3)>li{&:nth-child(12),&:nth-child(26),&:nth-child(33),&:nth-child(43){margin-top:15.3px}}&:nth-of-type(4)>li{&:nth-child(29),&:nth-child(34),&:nth-child(42),&:nth-child(44){margin-top:15.3px}}&:nth-of-type(5)>li{&:nth-child(7),&:nth-child(31){margin-top:15.3px}}&:nth-of-type(6)>li{&:nth-child(12),&:nth-child(24),&:nth-child(28),&:nth-child(31){margin-top:15.3px}}&:nth-of-type(3)>li:nth-child(25)>ul>li:nth-child(5){padding-top:15.3px}&:nth-of-type(4)>li:nth-child(20){margin-top:30.6px}}}table{margin-bottom:15.3px;>caption{text-align:left;white-space:nowrap}}tr{height:15.3px;>*:not(:last-child){padding-right:0.999ch}}th,td{box-sizing:border-box;white-space:pre-wrap;&:has(>p){white-space:normal}}th{vertical-align:bottom;text-align:left;position:relative;&[data-underline]:after{content:attr(data-underline);position:absolute;left:0;bottom:0}thead>tr:last-child>&{padding-bottom:15.3px}}td{vertical-align:top;tfoot>tr:first-child>&{padding-top:15.3px}}pre>code{display:block;margin-bottom:15.3px}div{margin:30.6px 0;>p{float:left;clear:both;margin-bottom:0}>pre{>samp{display:block;margin-left:16ch;white-space:pre}+pre{margin-top:15.3px}}}p>samp{margin-left:4ch;white-space:pre}figure{margin-bottom:30.6px;>figcaption{text-align:center;margin-top:30.6px}}section:has(>h4>span),section#INSERT{>h4{display:grid;grid-template-columns:56ch 0ch 10ch;margin-bottom:0;white-space:normal;text-transform:uppercase;&:after{content:'------------------------------------------------------------------';padding-right:0;grid-column:1}>span{color:transparent}}>ul>li{padding-left:4ch;a[id]{transform:translateX(-4ch)}}>ol{margin-bottom:45.9px}>p:has(+ul){margin-top:30.6px}>p:has(+pre>code){margin-top:30.6px}>pre>code{margin-bottom:30.6px}}section:has(>h4>span){p+&{margin-top:61.2px}&#DECTCEM>pre>code{margin-top:30.6px;margin-bottom:45.9px}&#IND{>div{margin:15.3px 0}>ol,>ul{margin-bottom:-15.3px}}&#RI{>ol{margin-bottom:0}>ul{margin-bottom:-15.3px}}&#DECFI{>pre>code{margin-bottom:15.3px}}&#DECBI{>div{margin-top:15.3px}>ol{margin-bottom:0}>ul{margin-bottom:-15.3px}>pre>code{margin-bottom:15.3px}}&#HVP>pre>code{margin-top:-15.3px;margin-bottom:45.9px}&#CPR{>div>pre ~ *{margin-top:15.3px}>ol{margin-bottom:0}>ul>li{padding-left:0ch}>pre>code{margin-bottom:15.3px}}&#DECXCPR{>div>pre ~ *{margin-top:15.3px}>ol{margin-bottom:30.6px}>ol+p>em{padding:0}>pre>code{margin-bottom:15.3px}}&#CR>ul>li{padding-left:2ch}&#VT{>ol{margin-bottom:30.6px}}&#FF{>ol{margin-bottom:30.6px}}&#BS{>div{margin-top:15.3px}>ol{margin-bottom:30.6px}>pre>code{margin-bottom:15.3px}}&#NEL{>ol{margin-bottom:0}>ul{margin-bottom:-15.3px}}&#TBC{>div{margin-bottom:61.2px}>p:has(+ul){margin-top:0}>ul{margin-bottom:-15.3px}}&#HTS{>ol{margin-bottom:0}}&#DECSCPP{>aside{margin-bottom:45.9px}>ol{margin-bottom:0}}&#DECSLPP{>aside{margin-bottom:45.9px}}&#NP{margin-top:0}&#DECRQDE\/DECRPDE{>h4{grid-template-columns:48ch 0ch 18ch}>div>pre ~ *{margin-top:15.3px}>p:has(+ul){margin-top:0}>ul>li>p{display:grid;grid-template-columns:3ch 3ch 53ch;margin-left:-2ch}}&#DECSNLS{>ol{margin-bottom:0}}&#SU{>div>p{margin-left:8ch;margin-right:-1ch}}&#DECDHLT\,DECDHLB{>h4{grid-template-columns:48ch 0ch 18ch}}&#SGR{>table{margin-left:16ch;margin-top:30.6px;td{min-width:16ch}}>p:has(+ol){margin-top:30.6px}>pre>code{margin-bottom:15.3px}}&#DECCTR,&#DECSTGLT{>h4{text-transform:none}>p>em{min-width:9ch}>p:nth-of-type(2){padding-left:11ch;text-indent:-11ch;max-width:50ch;>em{display:inline;padding-right:2ch}}}&#DECCTR{margin-top:0;>div>pre ~ *{margin-top:15.3px}>div>p{max-width:10ch}>p:nth-of-type(3){margin-left:2ch;margin-bottom:-15.3px}>ul{margin-bottom:30.6px;li{padding-left:3ch}>li{padding-left:9ch;text-indent:-3ch}>li:nth-of-type(3){max-width:48ch}>li:nth-of-type(-n+3){margin-bottom:15.3px}}}&#DECSTGLT{>table{margin-left:11ch;margin-top:-15.3px;margin-bottom:30.6px;td{white-space:pre}td:first-child{min-width:6ch}}}&#BEL{>p:has(+ol){margin-top:30.6px}>ol+p>em{padding:0}}&#SCS{>div{margin-bottom:15.3px;>pre>samp{margin-left:10ch}}>p:has(+ul){margin-top:0}>ul:nth-of-type(1)>li{margin-top:15.3px;>ul>li{display:grid;grid-template-columns:6ch 5ch 0ch 5ch;padding-left:4ch}}>ul:nth-of-type(2)>li{display:grid;grid-template-columns:28ch 8ch 0ch 12ch;>ul>li{display:grid;grid-template-columns:26ch 8ch 0ch 22ch;>i{font-style:normal}}&:has(>ul){display:block;margin-top:15.3px}}>ul:nth-of-type(3)>li{padding-left:8ch;display:grid;grid-template-columns:8ch 32ch}}&#DECAUPSS{>ol:first-of-type{margin-bottom:0}>aside{margin-bottom:61.2px;>table{margin-left:4ch}td:nth-of-type(1){min-width:21ch}td:nth-of-type(2){min-width:32ch}}>pre>code{margin-bottom:45.9px}}&#DECRQUPSS{>p:nth-of-type(3){margin-bottom:30.6px}}&#DECNRCM>div{>p{margin-left:4ch}>pre>samp{margin-left:15ch}}&#SUB{>div{margin-top:15.3px}>ol,>ul{margin-bottom:-15.3px}>pre>code{margin-bottom:15.3px}}&#SRM>aside{margin-bottom:45.9px;>ul{margin-top:-15.3px}}&#IRM{>ol{margin-bottom:0}>ul{margin-bottom:-15.3px}}&#ICH{>ol{margin-bottom:0}}&#DCH{>ol{margin-bottom:0}>pre>code{margin-bottom:15.3px}}&#IL,&#DL{>ol{margin-bottom:-15.3px}>pre>code{margin-bottom:15.3px}}&#DECIC,&#DECDC{>div>pre>samp{margin-left:11ch}>ul{margin-bottom:-15.3px}>pre>code{margin-bottom:15.3px}}&#ECH{>ol{margin-bottom:-15.3px}>pre>code{margin-bottom:15.3px}}&#EL,&#ED{>ol{margin-bottom:0}}&#DECSEL{>ol{margin-bottom:0}>ul{margin-bottom:-15.3px}}&#DECSED{>ul{margin-bottom:61.2px}}&#DECSCA>table{margin-left:16ch;margin-top:30.6px;margin-bottom:30.6px;td{min-width:16ch}}&#DECCARA{>div>pre>samp{margin-left:11ch}>table{margin-left:4ch;max-width:46ch;td:first-of-type{padding-left:4ch;min-width:12ch}}}&#DECRARA>table{margin-left:4ch;td{padding-left:8ch}td:first-of-type{padding-left:4ch;min-width:12ch}}&#DECSACE{>ul{margin-top:-15.3px;margin-bottom:30.6px}>figure{&:nth-of-type(1){margin-left:4ch}&:nth-of-type(2){margin-left:5ch;margin-bottom:15.3px}}}&#DECDMAC{margin-top:76.5px;>div{margin-bottom:15.3px}>p:has(+ul){margin-left:4ch;margin-top:0}>ul{margin-top:-15.3px;margin-bottom:30.6px}>ul:nth-of-type(1){max-width:55ch;>li{padding-left:9ch;text-indent:-3ch}}>ul:nth-of-type(2){max-width:61ch;>li{padding-left:10ch;text-indent:-4ch}>li:nth-of-type(3){padding-left:13ch;text-indent:-7ch}>li:nth-of-type(4){margin-right:-1ch}}}&#DECMSR>div{margin-top:0}&#DECRQM{>div{margin-bottom:45.9px}>aside tbody{td:nth-of-type(2n+1){padding-left:6ch;min-width:16ch}td:nth-of-type(2n+2){padding-left:2ch;min-width:11ch}td:nth-of-type(3){padding-left:5ch}td:nth-of-type(4){padding-left:1ch}}>aside tfoot{td{max-width:54ch}p{padding-left:8ch;text-indent:-5ch;margin:0}p:nth-of-type(1){max-width:45ch}p:nth-of-type(2){min-width:51ch}p:nth-of-type(3){min-width:54ch}}}&#DECRPM{>div{margin-bottom:45.9px}>table{margin-left:4ch;td:first-of-type{padding-left:1ch;min-width:8ch}}}&#DECRQSS>aside>table{margin-left:2ch;th:nth-of-type(n+2){left:-2ch;max-width:13ch;white-space:nowrap}td:nth-of-type(1){min-width:31ch}td:nth-of-type(2){min-width:14ch}td:nth-of-type(3){text-align:center}}&#DECRPSS>table{margin-left:4ch;td:first-of-type{padding-left:1ch;min-width:6ch}}&#DECRQPSR>table{margin-left:4ch;td:first-of-type{min-width:8ch}}&#DECPSR>table{margin-left:4ch;margin-top:-15.3px;td:first-of-type{padding-left:1ch;min-width:9ch}}&#DECCIR{>p:nth-of-type(5){margin-left:15ch;margin-top:0}>p>samp{margin-left:2ch}>ul>li{padding-left:5ch;>a[id]{transform:translateX(-5ch)}>p:first-child{display:grid;grid-template-columns:10ch 0ch 46ch}>p:nth-child(n+2){margin-left:10ch;max-width:46ch}>table{margin-left:10ch;max-width:43ch}&:nth-of-type(5)>table{max-width:45ch}}}&#DECRSPS,&#DECRQTSR{>table{margin-left:4ch;td:first-of-type{min-width:8ch}}}&#DECTSR{>p>samp{margin-left:0;position:absolute}>p:has(+ul){margin-top:0}>ul{margin-top:-30.6px;>li{padding-left:6ch}+p{margin:0 10ch 30.6px 7ch;text-indent:-1ch}}}&#DECRSTS{>table{margin-left:4ch;td:first-of-type{min-width:8ch}}>aside{margin-top:30.6px}}}em{font-style:normal;display:inline-block;padding-right:0.999ch;min-width:8ch}#DECIC,#DECDC,#\35\.12{p>em{min-width:7ch}}#DECSTBM,#DECSLRM,#IND,#RI,#SGR,#BEL,#SUB,#DECSCA,#INSERT{>p:nth-of-type(3)>em{min-width:14ch}}#SCS{>p:nth-of-type(6)>em{min-width:14ch}}#\35\.1\.3>figure{margin-top:76.5px;&:nth-of-type(1){margin-left:4ch;margin-right:4ch}&:nth-of-type(2){margin-left:1ch;margin-right:2ch}}#\35\.4\.3,#\35\.4\.4,#\35\.5{>ul{margin-bottom:30.6px}>ul>li{padding-left:4ch}>ul>li>a{display:grid;grid-template-columns:10ch 0ch 50ch;span:before{display:none}}}#\35\.4\.3{>ul>li>a{grid-template-columns:11ch 0ch 50ch}>figure:nth-of-type(1){margin-right:4ch}}#\35\.4\.4,#\35\.4\.5,#\35\.6\.1,#\35\.11,#\35\.13\.1{>section>p:nth-of-type(3)>em{min-width:14ch}#LNM,#CR,#IRM,#DECIC,#DECDC{>p:nth-of-type(3)>em{min-width:8ch}}}#\35\.4\.5>pre{margin-left:5ch}#\35\.5{>section{&:nth-of-type(-n+3)>div>p{margin-left:4ch}&:nth-of-type(-n+4)>div>pre>samp{margin-left:15ch}}>ul>li{padding-left:2ch}}#\35\.6>ul>li:last-child>ul>li:last-child>a{display:grid;grid-template-columns:8ch 3ch 40ch}#\35\.6\.1>ul{margin-bottom:30.6px;>li{padding-left:6ch;&:before{content:'o\A0\A0'}}}#\35\.6\.2>section:nth-of-type(n+2),#\35\.6\.3\.3,#\35\.10\.1\.3,#\35\.11\.1>section{>h4{float:left;margin:0}}#\35\.6\.3 div>pre>samp{margin-left:11ch}#\35\.6\.3\.1>table{margin-left:4ch;th:nth-of-type(2){left:4ch}td:first-of-type{min-width:7ch;padding-left:1ch}td:nth-of-type(2){min-width:27ch}}#\35\.6\.3\.5{margin-top:76.5px;>table{margin-left:4ch;>caption{margin-left:-2ch;margin-bottom:15.3px}>tfoot td{padding-left:1ch}td{min-width:15ch}th:first-child{left:1ch}tr:nth-child(-n+11)>td:first-child{padding-left:1ch}}}#\35\.6\.3\.7>table{margin-left:4ch;td,th{padding-right:0}td:first-child{text-align:right;padding-right:2ch}}#\35\.8\.1{>table{margin-left:4ch;td{min-width:28ch}}>ol{margin-bottom:30.6px}}#\35\.9 table{margin-left:8ch;tr>*:first-child{max-width:8ch}a[id]{transform:translateX(-8ch);margin-right:-16ch}}#\35\.9\.1>table tr{&:nth-child(9)>td{padding-top:15.3px}&:nth-child(26){height:0}}#\35\.9\.2>table tr{&:first-child>td{padding-top:30.6px}&:nth-child(17)>*:first-child{float:left}}#\35\.9\.2,#\35\.10\.2,#\35\.16\.3{margin-top:61.2px}#\35\.10\.1{>div{margin:15.3px 0;>pre>samp{margin-left:15ch}>*:nth-of-type(2){margin-top:15.3px}}table td{min-width:16ch;padding-right:2ch}}#\35\.11>ul>li{&:nth-child(4),&:nth-child(5),&:nth-child(9),&:nth-child(11){span{padding-left:1ch}}}#\35\.12 div>pre>samp{margin-left:9ch}#\35\.13\.2{div>pre>samp{margin-left:10ch}>ul>li{padding-left:5ch;text-indent:-5ch;a[id]{transform:translateX(-5ch);text-indent:0}}}#\35\.15{>h3{margin-top:30.6px;&:after{white-space:pre;content:'\A--------------------------'}}>ul>li{>ul>li{display:grid;grid-template-columns:8ch 3ch 40ch}&:nth-child(2)>ul>li{display:block;span{padding-left:1ch}}&:nth-child(5)>ul>li{display:block;&:nth-child(2)>ul>li:last-child span{padding-left:3ch}&:nth-child(n+3)>ul>li{display:grid;grid-template-columns:6ch 4ch 40ch;&:last-child{grid-template-columns:6ch 3ch 40ch}}&:nth-child(5)>ul>li:nth-child(n){grid-template-columns:7ch 3ch 40ch}}&:nth-child(6)>ul>li{grid-template-columns:6ch 3ch 40ch}}}#\35\.16\.2>ol>li:nth-of-type(12)>ul{margin-top:-15.3px;>li{margin-bottom:0;margin-left:7ch;&:before{content:'o ';margin-left:-2ch}}}#\35\.16\.4{>ol>li>ul{margin-top:-15.3px;margin-left:2ch}>p{margin-left:4ch}}#\35\.17{>dl{width:67ch;>dt{margin-left:2ch;&:after{display:none}}>dd{margin-left:22ch;max-width:45ch}&:first-of-type>dt{margin-left:4ch}}>p:nth-of-type(3){margin-top:30.6px}}a[id]{display:block;position:relative;left:-6.5ch;padding-left:6.5ch;padding-right:12.5ch;width:66ch;height:30.6px;margin-top:141.1px;margin-bottom:30.6px;border-top:11px solid #d4d4d8;padding-top:34px;white-space:pre;&:before{content:'VSRM - Character Cell Display  EL-00070-05\A' 'Digital Internal Use Only  -  For Review Only   29-Jun-1990'}&:after{content:'Page ' attr(data-page);position:absolute;top:34px;right:12.5ch}footer>section>&:after{right:8.5ch}}#Index-2,#Index-3,#Index-4,#Index-5{margin-top:110.5px}#Index-1{margin-top:125.8px}#\35-102,#\35-104,#\35-130,#\35-131,#\35-133,#\35-174,#\35-201,#\35-223{margin-top:156.4px}#\35-28,#\35-37,#\35-42,#\35-44,#\35-60,#\35-90,#\35-100,#\35-124,#\35-125,#\35-134,#\35-163,#\35-190,#\35-220,#\35-224{margin-top:171.7px}#\35-35,#\35-160,#\35-203,#\35-208{margin-top:187px}#\35-7,#\35-32,#\35-52,#\35-95,#\35-170,#\35-178,#\35-180{margin-top:202.3px}#\35-9{margin-top:217.6px}#\35-3,#\35-58,#\35-73,#\35-86,#\35-113{margin-top:232.9px}#\35-33,#\35-62,#\35-63,#\35-67,#\35-72,#\35-75,#\35-77,#\35-119,#\35-139,#\35-144{margin-top:248.2px}#\35-65,#\35-156,#\35-157,#\35-173,#\35-198{margin-top:263.5px}#\35-26,#\35-82,#\35-83,#\35-84,#\35-132,#\35-197,#\35-209{margin-top:278.8px}#\35-22,#\35-97,#\35-126,#\35-146,#\35-184,#\35-195{margin-top:294.1px}#\35-2,#\35-10,#\35-21,#\35-145,#\35-172{margin-top:309.4px}#\35-46,#\35-48,#\35-50,#\35-89,#\35-221{margin-top:324.7px}#\35-8,#\35-155{margin-top:340px}#\35-20,#\35-51,#\35-114,#\35-143,#\35-189,#\35-211,#\35-212{margin-top:355.3px}#\35-38,#\35-101{margin-top:370.6px}#\35-87{margin-top:385.9px}#\35-59,#\35-70,#\35-168{margin-top:401.2px}#\35-56,#\35-85,#\35-98,#\35-147,#\35-149,#\35-166,#\35-206,#\35-213,#\35-214{margin-top:416.5px}#\35-25,#\35-115,#\35-117{margin-top:431.8px}#\35-29,#\35-54,#\35-136,#\35-193,#\35-218{margin-top:447.1px}#\35-88,#\35-153{margin-top:462.4px}#\35-30,#\35-68,#\35-165{margin-top:477.7px}#\35-31,#\35-43,#\35-45,#\35-151,#\35-152{margin-top:493px}#\35-78,#\35-142,#\35-196{margin-top:508.3px}#\35-27,#\35-79,#\35-81,#\35-96{margin-top:523.6px}#\35-47,#\35-57,#\35-80,#\35-185,#\35-194{margin-top:538.9px}#\35-49,#\35-69,#\35-210{margin-top:554.2px}#\35-200{margin-top:569.5px}#\35-55,#\35-61,#\35-92,#\35-93,#\35-154{margin-top:584.8px}#\35-94,#\35-148,#\35-150,#\35-177,#\35-182,#\35-187,#\35-207{margin-top:600.1px}#\35-123,#\35-169,#\35-199{margin-top:615.4px}#\35-137,#\35-181{margin-top:630.7px}#\35-39,#\35-41,#\35-99,#\35-109,#\35-159{margin-top:646px}#\35-23,#\35-66,#\35-138,#\35-175,#\35-204{margin-top:661.3px}#\35-205{margin-top:676.6px}#\35-34,#\35-186,#\35-216{margin-top:691.9px}#\35-19{margin-top:707.2px}#\35-71,#\35-106{margin-top:722.5px}#\35-91{margin-top:737.8px}#\35-103{margin-top:768.4px}#\35-53,#\35-179{margin-top:783.7px}#\35-36,#\35-162{margin-top:890.8px}#\35-15{margin-top:906.1px}#\35-112,#\35-225{margin-top:921.4px}body{>header,>main,>footer{>a[id]:first-child{margin-top:0}}>header{padding-bottom:523.6px}>main{padding-bottom:156.4px}>footer{padding-bottom:95.2px}}</style>
</head>
<body>
<header>
<a id="5-1" data-page="5-1"></a>
<hgroup>
<h1>Video Systems Reference Manual<br />Character Cell Display</h1>
<p>Document Identifier: A-DS-EL00070-05-0 Rev. AX12, 29-Jun-1990&nbsp;</p>
</hgroup>
<dl>
<dt>Abstract</dt>
<dd><p>This section includes the definition of all state information required for the Character Cell Display service class, as well as all interface operations which may be performed to affect this state.</p></dd>
<dt>Applicability</dt>
<dd><p>Mandatory for Engineers designing hardware for terminal products and Software Engineers designing programs using terminal interfaces.  Additional requirements are defined in the section on "Concepts and Conformance Criteria".</p></dd>
<dt>Status</dt>
<dd><p>FOR REVIEW ONLY</p></dd>
</dl>
<aside>
<p>The material contained within this document is assumed to define mandatory standards unless it is clearly marked as:  (a) not mandatory; or (b) guidelines.  Material which is marked as "not mandatory" is considered to be of potential benefit to the corporation and should be followed unless there are good reasons for non-compliance. "Guidelines" define approaches and techniques which are considered to be good practice, but should not be considered as requirements.</p>
</aside>
<aside>
<p>The information in this publication is for INTERNAL DIGITAL USE ONLY;  do not distribute this information to anyone who is not an employee of Digital.</p>
</aside>
<a id="5-2" data-page="5-2"></a>
<dl>
<dt>Title</dt>
<dd>VIDEO SYSTEMS - Character Cell Display</dd>
<dt>Document Identifier</dt>
<dd>A-DS-EL00070-05-0 Rev. AX12, 29-Jun-1990</dd>
<dt>Revision History</dt>
<dd><table>
<tbody>
<tr><td>Original Draft</td><td>15-Jul-1982</td></tr>
<tr><td>Revision 0.4</td><td>30-Sep-1982</td></tr>
<tr><td>Revision 0.5</td><td>25-Dec-1982</td></tr>
<tr><td>Revision AX01</td><td>28-Feb-1983</td></tr>
<tr><td>Revision AX10</td><td>15-May-1983</td></tr>
<tr><td>Revision AX11</td><td>18-Mar-1985</td></tr>
</tbody>
</table>
</dd>
<dt>Files</dt>
<dd><table>
<tbody>
<tr><td>User Documentation</td><td>EL070S5.mem</td></tr>
<tr><td>Internal Documentation</td><td>EL070S5.rno</td></tr>
<tr><td></td><td>EL070S5.rnt</td></tr>
<tr><td></td><td>EL070S5.rnx</td></tr>
</tbody>
</table>
</dd>
</dl>
<dl>
<dt>Document Management Group</dt>
<dd>Terminal Interface Architecture (STI)</dd>
<dt>Responsible Department</dt>
<dd>VIPS Terminals Architecture</dd>
<dt>Responsible Person</dt>
<dd>Peter Sichel</dd>
</dl>
<dl>
<dt>Approval</dt>
<dd><p>This document prepared by the VIPS (Video Image &amp;&nbsp;Printing Systems) Group has been reviewed and recommended for approval by the general review group for its category for use throughout Digital.</p>
<p>*** Status:  For Review Only ***<br />_________________________________________ Peter Sichel,<br />VIPS Terminals Architecture</p>
<p>*** Status:  For Review Only ***<br />________________________________________ Eric Williams,<br />Standards Process Manager</p></dd>
</dl>
<p>Direct requests for further information to Peter Sichel, DSG1-&NoBreak;2/&NoBreak;C7, DTN 235-8374, HANNAH::TERMARCH</p>
<p>Copies of this document can be ordered from Standards and Methods Control, CTS1-2/D4, DTN 287-3724, JOKUR::SMC</p>
<a id="5-3" data-page="5-3"></a>
<section id="Contents">
<hgroup>
<h2>Contents</h2>
<p>Chapter 5<br />Character Cell Display</p>
</hgroup>
<ol>
<li><a href="#5.1">Introduction</a><span> … </span><a href="#5-6">5-6</a><ol>
<li><a href="#5.1.1">Purpose</a><span> … </span><a href="#5-6">5-6</a></li>
<li><a href="#5.1.2">Scope</a><span> … </span><a href="#5-6">5-6</a></li>
<li><a href="#5.1.3">Relationship To TIA</a><span> … </span><a href="#5-7">5-7</a></li>
<li><a href="#5.1.4">Organization</a><span> … </span><a href="#5-9">5-9</a></li>
</ol>
</li>
<li><a href="#5.2">Terminology</a><span> … </span><a href="#5-9">5-9</a><ol>
<li><a href="#5.2.1">Code Extension Terms</a><span> … </span><a href="#5-13">5-13</a></li>
</ol>
</li>
<li><a href="#5.3">Character Cell Display State Declarations</a><span> … </span><a href="#5-15">5-15</a><ol>
<li><a href="#5.3.1">Notes On Character Cell Display State</a><span> … </span><a href="#5-17">5-17</a></li>
</ol>
</li>
<li><a href="#5.4">Display Coordinate System And Addressing</a><span> … </span><a href="#5-19">5-19</a><ol>
<li><a href="#5.4.1">Logical Display</a><span> … </span><a href="#5-19">5-19</a></li>
<li><a href="#5.4.2">Active Position And Cursor</a><span> … </span><a href="#5-20">5-20</a><ul>
<li><a href="#DECTCEM">Set/Reset Text Cursor Enable Mode</a></li>
</ul>
</li>
<li><a href="#5.4.3">Margins And Scrolling</a><span> … </span><a href="#5-23">5-23</a><ul>
<li><a href="#DECSTBM">Set Top and Bottom Margins</a></li>
<li><a href="#DECSLRM">Set Left and Right Margins</a></li>
<li><a href="#DECLRMM">Set/Reset Left Right Margin Mode</a></li>
<li><a href="#DECOM">Set/Reset Origin Mode</a></li>
<li><a href="#DECSCLM">Set/Reset Scrolling Mode</a></li>
<li><a href="#IND">Index</a></li>
<li><a href="#RI">Reverse Index</a></li>
<li><a href="#DECFI">Forward Index</a></li>
<li><a href="#DECBI">Back Index</a></li>
</ul>
</li>
<li><a href="#5.4.4">Cursor Movement</a><span> … </span><a href="#5-40">5-40</a><ul>
<li><a href="#CUU">Cursor Up</a></li>
<li><a href="#CUD">Cursor Down</a></li>
<li><a href="#CUF">Cursor Forward</a></li>
<li><a href="#CUB">Cursor Backward</a></li>
<li><a href="#CUP">Cursor Position</a></li>
<li><a href="#HVP">Horizontal/Vertical Position</a></li>
<li><a href="#CPR">Cursor Position Report</a></li>
<li><a href="#DECXCPR">Extended Cursor Position Report</a></li>
<li><a href="#LNM">Set/Reset New Line Mode</a></li>
<li><a href="#CR">Carriage Return</a></li>
<li><a href="#LF">Line Feed</a></li>
<li><a href="#VT">Vertical Tab</a></li>
<li><a href="#FF">Form Feed</a></li>
<li><a href="#BS">Back Space</a></li>
<li><a href="#NEL">Next Line</a></li>
</ul>
</li>
<li><a href="#5.4.5">Horizontal Tabulation</a><span> … </span><a href="#5-65">5-65</a><ul>
<li><a href="#TBC">Tabulation Clear</a></li>
<li><a href="#HT">Horizontal Tab</a></li>
<li><a href="#HTS">Horizontal Tabulation Set</a></li>
</ul>
</li>
<li><a href="#5.4.6">Page Size And Arrangement</a><span> … </span><a href="#5-70">5-70</a><a id="5-4" data-page="5-4"></a><ul>
<li><a href="#DECCOLM">Set/Reset Column Mode</a></li>
<li><a href="#DECSCPP">Set Columns Per Page</a></li>
<li><a href="#DECSLPP">Set Lines Per Page</a></li>
</ul>
</li>
<li><a href="#5.4.7">Page Movement</a><span> … </span><a href="#5-77">5-77</a><ul>
<li><a href="#NP">Next Page</a></li>
<li><a href="#PP">Preceding Page</a></li>
<li><a href="#PPA">Page Position Absolute</a></li>
<li><a href="#PPR">Page Position Relative</a></li>
<li><a href="#PPB">Page Position Backward</a></li>
</ul>
</li>
</ol>
</li>
<li><a href="#5.5">Windowing Extension</a><span> … </span><a href="#5-84">5-84</a><ul>
<li><a href="#DECHCCM">Set/Reset Horizontal Cursor Coupling Mode</a></li>
<li><a href="#DECVCCM">Set/Reset Vertical Cursor Coupling Mode</a></li>
<li><a href="#DECPCCM">Set/Reset Page Cursor Coupling Mode</a></li>
<li><a href="#DECRQDE/DECRPDE">Request/Report Displayed Extent</a></li>
<li><a href="#DECSNLS">Select Number of Lines per Screen</a></li>
<li><a href="#SU">Pan Down (SU)</a></li>
<li><a href="#SD">Pan Up (SD)</a></li>
</ul>
</li>
<li><a href="#5.6">Visual Renditions</a><span> … </span><a href="#5-93">5-93</a><ul>
<li><a href="#DECSCNM">Set/Reset Screen Mode</a></li>
</ul>
<ol>
<li><a href="#5.6.1">Line Renditions</a><span> … </span><a href="#5-95">5-95</a><ul>
<li><a href="#DECSWL">Single Width Line</a></li>
<li><a href="#DECDWL">Double Width Line</a></li>
<li><a href="#DECDHLT,DECDHLB">Double Height Line</a></li>
</ul>
</li>
<li><a href="#5.6.2">Character Renditions</a><span> … </span><a href="#5-101">5-101</a><ol>
<li><a href="#5.6.2.1">Normal Rendition</a><span> … </span><a href="#5-101">5-101</a></li>
<li><a href="#5.6.2.2">Bold Rendition</a><span> … </span><a href="#5-101">5-101</a></li>
<li><a href="#5.6.2.3">Blink Rendition</a><span> … </span><a href="#5-101">5-101</a></li>
<li><a href="#5.6.2.4">Underscore Rendition</a><span> … </span><a href="#5-102">5-102</a></li>
<li><a href="#5.6.2.5">Reverse Rendition</a><span> … </span><a href="#5-102">5-102</a></li>
</ol>
<ul>
<li><a href="#SGR">Select Graphic Rendition</a></li>
</ul>
</li>
<li><a href="#5.6.3">ANSI Color Text Extension</a><span> … </span><a href="#5-106">5-106</a><ol>
<li><a href="#5.6.3.1">SGR Color Selection</a><span> … </span><a href="#5-106">5-106</a></li>
<li><a href="#5.6.3.2">Interaction With Other Visual Renditions</a><span> … </span><a href="#5-106">5-106</a></li>
<li><a href="#5.6.3.3">Color Maps</a><span> … </span><a href="#5-107">5-107</a></li>
<li><a href="#5.6.3.4">Color Table Report (DECCTR)</a><span> … </span><a href="#5-109">5-109</a></li>
<li><a href="#5.6.3.5">Default Color Assignment (Guideline)</a><span> … </span><a href="#5-110">5-110</a></li>
<li><a href="#5.6.3.6">Color Interaction Among Modes And Data<br />Syntaxes (Guideline)</a><span> … </span><a href="#5-112">5-112</a></li>
<li><a href="#5.6.3.7">Alternative Text Rendition Mapping<br />(Guideline)</a><span> … </span><a href="#5-112">5-112</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#5.7">Audible Indicator</a><span> … </span><a href="#5-114">5-114</a><ul>
<li><a href="#BEL">Warning Bell</a></li>
</ul>
</li>
<li><a href="#5.8">Graphic Character Sets</a><span> … </span><a href="#5-115">5-115</a><ol>
<li><a href="#5.8.1">Character Set Repertoire</a><span> … </span><a href="#5-115">5-115</a></li>
<li><a href="#5.8.2">Character Set Selection</a><span> … </span><a href="#5-116">5-116</a><ul>
<li><a href="#SCS">Designate Character Set</a></li>
<li><a href="#DECAUPSS">Assign User-Preference Supplemental Set</a></li>
<li><a href="#DECRQUPSS">Request User-Preference Supplemental Set</a></li>
<li><a href="#DECNRCM">National Replacement Character Set Mode</a></li>
</ul>
</li>
</ol>
<a id="5-5" data-page="5-5"></a></li>
<li><a href="#5.9">Summary Of Control Character Processing</a><span> … </span><a href="#5-128">5-128</a><ol>
<li><a href="#5.9.1">C0 Control Characters</a><span> … </span><a href="#5-128">5-128</a></li>
<li><a href="#5.9.2">C1 Control Characters</a><span> … </span><a href="#5-130">5-130</a></li>
</ol>
<ul>
<li><a href="#SUB">Substitute</a></li>
</ul>
</li>
<li><a href="#5.10">Modes States (And Mode Descriptions)</a><span> … </span><a href="#5-133">5-133</a><ol>
<li><a href="#5.10.1">SM/RM - Set Mode, Reset Mode Sequence</a><span> … </span><a href="#5-133">5-133</a><ol>
<li><a href="#5.10.1.1">ANSI Specified Modes:</a><span> … </span><a href="#5-133">5-133</a></li>
<li><a href="#5.10.1.2">DEC Private Modes:</a><span> … </span><a href="#5-133">5-133</a></li>
<li><a href="#5.10.1.3">Modes That Cannot Be Changed</a><span> … </span><a href="#5-134">5-134</a></li>
</ol>
</li>
<li><a href="#5.10.2">Mode Descriptions</a><span> … </span><a href="#5-134">5-134</a><ul>
<li><a href="#SRM">Set/Reset Send Receive Mode</a></li>
</ul>
</li>
</ol>
</li>
<li><a href="#5.11">Editing Functions</a><span> … </span><a href="#5-137">5-137</a><ul>
<li><a href="#IRM">Set/Reset Insert/Replacement Mode</a></li>
<li><a href="#INSERT">Insert or Replace Graphic Character</a></li>
<li><a href="#ICH">Insert Character</a></li>
<li><a href="#DCH">Delete CHaracter</a></li>
<li><a href="#IL">Insert Line</a></li>
<li><a href="#DL">Delete Line</a></li>
<li><a href="#DECIC">Insert Column</a></li>
<li><a href="#DECDC">Delete Column</a></li>
<li><a href="#ECH">Erase Character</a></li>
<li><a href="#EL">Erase in Line</a></li>
<li><a href="#ED">Erase in Display</a></li>
<li><a href="#DECSEL">Selective Erase in Line</a></li>
<li><a href="#DECSED">Selective Erase in Display</a></li>
</ul>
<ol>
<li><a href="#5.11.1">Character Attributes</a><span> … </span><a href="#5-165">5-165</a><ol>
<li><a href="#5.11.1.1">Normal Character Attribute</a><span> … </span><a href="#5-165">5-165</a></li>
<li><a href="#5.11.1.2">Selectively Erasable Character Attribute</a><span> … </span><a href="#5-165">5-165</a></li>
</ol>
</li>
</ol>
<ul>
<li><a href="#DECSCA">Select Character Attribute</a></li>
</ul>
</li>
<li><a href="#5.12">OLTP Features</a><span> … </span><a href="#5-168">5-168</a><ol>
<li><a href="#5.12.1">Rectangular Area Operations</a><span> … </span><a href="#5-168">5-168</a><ul>
<li><a href="#DECCRA">Copy Rectangular Area</a></li>
<li><a href="#DECFRA">Fill Rectangular Area</a></li>
<li><a href="#DECERA">Erase Rectangular Area</a></li>
<li><a href="#DECSERA">Selective Erase Rectangular Area</a></li>
<li><a href="#DECCARA">Change Attributes Rectangular Area</a></li>
<li><a href="#DECRARA">Reverse Attributes Rectangular Area</a></li>
<li><a href="#DECSACE">Select Attribute Change Extent</a></li>
</ul>
</li>
<li><a href="#5.12.2">Data Integrity</a><span> … </span><a href="#5-179">5-179</a><ul>
<li><a href="#DECRQCRA">Request Checksum of Rectangular Area</a></li>
<li><a href="#DSR">Memory Checksum DSR</a></li>
<li><a href="#DECCKSR">Checksum Report</a></li>
</ul>
</li>
<li><a href="#5.12.3">Macros</a><span> … </span><a href="#5-182">5-182</a><ul>
<li><a href="#DECDMAC">Define Macro</a></li>
<li><a href="#DECINVM">Invoke Macro</a></li>
<li><a href="#DECMSR">Macro Space Report</a></li>
</ul>
</li>
</ol>
</li>
<li><a href="#5.13">Saving And Restoring Terminal State</a><span> … </span><a href="#5-186">5-186</a><ol>
<li><a href="#5.13.1">Cursor Save Buffer</a><span> … </span><a href="#5-186">5-186</a><ul>
<li><a href="#DECSC">Save Cursor</a></li>
<li><a href="#DECRC">Restore Cursor</a></li>
</ul>
</li>
<li><a href="#5.13.2">Terminal State Interrogation</a><span> … </span><a href="#5-191">5-191</a><a id="5-6b" data-page="5-6"></a><ul>
<li><a href="#DECRQM">Request Mode</a></li>
<li><a href="#DECRPM">Report Mode</a></li>
<li><a href="#DECRQSS">Request Selection or Setting</a></li>
<li><a href="#DECRPSS">Report Selection or Setting</a></li>
<li><a href="#DECRQPSR">Request Presentation State Report</a></li>
<li><a href="#DECPSR">Presentation State Report</a><ul>
<li><a href="#DECCIR">Cursor Information Report</a></li>
<li><a href="#DECTABSR">Tabulation Stop Report</a></li>
</ul>
</li>
<li><a href="#DECRSPS">Restore Presentation State</a></li>
<li><a href="#DECRQTSR">Request Terminal State Report</a></li>
<li><a href="#DECTSR">Terminal State Report (1)</a></li>
<li><a href="#DECRSTS">Restore Terminal State</a></li>
</ul>
</li>
</ol>
</li>
<li><a href="#5.14">Internal Functions And Procedures</a><span> … </span><a href="#5-209">5-209</a><ol>
<li><a href="#5.14.1">End Of Line</a><span> … </span><a href="#5-209">5-209</a></li>
<li><a href="#5.14.2">Scroll Up</a><span> … </span><a href="#5-210">5-210</a></li>
<li><a href="#5.14.3">Scroll Down</a><span> … </span><a href="#5-211">5-211</a></li>
<li><a href="#5.14.4">Scroll Left</a><span> … </span><a href="#5-212">5-212</a></li>
<li><a href="#5.14.5">Scroll Right</a><span> … </span><a href="#5-213">5-213</a></li>
</ol>
</li>
<li><a href="#5.15">Control Function Reference To Other Chapters</a><span> … </span><a href="#5-214">5-214</a></li>
<li><a href="#5.16">Change History</a><span> … </span><a href="#5-216">5-216</a><ol>
<li><a href="#5.16.1">Rev 0.4 To 0.5</a><span> … </span><a href="#5-216">5-216</a></li>
<li><a href="#5.16.2">Revision 0.5 To AX10</a><span> … </span><a href="#5-218">5-218</a></li>
<li><a href="#5.16.3">Rev AX10 To AX11</a><span> … </span><a href="#5-220">5-220</a></li>
<li><a href="#5.16.4">Rev AX11 To AX12</a><span> … </span><a href="#5-221">5-221</a></li>
</ol>
</li>
<li><a href="#5.17">Reference Standards</a><span> … </span><a href="#5-225">5-225</a></li>
</ol>
</section>
</header>
<main>
<a id="5-6" data-page="5-6"></a>
<section id="5.1">
<h2>5.1  Introduction</h2>
<section id="5.1.1">
<h3>5.1.1  Purpose</h3>
<p>This section defines the interface to a Character Cell Display device.  A Character Cell Display device is a device capable of character imaging output.  In addition to the physical presentation of graphic characters, it must provide certain control functions for defining the format and rendition of the information presented.</p>
<p>The Character Cell service class consists of operations that image or format characters that are addressed on the imaging surface using a character cell addressing capability.  All Character Cell operations are either graphic (printing) characters or control functions (control characters, escape sequences, control sequences, or control strings) according to the structure of ANSI X3.41, Code Extension Techniques for use with ASCII, and ANSI X3.64, Additional Control Functions for use with ASCII.</p>
<p>Character Cell Display devices are distinguished from Character Cell Printing devices by their ability to perform certain dynamic operations, such as inserting characters within text, erasing previously displayed characters, and blinking.</p>
<p>The Character Cell Display service class consists of operations that:</p>
<ol>
<li><p>image characters on a two-dimensional display surface that represent text or picture drawing symbols,</p></li>
<li><p>alter their position after receipt</p></li>
<li><p>remove them from the display, and</p></li>
<li><p>cause them to be re-transmitted.</p></li>
</ol>
<p>The intent of the Character Cell Display service class is to be implementable using a character generator or a minimum of a single plane image memory.</p>
</section>
<section id="5.1.2">
<h3>5.1.2  Scope</h3>
<p>This section applies to all DEC products which implement these interfaces and are intended to be certified as conforming to the Terminal Interface Architecture.  It also applies to software which is intended to use these interfaces in a conforming manner.</p>
</section>
<a id="5-7" data-page="5-7"></a>
<section id="5.1.3">
<h3>5.1.3  Relationship To TIA</h3>
<p>The Character Cell interface forms a service class of the Presentation Service Class layer of the Terminal Interface Architecture.  It is independent of the other layers of the architecture, and has no explicit relationship to other service classes within the Presentation Service Class layer.</p>
<figure>
<pre>                                 USER

..........  -----------------------------------------------
.        .  |                                             |
.        .  |              Input Processing               |
.        .  |                                             |
.        .  |                                             |
.  T  M  .  -----------------------------------------------
.  e  a  .  -----------------------------------------------
.  r  n  .  | ===============                             |
.  m  a  .  | || Character ||       Presentation          |
.  i  g  .  | ||   Cell    ||       Service Class         |
.  n  e  .  | ||  Display  ||                             |
.  a  m  .  | ===============                             |
.  l  e  .  -----------------------------------------------
.     n  .  -----------------------------------------------
.     t  .  |                                             |
.        .  |                Code Extension               |
.        .  |                    Layer                    |
.        .  |                                             |
..........  -----------------------------------------------


                           APPLICATION PROCESS

</pre>
<figcaption>Structuring of the Terminal Interface Architecture</figcaption>
</figure>
<a id="5-8" data-page="5-8"></a>
<p>The interfaces defined within this specification apply to both internal and external product interfaces.  External interfaces are interfaces between a terminal, personal computer or workstation and a remote system.  Internal interfaces are interfaces between a terminal sub-system and software processes running within a terminal, personal computer or workstation.</p>
<figure>
<pre>                          *
                          *
      terminal system     *                        host system
--------------------------*                      ---------------
|            |            *                      |             |
|  physical  |  virtual   *..........            | application |
|  terminal  |  terminal  *        ..............|   process   |
|            |            *                      |             |
--------------------------*                      ---------------
  &lt;hardware>   &lt;firmware> * &lt;communications link>   &lt;software>
                          *
                          *
                          * EXTERNAL INTERFACE





                          *
                          *
              terminal system
--------------------------*--------------
|            |            *             |
|  physical  |  virtual   * application |
|  terminal  |  terminal  *   process   |
|            |            *             |
--------------------------*--------------
  &lt;hardware>   &lt;software/ *  &lt;software>
                firmware> *
                          *
                          * INTERNAL INTERFACE



</pre>
<figcaption>External and Internal Terminal Interfaces</figcaption>
</figure>
</section>
<a id="5-9" data-page="5-9"></a>
<section id="5.1.4">
<h3>5.1.4  Organization</h3>
<p>To simplify understanding the Character Cell Display service class, this section is divided into a number of largely independent subsections which describe functionally related parts of the ANSI host interface.  These subsections are:</p>
<ul>
<li><a href="#5.4">Display Coordinate System and Addressing</a></li>
<li><a href="#5.5">Window Management</a></li>
<li><a href="#5.6">Visual Attributes and Renditions</a></li>
<li><a href="#5.7">Audible Indicator</a></li>
<li><a href="#5.8">Graphic Character Sets</a></li>
<li><a href="#5.9">Summary of Control Character Processing</a></li>
<li><a href="#5.10">Mode States</a></li>
<li><a href="#5.11">Editing Functions</a></li>
<li><a href="#5.12">OLTP Features</a></li>
<li><a href="#5.13">Saving and Restoring Terminal State</a></li>
</ul>
<p>Other sections of the VSRM also describe parts of the ANSI host interface.</p>
</section>
</section>
<section id="5.2">
<h2>5.2  Terminology</h2>
<dl>
<dt>Active Position</dt>
<dd>(1) The character position in a visual display that is to image the graphic symbol representing the next graphic or control character for which a graphic representation is required (2) The character position in a logical display which contains the character code, graphic rendition, and character set of a graphic or control character for which a graphic representation is required.</dd>
<dt>Advance</dt>
<dd>To move the active position in the direction of increasing horizontal character position in a visual or logical display.</dd>
<dt>Application</dt>
<dd>A hardware or software implementation of a process or a device.</dd>
<dt>Application Program</dt>
<dd>A program that runs under control of an operating system.<a id="5-10" data-page="5-10"></a></dd>
<dt>Audible Indicator</dt>
<dd>A warning "bell", or similar indicator suitable to signal the operator's attention, primarily to warn of certain error conditions.  There are four functional categories of bells in conforming terminals:  Right Margin Bell, Warning Bell, Required Error Bells, and Selectable Error Bells.</dd>
<dt>Backward</dt>
<dd>In the direction of decreasing horizontal character position in a visual or logical display.</dd>
<dt>Blind Interchange</dt>
<dd>Information interchange in which no prior agreements between sender and recipient are necessary in order to achieve successful interpretation of the information, except agreed-upon standards.</dd>
<dt>C0 Set</dt>
<dd>A set of 32 control characters allocated to columns 0 and 1 of a code table.</dd>
<dt>C1 Set</dt>
<dd>A set of 32 control characters allocated to columns 8 and 9 of an 8-bit code table, or represented as ESCape Fe sequences in 7-bit environment with identical meaning.</dd>
<dt>Character Attribute</dt>
<dd>An attribute value which may be applied to a character position, which affects its subsequent processing, as in editing or retransmission.</dd>
<dt>Character Imaging Device</dt>
<dd>A device that gives a visual representation of data in the form of graphic symbols using any technology, such as a on a cathode ray tube.  In this specification the term "character imaging device" does not apply to hard copy devices (printers) which are not capable of dynamic editing and reformatting of the displayed information.</dd>
<dt>Character Position</dt>
<dd>(1) The portion of a visual display that images or is capable of imaging a graphic symbol.  (2) An addressable element in a logical display containing sufficient information to render a graphic symbol, including the character code, visual attributes, logical attributes, and character set designation.</dd>
<dt>Character Rendition</dt>
<dd>An attribute value which may be applied to a character position, which affects its visual representation (see Graphic Rendition).</dd>
<dt>Control</dt>
<dd>A control character, an escape sequence, or a control sequence that performs a control function.</dd>
<dt>Control Sequence Introducer (CSI)</dt>
<dd>The C1 control (represented by a single character in 8-bits, or a two character ESC Fe sequence in 7-bits) which initiates a control sequence.  CSI is a prefix affecting the interpretation of a limited number of contiguous bit combinations.</dd>
<dt>Cursor, Cursor Symbol</dt>
<dd>A visual (blinking or non-blinking) <a id="5-11" data-page="5-11"></a>symbol, usually a rectangle, diamond or underline that indicates the Active Position on the display.</dd>
<dt>Cursor Control</dt>
<dd>An editing function that moves the active position.</dd>
<dt>Default</dt>
<dd>A function-dependent value that is assumed when no explicit value, or a value of 0, is specified.</dd>
<dt>Delete</dt>
<dd>To remove displayed symbols and close up adjacent graphic symbols to fill the gap.</dd>
<dt>Designate</dt>
<dd>To identify a set of characters that are to be represented in a prescribed manner, in some cases immediately and in others on the occurrence of a further control function.</dd>
<dt>Display</dt>
<dd>The area for visual presentation of data on cathode ray tube and similar character imaging devices.  In this specification the word "display" will always be qualified by the terms "physical" (or "visual") and "logical", to differentiate between the actual presentation surface and memory buffers containing information to be presented.</dd>
<dt>Editor Function</dt>
<dd>A control that affects the layout or positioning of previously entered or received information in a character imaging device and is intended to be interpreted without remaining in the data stream.  See Format Effector.</dd>
<dt>Empty Character</dt>
<dd>A character position in the logical display in which no character code appears, and thus no character is rendered in the visual display for this position.  In an empty character position the character rendition, character attribute, and character set values should be ignored.</dd>
<dt>Enter</dt>
<dd>To input information manually into a character imaging device or to read information from an auxiliary device into a character imaging device.</dd>
<dt>Erase</dt>
<dd>To remove displayed graphic symbols without closing up adjacent symbols to fill the gap.</dd>
<dt>Fixed Space</dt>
<dd>A character that normally has no graphic representation, occupies a character position in a visual display, and is usually encoded as bit combination 2/0.</dd>
<dt>Following</dt>
<dd>Lines or character positions in the visual display with larger numbered lines or larger numbered character positions than that of the active position.</dd>
<dt>Font</dt>
<dd>A complete assortment of displayable graphic symbols in one size or style.</dd>
<dt>Format Effector</dt>
<dd>A control that effects the layout or positioning <a id="5-12" data-page="5-12"></a>of information in a character imaging device and may remain in the data stream subsequent to interpretation and processing.  See Editor Function.</dd>
<dt>Forward</dt>
<dd>In the direction of increasing horizontal character position in a visual display.</dd>
<dt>Graphic Character</dt>
<dd>A character, other than a control character, that has a visual representation normally handwritten, printed, or displayed.</dd>
<dt>Graphic Rendition</dt>
<dd>A visual style of displaying a set of graphic symbols.</dd>
<dt>Graphic Symbol</dt>
<dd>A visual representation of a graphic character or a control for which a graphic representation is required.</dd>
<dt>Invoke</dt>
<dd>To cause a designated set of characters to be represented by the prescribed bit combinations whenever those bit combinations occur until an appropriate code extension function occurs.</dd>
<dt>Line</dt>
<dd>A set of adjacent character positions in a visual display that have the same vertical position.</dd>
<dt>Logical Display</dt>
<dd>the lines and columns available for storing and presenting graphic characters as seen by the application or host computer.  A Logical Display may be organized as a single rectangular array of lines and columns (one page), or divided into a number of identically sized pages, each of which is a rectangular array of lines and columns.</dd>
<dt>Margin</dt>
<dd>A line which marks the upper or lower boundary of the scrolling region (vertical scroll margin).  A column which marks the left or right boundary of the scrolling region (horizontal scroll margin).</dd>
<dt>Mode</dt>
<dd>A state of a device, or other sender or recipient, that affects the interpretation of received information, the operation of the sender or recipient, or the format of the transmitted information.</dd>
<dt>Next</dt>
<dd>See Following.</dd>
<dt>Operating System</dt>
<dd>Software that controls the execution of computer programs and may provide scheduling, debugging, input/&NoBreak;output control, accounting, compilation, storage assignment, data management, and related services.</dd>
<dt>Page</dt>
<dd>An addressable area of a Logical Display organized as a rectangular array of lines and columns.  The number of lines and columns defines the Page Size.</dd>
<dt>Preceding</dt>
<dd>Lines or character positions in a visual display with <a id="5-13" data-page="5-13"></a>smaller numbered lines or smaller numbered character positions than that of the active position.</dd>
<dt>Private Use</dt>
<dd>A technique of encoding or representing information in a prescribed, but nonstandard, way.</dd>
<dt>Received Data Stream</dt>
<dd>The stream of bit combinations received by a character imaging device for purposes of information interchange.</dd>
<dt>Represent</dt>
<dd>(1) To use a prescribed bit combination with the meaning of a character in a set of characters that has been designated and invoked.  (2) To use an escape sequence with the meaning of an additional control character.</dd>
<dt>Scroll</dt>
<dd>An action whereby all of the graphic symbols of a visual display are moved in a specified direction.</dd>
<dt>String Delimiter</dt>
<dd>A control that begins or ends a string of characters in a data stream.</dd>
<dt>Tabulation</dt>
<dd>A technique of identifying character positions in a visual display for the purpose of arranging information systematically.</dd>
<dt>Tabulation Stop</dt>
<dd>An indication that a character position is to be used for tabulation.</dd>
<dt>Transmit</dt>
<dd>To send data as a data stream for purposes of information interchange.</dd>
<dt>Transmitted Data Stream</dt>
<dd>The stream of bit combinations sent by a character imaging device when it is induced to transmit for purposes of information interchange.</dd>
</dl>
<section id="5.2.1">
<h3>5.2.1  Code Extension Terms</h3>
<p>This chapter also uses the following terms which are defined in the "Code Extension Layer" section of the VSRM (DEC STD 70-3):</p>
<ul>
<li>Bit Combination</li>
<li>Character</li>
<li>Control Character</li>
<li>Control Function</li>
<li>Control Sequence</li>
<li>Control String</li>
<li>Escape Character (ESC)</li>
<li>Escape Sequence</li>
<li>Final Character</li>
<li>Intermediate Character</li>
<li>Numeric Parameter</li>
<li><a id="5-14" data-page="5-14"></a>Parameter</li>
<li>Parameter String</li>
<li>Selective Parameter</li>
</ul>
</section>
</section>
<a id="5-15" data-page="5-15"></a>
<section id="5.3">
<h2>5.3  Character Cell Display State Declarations</h2>
<pre><code>/**************  module char_cell_types.h  *************/
/*
 * type declarations for character cell display state
 * PAS 28-Jul-1989
 */

typedef enum { JUMP, SLOW } scrolling_mode_t;
typedef enum { NORMAL_SCREEN, REVERSE_SCREEN } screen_mode_t;
typedef enum { WRAP_OFF, WRAP_ON } auto_wrap_mode_t;
typedef enum { TEXT_CURSOR_OFF, TEXT_CURSOR_ON }
    text_cursor_enable_mode_t;
typedef enum { INSERT, REPLACE } insert_replace_mode_t;
typedef enum { NEW_LINE_OFF, NEW_LINE_ON } new_line_mode_t;
typedef short int line_t;
typedef short int column_t;
typedef short int page_t;
typedef struct
    {         /* character_position_t */
    line_t line;
    column_t column;
    page_t page;
    } character_position_t;
typedef enum { TRUE, FALSE } boolean_t;
typedef struct
    {         /* character_rendition_t */
    boolean_t bold;
    boolean_t blink;
    boolean_t underscore;
    boolean_t reverse;
    } character_rendition_t;
typedef struct
    {        /* character_attribute_t */
    boolean_t selective_erase;
    } character_attribute_t;
typedef enum
    {        /* line_rendition_t */
    DOUBLE_HEIGHT_TOP,
    DOUBLE_HEIGHT_BOTTOM,
    SINGLE_WIDTH,
    DOUBLE_WIDTH
    } line_rendition_t;
typedef struct
    {       /* character_t */
    short int code;
    character_rendition_t rendition;
    character_attribute_t attribute;
    graphic_character_set_t character_set;
    } character_t;
typedef struct
    {       /* char_set_designator_t */
    graphic_character_set_t name;
<a id="5-16" data-page="5-16"></a>    short int first_intermediate;    /* 0-47, 0=no intermediate */
    short int second_intermediate;   /* 0-47 */
    short int final;                 /* 0 indicates null entry */
    } char_set_designator_t;
typedef enum { ABSOLUTE, DISPLACED } origin_mode_t;
typedef struct
    {      /* save_buffer_t */
    character_position_t position;
    character_rendition_t rendition;
    origin_mode_t origin_mode;
    graphic_character_set_t left;
    graphic_character_set_t right;
    graphic_character_set_t g0;
    graphic_character_set_t g1;
    graphic_character_set_t g2;
    graphic_character_set_t g3;
    character_attribute_t attribute;
    } save_buffer_t;
typedef enum { EIGHTY, ONE_THIRTY_TWO } column_mode_t;
typedef enum { UNCOUPLED, COUPLED } cursor_coupling_mode_t;
typedef enum { FIXED, SETABLE } left_right_margins_mode_t;
typedef enum { STREAM, RECTANGULAR } area_extent_t;
typedef short int lines_per_page_t;    /* 24, 25, 36, 72, 144 */
typedef short int columns_per_page_t;  /* 80, 132 */
typedef short int number_of_pages_t;   /* 1, 2, 3, 4, 5, 6 */
/************ end of char_cell_types.h  ****************/




/**************  module char_cell_extern.h  *************/
/*
 * external storage declarations for character cell display state
 * PAS 28-Jul-1989
 */

#define MAX_NUM_LINES 73
#define MAX_NUM_COLUMNS 133
#define EMPTY_CHARACTER 0
#define MAX_NUM_CHAR_SETS 8
/* character set table entries */
#define TABLE_ASCII 0
#define TABLE_LINE_DRAWING 1
#define TABLE_DEC_SUPP 2
#define TABLE_NRCS 3
#define TABLE_LATIN1 4
#define TABLE_UPSS 5
#define TABLE_TCS 6
#define TABLE_DRCS 7
/* Note DRCS must be last in search order
   to replace others if identical */

ext character_t
<a id="5-17" data-page="5-17"></a>display[MAX_NUM_LINES][MAX_NUM_COLUMNS];
ext line_rendition_t       line_rendition[MAX_NUM_LINES];
ext character_position_t   active_position;
ext line_t                 top_margin;
ext line_t                 bottom_margin;
ext column_t               left_margin;    /* Horiz scroll ext */
ext column_t               right_margin;   /* Horiz scroll ext */
ext boolean_t              last_column_flag;
ext active_display_t       active_display; /* L3 or Status Dsply*/
ext status_display_t       status_display; /* L3 or Status Dsply*/
ext char_set_designator_t  char_set_table[MAX_NUM_CHAR_SETS];
ext save_buffer_t          cursor_save_buffer;
ext character_rendition_t  current_rendition;
ext character_attribute_t  current_attribute; /* Selective Erase*/
ext boolean_t              horizontal_tab_stops[MAX_NUM_COLUMNS];
ext column_mode_t          column_mode;      /* 132 Column Ext */
ext lines_per_page_t       lines_per_page;   /* Windowing */
ext columns_per_page_t     columns_per_page; /* Windowing */
ext number_of_pages_t      number_of_pages;  /* Windowing */
ext scrolling_mode_t       scrolling_mode;
ext screen_mode_t          screen_mode;
ext origin_mode_t          origin_mode;
ext auto_wrap_mode_t       auto_wrap_mode;
ext text_cursor_enable_mode_t  text_cursor_enable_mode;
ext insert_replace_mode_t  insert_replacement_mode;
ext new_line_mode_t        new_line_mode;
ext cursor_coupling_mode_t
        horizontal_cursor_coupling,      /* Windowing */
        vertical_cursor_coupling,        /* Windowing */
        page_cursor_coupling;            /* Windowing */
ext left_right_margins_mode_t
        left_right_margins_mode; /* Horiz Scroll */
ext area_extent_t
        attribute_change_extent; /* L4 or rect editing */
/********** end of char_cell_extern.h  *************/

/* function declarations */ short int end_of_line(); void
scroll_up(); void scroll_down(); void scroll_left(); void
scroll_right(); void insert_or_replace_character(); void
selective_erase_in_line(); void selective_erase_in_display();
</code></pre>
<section id="5.3.1">
<h3>5.3.1  Notes On Character Cell Display State</h3>
<ol type="a">
<li><p>An empty character is a character position in the Logical Display in which no character code appears, and thus no character is rendered in the visual display for this position.  In this implementation this is handled by a null entry in the logical display structure, which should be rendered as a space with normal rendition in the visual display.  In other implementations this may be <a id="5-18" data-page="5-18"></a>handled in a manner appropriate to the display list structure, but the affect on the visual display should be the same.</p>
<p>In an empty character position the character rendition, character attribute, and character set values should be ignored.</p></li>
<li><p>The number of character sets available depends on the conformance level and architecture extensions present.  See "Character Set Repertoire" in this chapter (DEC STD 70-5).</p></li>
</ol>
<p>See the "Terminal Management" Section (DEC STD 70-4) for a listing of all terminal state, and initialization procedures.</p>
</section>
</section>
<a id="5-19" data-page="5-19"></a>
<section id="5.4">
<h2>5.4  Display Coordinate System And Addressing</h2>
<section id="5.4.1">
<h3>5.4.1  Logical Display</h3>
<p>A conforming device shall provide the capability of storing and presenting single-width graphic characters in a rectangular array of lines and columns called a Logical Display Page.  The number of lines and columns shall define the size of the Logical Display Page, or Page Size.  The entire Logical Display may consist of a single page, or a number of pages of identical size.</p>
<p>All conforming devices shall support a single Logical Display Page of 24 lines by 80 columns, extendable to 24 lines by 132 columns when the "132 Column Mode" extension is present (DECCOLM, see "Page Size and Arrangement").</p>
<p>Level 4 devices, and Level 3 devices with the "Windowing Extension" shall support commands to change the Logical Display Page Size (DECSLPP and DECSCPP, see "Page Size and Arrangement").  The actual Page Sizes supported shall be clearly specified in the product documentation, and means shall be provided for software to interrogate the size of the Logical Display Page.  The Page Size and number of pages in the Logical Display may also be configurable by the user under local control.</p>
<p>Each character position in the Logical Display will consist of the following information:  a character code, a character rendition, character attributes, and a character set.</p>
<p>The first position in a logical display page shall be at line 1, column 1.  Frequently this will correspond to the upper left corner of the physical display with line numbers increasing downward, and column numbers increasing to the right, but this need not be true.</p>
<p>The graphic representation of each character on the physical display surface will occupy a rectangular cell whose lower left hand corner is at the logical screen coordinate corresponding to the position of the character in the the array.</p>
<a id="5-20" data-page="5-20"></a>
<figure>
<pre>   1              columns                80                   132
  +----------------------------------------+---------------------+
1 |                                        |                     |
  |______________________________________________________________|
  |1        single-width line            80                   132|
  |--------------------------------------------------------------|
  |                                        |                     |
  |______________________________________________________________|
  |1        double-width line            40                    66|
l |--------------------------------------------------------------|
i |                                        |                     |
n |______________________________________________________________|
e |1     double-height line / top        40                    66|
s |1     double-height line / bottom     40                    66|
  |--------------------------------------------------------------|
  |                                        |                     |
  |                                        |                     |
  |                                        |                     |
  |                                        |                     |
  |                                        |                     |
24|                                        |                     |
  +----------------------------------------+---------------------+
</pre>
<figcaption>Display Structure and Addressing</figcaption>
</figure>
</section>
<section id="5.4.2">
<h3>5.4.2  Active Position And Cursor</h3>
<p>A conforming device shall maintain the line and column coordinates of a single character position, known as the "Active Position", which serves as a reference point for character insertion and replacement as well as various control functions.  The Active Position indicates the character position at which the next operation is to begin.</p>
<p>The Active Position does not necessarily correspond to the visual indicator in the physical display known as the "Cursor Symbol".  However, in this specification the terms "Active Position" and "Cursor" are used interchangeably in order not to conflict with previous usage.</p>
<a id="5-21" data-page="5-21"></a>
<section id="DECTCEM">
<h4>Set/Reset Text Cursor Enable Mode <span>&mdash;</span> DECTCEM</h4>
<p><em>Levels:</em> 2-4</p>
<p><em>Purpose:</em> Select whether the text cursor symbol in the display has a visual representation.</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI ? 25 h</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI ? 25 l</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall provide a means of enabling or disabling the visible cursor symbol.  This mode shall apply only to the text cursor symbol implemented by the Character Cell Display service class.  In the set state (Text Cursor On), which is the default, the text cursor symbol will be displayed.  In the reset state (Text Cursor Off), the text cursor symbol will not be displayed.</p>
<p>When a request is received to turn off the cursor, it will be done immediately (if not already off).  If a request is received to enable the cursor, and the cursor is not already on, the cursor will remain off for a small "initial" cycle, after which it will become visible and begin its normal blinking cycle.  This makes the cursor blink with a steady duty cycle regardless of how fast it is turned on and off.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>There is some concern that a program might inadvertently leave the text cursor turned off.  It is suggested that entering SETUP mode will always turn on the text cursor while in SETUP mode, but that normally it be restored to its previous state upon exiting SETUP mode.  Also, a means should be provided in SETUP mode to force the text cursor to be re-enabled.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>text_cursor_enable_mode</code></li>
</ul>
<a id="5-22" data-page="5-22"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_text_cursor_enable_mode()
{
if (conformance_level >= LEVEL_2)
    text_cursor_enable_mode = TEXT_CURSOR_ON;
}


void reset_text_cursor_enable_mode()
{
if (conformance_level >= LEVEL_2)
    text_cursor_enable_mode = TEXT_CURSOR_OFF;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-23" data-page="5-23"></a>
<section id="5.4.3">
<h3>5.4.3  Margins And Scrolling</h3>
<p>A conforming device shall provide the capability of defining top and bottom margins of a scrolling region.  The top and bottom margins are two line numbers in a logical display page.  The top margin must always have a lower line number than the bottom margin.</p>
<p>Devices with the Horizontal Scrolling Extension shall provide the ability to define left and right margins of a scrolling region.  The left and right margins are two column numbers in a logical display page.  The left margin must always have a lower column number than the right margin.</p>
<p>Numerous editing and cursor control functions are defined relative to the scrolling margins.</p>
<p>The default scrolling region at power-up or after reset is equal to the size of the logical display page.</p>
<figure>
<pre>   1              columns                80                   132
  +----------------------------------------+---------------------+
1 |    +                          +        |                     |
  |    +left                      +right   |                     |
  |    +margin                    +margin  |                     |
  |    +                          +        |                     |
  |    +       top margin         +        |                     |
  |++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|
  |    +           /\             +        |                     |
  |    +           ||             +        |                     |
l |    +           ||             +        |                     |
i |    +                          +        |                     |
n |    +/------ scrolling -------\+        |                     |
e |    +\------  region   -------/+        |                     |
s |    +                          +        |                     |
  |    +           ||             +        |                     |
  |    +           ||             +        |                     |
  |    +           \/             +        |                     |
  |++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++|
  |    +      bottom margin       +        |                     |
24|    +                          +        |                     |
  +----------------------------------------+---------------------+
</pre>
<figcaption>Margins and Scrolling Region</figcaption>
</figure>
<p>A scrolling region is defined as the area bounded by the top, bottom, left, and right margins, which are set by DECSTBM and DECSLRM.  All scrolling, both vertical and horizontal, is limited to this area.</p>
<p>Several controls are ignored or behave differently if the active <a id="5-24" data-page="5-24"></a>position is outside certain boundaries of the scrolling region.  The following table lists these controls:</p>
<figure>
<pre>         margins
        T/B   L/R
     +------+------+
 DCH |   O     X   |     X = Is affected.
 ICH |   O     X   |         Does not work outside
     |             |         these margins.
 DL  |   X     X   |
 IL  |   X     X   |     O = Not affected.
     |             |         Continues to work outside
DECDC|   X     X   |         these margins.
DECIC|   X     X   |
     |             |     * = If active position is inside margins,
 IND |   *     O   |           affect is limited by margins.
 RI  |   *     O   |         If active position is outside margins
DECBI|   O     *   |           control still has an affect,
DECFI|   O     *   |           but no scrolling can occur.
     +------+------+</pre>
</figure>
<p>The following functions described in this subsection are used to control scrolling:</p>
<ul>
<li><a href="#DECSTBM">DECSTBM<span> &mdash; </span>Set Top and Bottom Margins</a></li>
<li><a href="#DECSLRM">DECSLRM<span> &mdash; </span>Set Left and Right Margins</a></li>
<li><a href="#DECLRMM">DECLRMM<span> &mdash; </span>Left Right Margin Mode</a></li>
<li><a href="#DECOM">DECOM<span> &mdash; </span>Origin Mode</a></li>
<li><a href="#DECSCLM">DECSCLM<span> &mdash; </span>Scrolling Mode</a></li>
<li><a href="#IND">IND<span> &mdash; </span>Index</a></li>
<li><a href="#RI">RI<span> &mdash; </span>Reverse Index</a></li>
<li><a href="#DECFI">DECFI<span> &mdash; </span>Forward Index</a></li>
<li><a href="#DECBI">DECBI<span> &mdash; </span>Back Index</a></li>
</ul>
<a id="5-25" data-page="5-25"></a>
<section id="DECSTBM">
<h4>Set Top And Bottom Margins <span>&mdash;</span> DECSTBM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Change the top and bottom margin settings for the scrolling region.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pt  ;  Pb  r      default Pt: 1
9/11  Pt  ;  Pb  7/2    default Pb: last line</samp></pre>
</div>
<p><em>Description:</em> The DECSTBM control sets the values of the Top and Bottom Margins of the scrolling region.  The new settings are determined by the parameter values.  The first parameter sets the value of the Top Margin, and the second parameter sets the value of the Bottom Margin.  The default settings if either or both parameters are omitted are the boundaries of the Logical Display Page:  one (1) for the Top Margin and twenty-four (24) for the Bottom Margin when the Page Size is 24 lines.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Execution of this control causes the Active Position to be set to the page origin obeying Origin Mode (DECOM): First column of first line if Origin Mode is in the reset (Absolute) state; Top and Left Margins if Origin Mode is in the set (Displaced) state.</p></li>
<li><p>If the value specified for the Top Margin is equal to or greater than the value specified for the Bottom Margin, this control will be ignored (not executed).</p></li>
<li><p>If the value specified for the Bottom Margin is greater than the number of lines in the Logical Display Page, this control will be ignored (not executed).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
<li><code>top_margin</code></li>
<li><code>bottom_margin</code></li>
</ul>
<a id="5-26" data-page="5-26"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_top_and_bottom_margins(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
/* use defaults for omitted parameters */
if (parv[0] == 0) parv[0] = 1;
if (parv[1] == 0) parv[1] = lines_per_page;

if ((parv[0] &lt; parv[1]) &amp;&amp; (parv[1] &lt;= lines_per_page))
  {
  top_margin = parv[0];
  bottom_margin = parv[1];
  if (origin_mode == ABSOLUTE)
    {
    active_position.line = 1;
    active_position.column = 1;
    }
  else
    {
    active_position.line = top_margin;
    active_position.column = left_margin;
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-27" data-page="5-27"></a>
<section id="DECSLRM">
<h4>Set Left And Right Margins <span>&mdash;</span> DECSLRM</h4>
<p><em>Levels:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Change the left and right margin settings for the scrolling region.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pl  ;  Pr s       default Pl: 1
9/11  Pl  ;  Pr 7/3     default Pr: Last Column</samp></pre>
</div>
<p><em>Description:</em> The DECSLRM control sets the values of the Left and Right Margins of the scrolling region.  The new settings are determined by the parameter values.  The first parameter sets the value of the Left Margin, and the second parameter sets the value of the Right Margin.  The default settings if either or both parameters are omitted are the boundaries of the Logical Display Page:  one (1) for the Left Margin and eighty (80) for the Right Margin when the Page Size is 80 columns wide.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Execution of this control causes the Active Position to be set to the page origin obeying Origin Mode (DECOM): First column of first line if Origin Mode is in the reset (Absolute) state; Top and Left Margins if Origin Mode is in the set (Displaced) state.</p></li>
<li><p>If the value specified for the Left Margin is equal to or greater than the value specified for the Right Margin, this control will be ignored (not executed).</p></li>
<li><p>If the value specified for the Right Margin is greater than the number of columns in the Logical Display Page, this control will be ignored (not executed).</p></li>
<li><p>This control function is only recognized when DECLRMM (Left Right Margin Mode) is set.</p></li>
<li><p>Setting the margins to other than their default values (the boundaries of the Logical Display Page) may disable smooth scrolling (DECSCLM).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
<li><code>left_margin</code></li>
<li><code>right_margin</code></li>
</ul>
<a id="5-28" data-page="5-28"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_left_and_right_margins(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) &amp;&amp;
     (level_4_extensions[HORIZONTAL_SCROLL] == TRUE) &amp;&amp;
     (left_right_margins_mode == SETABLE) )
  {
  /* use defaults for omitted parameters */
  if (parv[0] == 0) parv[0] = 1;
  if (parv[1] == 0) parv[1] = columns_per_page;

  if ((parv[0] &lt; parv[1]) &amp;&amp; (parv[1] &lt;= columns_per_page))
    {
    left_margin = parv[0];
    right_margin = parv[1];
    if (origin_mode == ABSOLUTE)
      {
      active_position.line = 1;
      active_position.column = 1;
      }
    else
      {
      active_position.line = top_margin;
      active_position.column = left_margin;
      }
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-29" data-page="5-29"></a>
<section id="DECLRMM">
<h4>Set/Reset Left Right Margin Mode <span>&mdash;</span> DECLRMM</h4>
<p><em>Levels:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Change the state of Left Right Margin Mode between Not Available (reset) and Available (set).</p>
<div>
<p><em>To set:</em></p>
<pre><samp>CSI ? 69 h    (Available)</samp></pre>
<p><em>To reset:</em></p>
<pre><samp>CSI ? 69 l    (Not Available - default)</samp></pre>
</div>
<p><em>Description:</em> DECLRMM is a parameter to the Set Mode and Reset Mode commands.  In the reset state, the left and right scrolling margins in every page may not be moved through the DECSLRM command, they are set to be at the extremes of the page.  In the set state, DECSLRM commands are recognized, however, no line attributes other than Single Wide may be used.</p>
<p>When DECLRMM is set, all line attributes currently in Page Memory for the Session will be reset to Single Wide, Single High, and DECDWL and DECDHL escape sequences, to change the line attribute to Double Wide or Double Wide and High, will be ignored.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>left_right_margins_mode</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>left_margin</code></li>
<li><code>right_margin</code></li>
</ul>
<a id="5-30" data-page="5-30"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_left_right_margins_mode()
{
int i;
if ( (conformance_level == LEVEL_4) &amp;&amp;
     (level_4_extensions[HORIZONTAL_SCROLL] == TRUE) )
  {
  for (i=0; i&lt;MAX_NUM_LINES; i++)
    {
    line_rendition[i] = SINGLE_WIDTH;
    }
  left_right_margins_mode = SETABLE;
  }
}


void reset_left_right_margins_mode()
{
if ( (conformance_level == LEVEL_4) &amp;&amp;
     (level_4_extensions[HORIZONTAL_SCROLL] == TRUE) )
  {
  left_margin = 1;
  right_margin = columns_per_page;
  left_right_margins_mode = FIXED;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-31" data-page="5-31"></a>
<section id="DECOM">
<h4>Set/Reset Origin Mode <span>&mdash;</span> DECOM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Change the state of Origin Mode between Absolute (reset) and Displaced (set) origin.</p>
<div>
<p><em>To Set:</em></p>
<pre><samp>CSI ? 6 h    (displaced)</samp></pre>
<p><em>To Reset:</em></p>
<pre><samp>CSI ? 6 l    (absolute - default)</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall allow addressing of the display area to be performed relative to either the display origin (coordinate 1,1) [reset state = absolute] or the origin of the current scrolling region (Top Margin, Left Margin) [set state = displaced].  When Origin Mode is in the set state (displaced), the Active Position cannot be moved above the Top Margin or left of the Left Margin of the scrolling region.</p>
<p>The DECOM controls are used the change the state of Origin Mode between Absolute and Displaced.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>origin_mode</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_origin_mode()
{
origin_mode = DISPLACED;
active_position.line = top_margin;
active_position.column = left_margin;
}


void reset_origin_mode()
{
origin_mode = ABSOLUTE;
active_position.line = 1;
active_position.column = 1;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-32" data-page="5-32"></a>
<section id="DECSCLM">
<h4>Set/Reset Scrolling Mode <span>&mdash;</span> DECSCLM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Change the state of Scrolling Mode between Jump (reset) and Slow (set) scrolling.</p>
<div>
<p><em>To Set:</em></p>
<pre><samp>CSI ? 4 h    (smooth - default)</samp></pre>
<p><em>To Reset:</em></p>
<pre><samp>CSI ? 4 l    (jump)</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall provide the capability of selecting either jump scrolling [reset state = jump] and slow scrolling [set state = slow].  Jump scrolling is defined as scrolling of the display as fast as the device permits, to a maximum which will be implementation defined.  Slow scrolling is defined as scrolling of the display at a rate of approximately 6 text lines per second.  The intention of slow scrolling is to move text through the display at a rate which makes it "recognizable", but not necessarily readable.  (i.e., it is not guaranteed that it will appear slowly enough for the user to scan read the entire text).  The scrolling speed applies to vertical scrolling of the scrolling region of the display, which can be set as any combination of adjacent lines.</p>
<p>The DECSCLM controls are used to change the state of Scrolling Mode between Jump (reset state) and Slow (set scrolling.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Some implementations may offer a choice of additional scrolling speeds in Set-Up.  The reset state of DECSCLM will select the speed closest to 6 lines per second.</p></li>
<li><p>Setting the left or right margins to other than their default values (the boundaries of the Logical Display Page) may temporarily disable smooth scrolling (guideline), but will not affect the state of Scrolling Mode.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>scrolling_mode</code></li>
</ul>
<a id="5-33" data-page="5-33"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_scrolling_mode()
{
scrolling_mode = SLOW;
}


void reset_scrolling_mode()
{
scrolling_mode = JUMP;
}
</code></pre>
<p><em>Known Deviations:</em> Workstation terminal emulators which do not have scrolling hardware do not implement this control (DECterm, UIS).</p>
</section>
<a id="5-34" data-page="5-34"></a>
<section id="IND">
<h4>Index <span>&mdash;</span> IND</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position downward one line, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>IND
8/4     (ESC D)</samp></pre>
</div>
<p><em>Description:</em> The IND control moves the Active Position downward in the display by one line.  If the Active Position is already at the Bottom Margin the display will scroll upward by one line.  If the display scrolls, a blank line with all attributes off will appear at the bottom margin.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is above the Bottom Margin when this control is executed, the Active Position will not move beyond the Bottom Margin.  If the Active Position is below the Bottom Margin (as the result of absolute cursor positioning) it will still move downward by one line and no scrolling will occur.  In this case, the Active Position will not move beyond the bottom line of the display.</p></li>
<li><p>This control is identical to the Line Feed (LF) control, except that it is not affected by the setting of New Line Mode.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void index()
{
if (active_position.line == bottom_margin)
  scroll_up(top_margin, 1);
else
  if (active_position.line &lt; lines_per_page)
    active_position.line += 1;

/* new line may have a different length - adjust column */
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
}
</code></pre>
<a id="5-35" data-page="5-35"></a>
<p><em>Known Deviations:</em></p>
<p>On the VT100 and VT125, Index is affected by the setting of New Line Mode, in the same manner as Line Feed.</p>
</section>
<a id="5-36" data-page="5-36"></a>
<section id="RI">
<h4>Reverse Index <span>&mdash;</span> RI</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position upward one line, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>RI
8/13    (ESC M)</samp></pre>
</div>
<p><em>Description:</em> The RI control moves the Active Position upward in the display by one line.  If the Active Position is already at the Top Margin the display will scroll downward by one line.  If the display scrolls, a blank line with all attributes off will appear at the top margin.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is below the Top Margin when this control is executed, the Active Position will not move beyond the Top Margin.  If the Active Position is above the Top Margin (as the result of absolute cursor positioning) it will still move upward by one line and no scrolling will occur.  In this case, the Active Position will not move beyond the first line of the display.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void reverse_index()
{
if (active_position.line == top_margin)
  scroll_down(top_margin, 1);
else
  if (active_position.line > 1)
    active_position.line -= 1;

/* new line may have a different length - adjust column */
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-37" data-page="5-37"></a>
<section id="DECFI">
<h4>Forward Index <span>&mdash;</span> DECFI</h4>
<p><em>Levels:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Move the Active Position forward one column, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC   9
1/11  3/9</samp></pre>
</div>
<p><em>Description:</em> The DECFI control causes the active position to move forward one column.  If the active position was already at the right margin, the contents of the Logical Display Page within the right, left, top and bottom margins shifts left one column.  The column shifting beyond the left margin is deleted.  A new column is inserted at the right margin with all attributes turned off and the cursor appears in this column.</p>
<p>If the active position is outside the left or right margin when the command is received the active position moves forward one column.  If the active position was at the right edge of the page, the command is ignored.</p>
<p><em>Notes on DECFI:</em></p>
<ol>
<li><p>Lines of text are shifted one column regardless of their line attributes.  This means double-wide and double-size lines will appear to shift twice as fast as single-width lines.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<a id="5-38" data-page="5-38"></a>
<p><em>Algorithm:</em></p>
<pre><code>void decfi()
{
if ( (conformance_level == LEVEL_4) &amp;&amp;
     (level_4_extensions[HORIZONTAL_SCROLL] == TRUE) )
  {
  if (active_position.column == right_margin)
    scroll_left(left_margin, 1);
  else
    if (active_position.column &lt; columns_per_page)
      active_position.column += 1;

  /* active line may not be columns_per_page long */
  if (active_position.column > end_of_line(active_position.line))
    active_position.column = end_of_line(active_position.line);
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-39" data-page="5-39"></a>
<section id="DECBI">
<h4>Back Index <span>&mdash;</span> DECBI</h4>
<p><em>Levels:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Move the Active Position backward one column, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC   6
1/11  3/6</samp></pre>
</div>
<p><em>Description:</em> The DECBI control causes the active position to move backward one column.  If the active position was already at the left margin, the contents of the Logical Display within the left, right, top and bottom margin shifts right one column.  The column shifted beyond the right margin is deleted.  A new column is inserted at the left margin with all attributes turned off and the cursor appears in this column.</p>
<p>If the active position is outside the left or right margin when the command is received the active position moves backwards one column.  If the active position was at the left edge of the page, the command is ignored.</p>
<p><em>Notes on DECBI:</em></p>
<ol>
<li><p>Lines of text are shifted one column regardless of their line attributes.  This means double-wide and double-size lines will appear to shift twice as fast as single-width lines.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void decbi()
{
if ( (conformance_level == LEVEL_4) &amp;&amp;
     (level_4_extensions[HORIZONTAL_SCROLL] == TRUE) )
  {
  if (active_position.column == left_margin)
    scroll_right(left_margin, 1);
  else
    if (active_position.column > 1)
      active_position.column -= 1;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-40" data-page="5-40"></a>
<section id="5.4.4">
<h3>5.4.4  Cursor Movement</h3>
<p>This section describes the following functions used to control the cursor position within the Logical Display Page:</p>
<ul>
<li><a href="#CUU">CUU<span> &mdash; </span>Cursor Up</a></li>
<li><a href="#CUD">CUD<span> &mdash; </span>Cursor Down</a></li>
<li><a href="#CUF">CUF<span> &mdash; </span>Cursor Forward</a></li>
<li><a href="#CUB">CUB<span> &mdash; </span>Cursor Backward</a></li>
<li><a href="#CUP">CUP<span> &mdash; </span>Cursor Position</a></li>
<li><a href="#HVP">HVP<span> &mdash; </span>Horizontal/Vertical Position</a></li>
<li><a href="#CPR">CPR<span> &mdash; </span>Cursor Position Report</a></li>
<li><a href="#DECXCPR">DECXCPR<span> &mdash; </span>Extended Cursor Report</a></li>
<li><a href="#LNM">LNM<span> &mdash; </span>Line Feed/New Line Mode</a></li>
<li><a href="#CR">CR<span> &mdash; </span>Carriage Return</a></li>
<li><a href="#LF">LF<span> &mdash; </span>Line Feed</a></li>
<li><a href="#VT">VT<span> &mdash; </span>Vertical Tab</a></li>
<li><a href="#FF">FF<span> &mdash; </span>Form Feed</a></li>
<li><a href="#BS">BS<span> &mdash; </span>Backspace</a></li>
<li><a href="#NEL">NEL<span> &mdash; </span>Next Line</a></li>
</ul>
<a id="5-41" data-page="5-41"></a>
<section id="CUU">
<h4>Cursor Up <span>&mdash;</span> CUU</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position upward by n lines.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      A               default Pn: 1
9/11    3/?     4/1</samp></pre>
</div>
<p><em>Description:</em> The CUU control moves the Active Position upward in the display.  The distance moved is determined by the parameter value.  A parameter value of zero or one moves the Active Position upward by one line.  A parameter value of n moves the Active Position upward by n lines.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is at or below the Top Margin when the CUU control is executed, and an attempt is made to move the Active Position above the Top Margin, the control will be executed until the Active Position reaches the Top Margin.  The Active Position will not move beyond the Top Margin.</p></li>
<li><p>If the Active Line is above the Top Margin when the CUU control is executed (due to absolute cursor positioning) and an attempt is made to move the Active Position outside of the addressable display, the control will be executed until the Active Position reaches the first line of the Page.  The Active Position will not move beyond the first line of the Page.</p></li>
<li><p>No scrolling will occur as a result of this control.</p></li>
<li><p>If the line to which the Active Position is moved contains fewer columns than the Active Column, the Active Column is set to the end of that line.  (This condition will only occur if the Active Line is a single-width line, and the line to which the Active Position is moved is a double-width or double-height line.  The Active Column is not affected by the length of lines it moves over by a repeat move caused by a parameter value greater than one.)</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-42" data-page="5-42"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_up(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
if (parv[0] == 0) n = 1;
else n = parv[0];
if (active_position.line >= top_margin)
  {
  if ((active_position.line - n) >= top_margin)
    active_position.line -= n;
  else
    active_position.line = top_margin;
  }
else
  {
  if ((active_position.line - n) >= 1)
    active_position.line -= n;
  else
    active_position.line = 1;
  }

/* new line may have a different length - adjust column */
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-43" data-page="5-43"></a>
<section id="CUD">
<h4>Cursor Down <span>&mdash;</span> CUD</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position downward by n lines.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      B               default Pn: 1
9/11    3/?     4/2</samp></pre>
</div>
<p><em>Description:</em> The CUD control moves the Active Position downward in the display.  The distance moved is determined by the parameter value.  A parameter value of zero or one moves the Active Position downward by one line.  A parameter value of n moves the Active Position downward by n lines.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is at or above the Bottom Margin when the CUD control is executed, and an attempt is made to move the Active Position below the Bottom Margin, the control will be executed until the Active Position reaches the Bottom Margin.  The Active Position will not move beyond the Bottom Margin.</p></li>
<li><p>If the Active Position is below the Bottom Margin when the CUD control is executed (due to absolute cursor positioning) and an attempt is made to move the Active Position outside of the addressable display, the control will be executed until the Active Position reaches the bottom line of the Page.  The Active Position will not move beyond the bottom line of the Page.</p></li>
<li><p>No scrolling will occur as a result of this control.</p></li>
<li><p>If the line to which the Active Position is moved contains fewer columns than the Active Column, the Active Column is set to the end of that line.  (This condition will only occur if the Active Line is a single-width line, and the line to which the Active Position is moved is a double-width or double-height line.  The Active Column is not affected by the length of lines it moves over by a repeat move caused by a parameter value greater than one.)</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-44" data-page="5-44"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_down(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
if (parv[0] == 0) n = 1;
else n = parv[0];
if (active_position.line &lt;= bottom_margin)
  {
  if ((active_position.line + n) &lt;= bottom_margin)
    active_position.line += n;
  else
    active_position.line = bottom_margin;
  }
else
  {
  if ((active_position.line + n) &lt;= lines_per_page)
    active_position.line += n;
  else
    active_position.line = lines_per_page;
  }

/* new line may have a different length - adjust column */
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-45" data-page="5-45"></a>
<section id="CUF">
<h4>Cursor Forward <span>&mdash;</span> CUF</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position forward by n columns.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      C               default Pn: 1
9/11    3/?     4/3</samp></pre>
</div>
<p><em>Description:</em> The CUF control moves the Active Position forward in the display.  The distance moved is determined by the parameter value.  A parameter value of zero or one moves the Active Position forward by one column.  A parameter value of n moves the Active Position forward by n columns.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is at or inside the Right Margin when the CUF control is executed, and an attempt is made to move the Active Position beyond the Right Margin, the control will be executed until the Active Position reaches the Right Margin.  The Active Position will not move beyond the Right Margin.</p></li>
<li><p>If the Active Position is beyond the Right Margin when the CUF control is executed (due to absolute cursor positioning) and an attempt is made to move the Active Position outside of the addressable display, the control will be executed until the Active Position reaches the last column of the Active Line.  The Active Position will not move beyond the last column of the Active Line.</p></li>
<li><p>No scrolling will occur as a result of this control.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-46" data-page="5-46"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_forward(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
if (parv[0] == 0) n = 1;
else n = parv[0];
if (active_position.column &lt;= right_margin)
  {
  if ((active_position.column + n) &lt;= right_margin)
    active_position.column += n;
  else
    active_position.column = right_margin;
  }
else
  {
  if ( (active_position.column + n) &lt;=
       end_of_line(active_position.line) )
    active_position.column += n;
  else
    active_position.column = end_of_line(active_position.line);
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-47" data-page="5-47"></a>
<section id="CUB">
<h4>Cursor Backward <span>&mdash;</span> CUB</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position backward by n columns.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      D               default Pn: 1
9/11    3/?     4/4</samp></pre>
</div>
<p><em>Description:</em> The CUB control moves the Active Position backward in the display.  The distance moved is determined oy the parameter value.  A parameter value of zero or one moves the Active Position backward by one one column.  A parameter value of n moves the Active Position backward by n columns.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is at or inside the Left Margin when the CUB control is executed, and an attempt is made to move the Active Position beyond the Left Margin, the control will be executed until the Active Position reaches the Left Margin.  The Active Position will not move beyond the Left Margin.</p></li>
<li><p>If the Active Position is beyond the Left Margin when the CUB control is executed (due to absolute cursor positioning) and an attempt is made to move the Active Position outside of the addressable display, the control will be executed until the Active Position reaches the first column of the Active Line.  The Active Position will not move beyond the first column of the Active Line.</p></li>
<li><p>No scrolling will occur as a result of this control.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-48" data-page="5-48"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_backward(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
if (parv[0] == 0) n = 1;
else n = parv[0];
if (active_position.column >= left_margin)
  {
  if ((active_position.column - n) >= left_margin)
    active_position.column -= n;
  else
    active_position.column = left_margin;
  }
else
  {
  if ((active_position.column - n) >= 1)
    active_position.column -= n;
  else
    active_position.column = 1;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-49" data-page="5-49"></a>
<section id="CUP">
<h4>Cursor Position <span>&mdash;</span> CUP</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> To position the Active Position at an absolute line and column address.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pl  ;  Pc   H     default Pl: 1
9/11  3/? ;  3/?  4/8   default Pc: 1</samp></pre>
</div>
<p><em>Description:</em> The CUP control moves the Active Position to an absolute line and column address as specified by the parameter values.  The first parameter specifies the new line address, and the second parameter specifies the new column address.  If either parameter is omitted, or is explicitly set to zero (0), that parameter value will default to one (1).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>This control is affected by the setting of Origin Mode.  If Origin Mode is reset, addressing is performed relative to the page origin (first column in the first line).  If Origin Mode is set, addressing is performed relative to the origin of the current scrolling region (the top and left margin).</p></li>
<li><p>If an attempt is made to move the Active Position outside of the addressable display area (the entire screen if Origin Mode is reset, or the scrolling region if Origin Mode is set), the Active Position will be moved in the direction indicated to the boundary of the addressable area, but will not be moved beyond the boundary of the addressable area.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-50" data-page="5-50"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_position(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  line_t y;
  column_t x;
y = parv[0];
x = parv[1];
if (y == 0) y = 1;
if (x == 0) x = 1;
if (origin_mode == DISPLACED)
  {
  if ( ((top_margin-1) + y) &lt;= bottom_margin )
    active_position.line = (top_margin-1) + y;
  else
    active_position.line = bottom_margin;

  if ( ((left_margin-1) + x) &lt;= right_margin )
    active_position.column = (left_margin-1) + x;
  else
    active_position.column = right_margin;
  }
else
  {
  if (y &lt;= lines_per_page)
    active_position.line = y;
  else
    active_position.line = lines_per_page;

  if (x &lt;= end_of_line(active_position.line))
    active_position.column = x;
  else
    active_position.column = end_of_line(active_position.line);
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-51" data-page="5-51"></a>
<section id="HVP">
<h4>Horizontal/Vertical Position <span>&mdash;</span> HVP</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position to an absolute line and column address.  (fallback implementation)</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pl  ;  Pc  f      default Pl: 1
9/11  Pl  ;  Pc  6/6    default Pc: 1</samp></pre>
</div>
<p><em>Description:</em> The HVP control moves the Active Position to an absolute line and column address as specified by the parameter values.  The first parameter specifies the new line address, and the second parameter specifies the new column address.  If either parameter is omitted, or is explicitly set to zero (0), that parameter value will default to one (1).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The HVP control is provided for interface compatibility with printing terminals.  This implementation is not in conformance with existing standards.  Conforming software will use the Cursor Position control to affect movement of the cursor, since the operation of Horizontal/Vertical Position may be redefined in future levels of the architecture.</p></li>
<li><p>This control is affected by the setting of Origin Mode.  If Origin Mode is reset, addressing is performed relative to the page origin (first column in the first line).  If Origin Mode is set, addressing is performed relative to the origin of the current scrolling region (the top and left margin).</p></li>
<li><p>If an attempt is made to move the Active Position outside of the addressable display area (the entire screen if Origin Mode is reset, or the scrolling region if Origin Mode is set), the Active Position will be moved in the direction indicated to the boundary of the addressable area, but will not be moved beyond the boundary of the addressable area.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-52" data-page="5-52"></a>
<p><em>Algorithm:</em></p>
<pre><code>void horizontal_vertical_position(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  /* steal code from CUP */
  cursor_position(parv);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-53" data-page="5-53"></a>
<section id="CPR">
<h4>Cursor Position Report <span>&mdash;</span> CPR</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Report the line and column address of the Active Position.</p>
<div>
<p><em>Request Format:</em></p>
<pre><samp>CSI   6    n
9/11  3/6  6/14</samp></pre>
<p><em>Report Format:</em></p>
<pre><samp>CSI   Pl   ;  Pc   R            default Pl: 1
9/11  3/?  ;  3/?  5/2          default Pc: 1</samp></pre>
</div>
<p><em>Description:</em> The CPR control is transmitted by the terminal in response to a specific Device Status Report (DSR) control.  The parameter values indicate the Active Line and Active Column values at the time the DSR control is received by the terminal.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>This control is affected by the setting of Origin Mode.  If Origin Mode is reset, addressing is performed relative to the page origin (first column in the first line).  If Origin Mode is set, addressing is performed relative to the origin of the current scrolling region (the Top and Left Margin).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li>none</li>
</ul>
<a id="5-54" data-page="5-54"></a>
<p><em>Algorithm:</em></p>
<pre><code>void cursor_position_report()
{
  line_t y;
  column_t x;
if (origin_mode == DISPLACED)
  {
  y = active_position.line - top_margin + 1;
  x = active_position.column - left_margin + 1;
  }
else
  {
  y = active_position.line;
  x = active_position.column;
  }
send_char(0x9B, host_port);  /* CSI */
send_int(y, host_port);
send_char(';', host_port);
send_int(x, host_port);
send_char('R', host_port);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-55" data-page="5-55"></a>
<section id="DECXCPR">
<h4>Extended Cursor Position Report <span>&mdash;</span> DECXCPR</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> Report the line, column, and page address of the Active Position.</p>
<div>
<p><em>Request Format:</em></p>
<pre><samp>CSI   ?     6    n
9/11  3/15  3/6  6/14</samp></pre>
<p><em>Report Format:</em></p>
<pre><samp>CSI   ?     Pl   ;     Pc   ;     Pp   R
9/11  3/15  3/?  3/11  3/?  3/11  3/?  5/2

default Pl, Pc, Pp: 1</samp></pre>
</div>
<p><em>Description:</em> The DECXCPR control is transmitted by the terminal in response to a specific Device Status Report (DSR) control.  The parameter values indicate the Active Line, Column, and Page values at the time the DSR control is received by the terminal.  The default condition with no parameters present, or parameters of 0, is equivalent to a cursor at the home position on the first Page.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>This control is affected by the setting of Origin Mode.  If Origin Mode is reset, addressing is performed relative to the page origin (first column in the first line).  If Origin Mode is set, addressing is performed relative to the origin of the current scrolling region (the Top and Left Margin).</p></li>
</ol>
<p><em>State Affected:</em> None</p>
<a id="5-56" data-page="5-56"></a>
<p><em>Algorithm:</em></p>
<pre><code>void x_cursor_position_report()
{
  line_t y;
  column_t x;
if (origin_mode == DISPLACED)
  {
  y = active_position.line - top_margin + 1;
  x = active_position.column - left_margin + 1;
  }
else
  {
  y = active_position.line;
  x = active_position.column;
  }
send_char(0x9B, host_port);  /* CSI */
send_char('?', host_port);
send_int ( y , host_port);
send_char(';', host_port);
send_int ( x,  host_port);
send_char(';', host_port);
send_char(active_position.page, host_port);
send_char('R', host_port);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-57" data-page="5-57"></a>
<section id="LNM">
<h4>Set/Reset New Line Mode <span>&mdash;</span> LNM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Change the state of New Line Mode between New Line Off (reset) and New Line On (set).</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI 20 h</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI 20 l</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall provide a means of selecting whether a received Line Feed (LF), Vertical Tab (VT), or Form Feed (FF) character shall be treated as a single instance of that character [reset state = no_new_line], or that each of these characters is handled on receipt by additionally returning the Active Position to the first column of the display [set state = new_line].  It should be noted that setting of this mode also affects the processing of the Carriage Return (CR) key, which transmits a two-code sequence (CR LF) when New Line Mode is in the set state.</p>
<p>(Note:  This mode should not be used in the set state by conforming software.)</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>new_line_mode</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_new_line_mode()
{
new_line_mode = NEW_LINE_ON;
}


void reset_new_line_mode()
{
new_line_mode = NEW_LINE_OFF;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-58" data-page="5-58"></a>
<section id="CR">
<h4>Carriage Return <span>&mdash;</span> CR</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position to the Left Margin.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CR
0/13</samp></pre>
</div>
<p><em>Description:</em> The CR control moves the Active Position to the Left Margin.  If the Active Position is before the left margin, or outside the top and bottom margins, the cursor moves to the first column of the Active Line.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void_carriage_return()
{
if ((active_position.column >= left_margin) &amp;&amp;
    (active_position.line >= top_margin) &amp;&amp;
    (active_position.line &lt;= bottom_margin))
  active_position.column = left_margin;
else
  active_position.column = 1;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-59" data-page="5-59"></a>
<section id="LF">
<h4>Line Feed <span>&mdash;</span> LF</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position downward one line, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>LF
0/10</samp></pre>
</div>
<p><em>Description:</em> The LF control moves the Active Position downward in the display by one line.  If the Active Position is already at the Bottom Margin the display will scroll upward by one line.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is above the Bottom Margin when this control is executed, the Active Position will not move beyond the Bottom Margin.</p></li>
<li><p>If the Active Position is below the Bottom Margin when this control is executed (as the result of absolute cursor positioning) it will still move downward by one line and no scrolling will occur.  In this case, the Active Position will not move beyond the bottom line of the display.</p></li>
<li><p>If the line to which the Active Position is moved contains fewer columns than the Active Column, the Active Column is set to the end of that line.</p></li>
<li><p>This control is affected by the setting of New Line Mode.  If this mode is reset, no change will occur in the Active Column unless the line below the Active Line is shorter than the Active Line (see note 2).  If the mode is set, the control causes the Active Column to be set to the first column of the line into which the Active Position is moved.  Conforming software is recommended to use the two character sequence (CR LF) rather than New Line mode for widest compatibility.</p></li>
<li><p>Note that the fundamental differences between this control and the CUD control are the effect of New Line Mode and the occurrence of scrolling on reaching the Bottom Margin.</p></li>
<li><p>The LF control is identical in function to the IND (Index) control when New Line Mode is in the reset (No New Line) state.</p></li>
</ol>
<a id="5-60" data-page="5-60"></a>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void line_feed()
{
if (new_line_mode == NEW_LINE_ON) carriage_return();
if (active_position.line == bottom_margin)
  scroll_up(top_margin, 1);
else
  if (active_position.line &lt; lines_per_page)
    active_position.line += 1;

/* new line may have different length - adjust column */
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-61" data-page="5-61"></a>
<section id="VT">
<h4>Vertical Tab <span>&mdash;</span> VT</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position downward one line, scrolling if necessary.  (fallback implementation)</p>
<div>
<p><em>Format:</em></p>
<pre><samp>VT
0/11</samp></pre>
</div>
<p><em>Description:</em> The VT control moves the Active Position downward in the display by one line.  If the Active Position is already at the Bottom Margin the display will scroll upward by one line.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The implementation of the VT control is a fallback mechanism for display terminals which is intended to provide compatibility with printers which correctly implement this function.</p></li>
<li><p>This control is identical in function to the Line Feed (LF) control.  It is provided for software compatibility with printer output.  It should be noted, however, that printers will implement this function differently.  It is therefore recommended that software use the Line Feed control to perform this function instead of Vertical Tab.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void vertical_tab()
{
line_feed();    /* fallback implementation */
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-62" data-page="5-62"></a>
<section id="FF">
<h4>Form Feed <span>&mdash;</span> FF</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position downward one line, scrolling if necessary.  (fallback implementation)</p>
<div>
<p><em>Format:</em></p>
<pre><samp>FF
0/12</samp></pre>
</div>
<p><em>Description:</em> The FF control moves the Active Position downward in the display by one line.  If the Active Position is already at the Bottom Margin the display will scroll upward by one line.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The implementation of the FF control is a fallback mechanism for display terminals which is intended to provide compatibility with printers which correctly implement this function.</p></li>
<li><p>This control is identical in function to the Line Feed (LF) control.  It is provided for software compatibility with printer output.  It should be noted, however, that printers will implement this function differently.  It is therefore recommended that software use the Line Feed control to perform this function instead of Form Feed.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void form_feed()
{
line_feed();    /* fallback implementation */
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-63" data-page="5-63"></a>
<section id="BS">
<h4>Back Space <span>&mdash;</span> BS</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position one column to the left.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>BS
0/8</samp></pre>
</div>
<p><em>Description:</em> The BS control moves the Active Position backward in the display by one column.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If the Active Position is at or inside the Left Margin and within the Scroll Area, it will not move beyond the Left Margin.</p></li>
<li><p>If the Active Position is already before the Left Margin, the Active Position will move left one column unless it is at the first column of the Active Line.  The Active Position will not move beyond the beginning of the Active Line.</p></li>
<li><p>The BS control is not affected in any way by the setting of Auto Wrap Mode.  Under no circumstances does the Active Position advance to the previous line on reaching the beginning of the Active Line.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void back_space()
{
if (active_position.column > left_margin)
  active_position.column -= 1;
else
  {
  if ( ((active_position.column != left_margin) ||
        (active_position.line &lt; top_margin) ||
        (active_position.line > bottom_margin)) &amp;&amp;
       (active_position.column > 1)  )
    active_position.column -= 1;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-64" data-page="5-64"></a>
<section id="NEL">
<h4>Next Line <span>&mdash;</span> NEL</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Move the Active Position to the Left Margin of the next line, scrolling if necessary.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>NEL
8/5     (ESC E)</samp></pre>
</div>
<p><em>Description:</em> The NEL control moves the Active Position to the Left Margin of the next line.  If the Active Line is equal to the Bottom Margin, the Active Line is not incremented, but instead the display scrolls upward by one line.  If the Active Position is before the left margin, or outside the top and bottom margins, it will move to the first column of the next line, but not beyond the last line on the page.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>This control is identical to sending Line Feed (LF) with Line Feed New Line Mode set.  It is also identical to sending Carriage Return (CR) followed by Line Feed (LF).  Software is recommended to always use the combination of Carriage Return followed by Line Feed (CR LF) to achieve this effect for widest compatibility.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void next_line()
{
carriage_return();
line_feed();
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-65" data-page="5-65"></a>
<section id="5.4.5">
<h3>5.4.5  Horizontal Tabulation</h3>
<p>A conforming device shall provide the ability to set a horizontal tabulation stop at each display column.  These boolean indicators must be capable of being set or reset in any possible combination.  It should be noted that only tab stops are stored by the device, not tab characters.</p>
<p>Setting of horizontal tab stops may be performed both as a remote and local function, and therefore the settings at any point in time is indeterminate.  However, when no local provision is made for the setting and/or storage of user defined tabulation stops, the following default states shall be used by conforming devices.  These settings should also apply to the factory default settings for a conforming device.</p>
<pre><code>tab stops =

columns 9,17,25,33,41,49,57,65,73,81,89,97,105,113,121,129
</code></pre>
<a id="5-66" data-page="5-66"></a>
<section id="TBC">
<h4>Tabulation Clear <span>&mdash;</span> TBC</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Clear Horizontal Tab Stops.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Ps      g               default Ps: 0
9/11    3/?     6/7</samp></pre>
</div>
<p><em>Description:</em> The TBC control provides a means of clearing or removing previously set Horizontal Tab Stops.  The range of positions affected by this control is determined by the parameter value.  An omitted parameter or a parameter value of zero (0) cause the control to clear only a tabulation stop set at the Active Column.  A parameter value of three (3) causes the control to clear all Horizontal Tab Stops in the display.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>horizontal_tab_stops[MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void tabulation_clear(parc, parv)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
{
  column_t x;
  short int n;
if (parc == 0) parc = 1;
for (n=0; n&lt;parc; n++)
  {
  if (parv[n] == 0)
    horizontal_tab_stops[active_position.column] = FALSE;
  else if (parv[n] == 3)
    for (x=1; x&lt;= columns_per_page; x++)
      horizontal_tab_stops[x] = FALSE;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-67" data-page="5-67"></a>
<section id="HT">
<h4>Horizontal Tab <span>&mdash;</span> HT</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Advance the Active Position to the next Horizontal Tab Stop.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>HT
0/9</samp></pre>
</div>
<p><em>Description:</em> The HT control moves the Active Position forward in the display to the next Horizontal Tab Stop in the Active Line.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>If no tabulation stop is reached before the Right Margin of the Active Line (within the Scroll Area), the Active Position will be set to the Right Margin of the Active Line.  If the Active Column is beyond the Right Margin or the Active Line is outside the Scroll Area (due to absolute cursor positioning), the Active Position will move to the next tab stop, or last column of the Active Line, whichever comes first.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>active position</code></li>
</ul>
<a id="5-68" data-page="5-68"></a>
<p><em>Algorithm:</em></p>
<pre><code>void horizontal_tab()
{
 boolean_t outside;
if ((active_position.line > top_margin) &amp;&amp;
    (active_position.line &lt; bottom_margin))
  outside = FALSE;
else
  outside = TRUE;
if ( (active_position.column &lt;
      end_of_line(active_position.line)) &amp;&amp;
     ((active_position.column != right_margin) || (outside==TRUE))
)
  active_position.column += 1;

for (; ( (active_position.column &lt;
          end_of_line(active_position.line)) &amp;&amp;
         (horizontal_tab_stops[active_position.column] != TRUE) &amp;&amp;
         ((active_position.column != right_margin) ||
(outside==TRUE)) );
       active_position.column += 1);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-69" data-page="5-69"></a>
<section id="HTS">
<h4>Horizontal Tabulation Set <span>&mdash;</span> HTS</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Set a Horizontal Tab Stop at the Active Column.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>HTS

8/8     (ESC H)</samp></pre>
</div>
<p><em>Description:</em> The HTS control causes a Horizontal Tab Stop to be set at the column position indicated by the value of the Active Column at the time this control is received.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>None of the other Horizontal Tab Stop settings are affected by execution of this control.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>horizontal_tab_stops[MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void horizontal_tabulation_set()
{
horizontal_tab_stops[active_position.column] = TRUE;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-70" data-page="5-70"></a>
<section id="5.4.6">
<h3>5.4.6  Page Size And Arrangement</h3>
<p>Level 1 and Level 2 conforming devices support a single Logical Display Page of 24 lines by 80 columns, extendable to 24 lines by 132 columns when the "132 Column Mode" extension is present (DECCOLM).</p>
<p>Level 4 devices, and Level 3 devices with the "Windowing Extension" shall support commands to change the Logical Display Page Size (DECSLPP and DECSCPP).  The actual Page Sizes supported shall be clearly specified in the product documentation, and means shall be provided for software to interrogate the size of the Logical Display Page (see "Terminal State Interrogation").  The Page Size and number of pages in the Logical Display may also be configurable by the user under local control.</p>
<a id="5-71" data-page="5-71"></a>
<section id="DECCOLM">
<h4>Set/Reset Column Mode <span>&mdash;</span> DECCOLM</h4>
<p><em>Levels:</em> 1X, 2X, 3X, 4X</p>
<p><em>Purpose:</em> Change the state of Column Mode between Eighty (reset) and One Thirty Two (set).</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI ? 3 h</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI ? 3 l</samp></pre>
</div>
<p><em>Description:</em> A conforming device may provide as an extension the capability of selecting 80-column [reset state = eighty] or 132-&NoBreak;column [set state = one_thirty_two] display format.</p>
<p>Selecting Eighty or One_Thirty_Two Column Mode causes the display data to be cleared, the scrolling region to be eliminated, and the Active Position to be set to the display origin (1,1), even if the terminal was already in the selected state.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The font used to display Page Memory may change when the number of columns on the page changes to better match the screen.  Control of when the font changes may be provided as a Set-Up option.</p></li>
<li><p>If the Host Writable Status Line is enabled, receipt of this sequence will clear both the main display and the Host Writable Status Line.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
<li><code>top_margin</code></li>
<li><code>bottom_margin</code></li>
<li><code>column_mode</code></li>
<li><code>left_margin</code></li>
<li><code>right_margin</code></li>
<li><code>columns_per_page</code></li>
<li><code>left_right_margins_mode</code></li>
</ul>
<a id="5-72" data-page="5-72"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_column_mode()
{
  line_t y;
  column_t x;
column_mode = ONE_THIRTY_TWO;
columns_per_page = 132;
for (y=1; y&lt;MAX_NUM_LINES; y++)
  {
  for (x=1; x&lt;MAX_NUM_COLUMNS; x++)
    display[y][x].code = EMPTY_CHARACTER;
  line_rendition[y] = SINGLE_WIDTH;
  }
active_position.line = 1;
active_position.column = 1;
top_margin = 1;
bottom_margin = lines_per_page;
left_margin = 1;
right_margin = columns_per_page;
left_right_margins_mode = SETABLE;
}


void reset_column_mode()
{
  line_t y;
  column_t x;
column_mode = EIGHTY;
columns_per_page = 80;
for (y=1; y&lt;MAX_NUM_LINES; y++)
  {
  for (x=1; x&lt;MAX_NUM_COLUMNS; x++)
    display[y][x].code = EMPTY_CHARACTER;
  line_rendition[y] = SINGLE_WIDTH;
  }
active_position.line = 1;
active_position.column = 1;
top_margin = 1;
bottom_margin = lines_per_page;
left_margin = 1;
right_margin = columns_per_page;
left_right_margins_mode = SETABLE;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-73" data-page="5-73"></a>
<section id="DECSCPP">
<h4>Set Columns Per Page <span>&mdash;</span> DECSCPP</h4>
<p><em>Levels:</em> 3X (Windowing), 4</p>
<p><em>Purpose:</em> Set the number of columns per page in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      $       |
9/11    3/?     2/4     7/12</samp></pre>
</div>
<p><em>Description:</em> This sequence sets the number of columns in the display page according to the numeric parameter.  If the parameter is omitted or zero, the page width is defaulted to 80.  If the number of columns specified is not one of the values supported by the implementation, the next higher supported number of columns per page is assumed.  If the number of columns specified exceeds the maximum number supported, the maximum number supported will be used.</p>
<p>DECSCPP does not cause the Active Position to move.  However if the active position is beyond the width of the new page when the command is executed, the active position will be moved to the right edge of the page.  DECSCPP does not cause the Right Margin to move.  However if the right margin is beyond the width of the new page when the command is executed, the right margin will be moved to the right edge of the page.  When changing from a 132 column to a 80 column page, the information in columns 1-80 is preserved.  The information in columns 81-132 is cleared.  When changing from an 80 column page to a 132 column page, the information in columns 1-80 is preserved.</p>
<p><em>Notes on DECSCPP:</em></p>
<ol>
<li><p>The font used to display Page Memory may change when the number of columns on the page changes to better match the screen.  Control of when the font changes may be provided as a Set-Up option.</p></li>
<li><p>The number of columns per page can also be changed through Column Mode (DECCOLM).  The affect of DECSCPP is similar to DECCOLM except that DECSCPP does not clear page memory.</p></li>
<li><p>DECSCPP does not change the setting of DECLRMM.</p></li>
</ol>
<aside>
<h4>Implementation Guideline</h4>
<p>The VT420 can configure its off-screen memory to pages of either 80 or 132 columns wide.  When the page width changes, the corresponding 80 or 132 <a id="5-74" data-page="5-74"></a>column font is automatically selected.</p>
</aside>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
<li><code>right_margin</code></li>
<li><code>columns_per_page</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_columns_per_page(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  line_t y;
  column_t x;
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] &lt;= 80)
    /* set columns per page to 80 */
    {
    for (y=1; y&lt;MAX_NUM_LINES; y++)
      {
      for (x=81; x&lt;MAX_NUM_COLUMNS; x++)
        display[y][x].code = EMPTY_CHARACTER;
      }
    if (active_position.column > 80) active_position.column = 80;
    if (right_margin > 80) right_margin = 80;
      /* optional font change */
      if (columns_per_page > 80) select_normal_font();
    columns_per_page = 80;
    }
  else
    /* set columns per page to 132 */
      /* optional font change */
      if (columns_per_page &lt;= 80) select_condensed_font();
    columns_per_page = 132;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-75" data-page="5-75"></a>
<section id="DECSLPP">
<h4>Set Lines Per Page <span>&mdash;</span> DECSLPP</h4>
<p><em>Levels:</em> 3X (Windowing), 4</p>
<p><em>Purpose:</em> Set the number of lines per page in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      t
9/11    3/?     7/4</samp></pre>
</div>
<p><em>Description:</em> This sequence sets the number of display lines per page according to the numeric parameter.  If the parameter is omitted or zero, the page length is defaulted to 24.  If the number of lines specified is not one of the values supported by the implementation, the next higher supported number of lines per page is assumed.  If the number of lines specified exceeds the maximum number supported, the maximum number supported will be used.</p>
<p>DECSLPP does not cause Page Memory to be cleared, however, information contained in a larger page may appear in successive smaller pages, if the new height of the pages selected by the DECSLPP is too small to hold the information.</p>
<p>DECSLPP does not cause the scrolling regions to be reset, or the Active Position to move, except under the following circumstances: The scrolling margins may be reset to the extremes of the new Page Configuration if the current scrolling margin exceeds the physical limits of the new Page height; and, the Active Position will move to the same column in the maximum available line, if the Active Position exceeds the available number of lines in the new page size.</p>
<p>Conformance to Level 4 requires support for 3 pages of 24 lines.</p>
<aside>
<h4>Implementation Guideline</h4>
<p>The VT420 can configure its off-screen memory to either 3 pages of 24 lines, 2 pages of 25 lines, 2 pages of 36 lines, or 1 page of 72 lines in double-session mode, or 6 pages of 24 lines, 5 pages of 25 lines, 4 pages of 36 lines, 2 pages of 72 lines, or 1 page of 144 lines in single-session mode.</p>
</aside>
<p><em>State Affected:</em></p>
<ul>
<li><code>lines_per_page</code></li>
<li><code>number_of_pages</code></li>
<li><code>active_position</code></li>
<li><a id="5-76" data-page="5-76"></a><code>top_margin</code></li>
<li><code>bottom_margin</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_lines_per_page(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] &lt;= 24)
    {
    lines_per_page = 24;
    number_of_pages = 3;
    }
  else if (parv[0] == 25)
    {
    lines_per_page = 25;
    number_of_pages = 2;
    }
  else if (parv[0] &lt;= 36)
    {
    lines_per_page = 36;
    number_of_pages = 2;
    }
  else
    {
    lines_per_page = 72;
    number_of_pages = 1;
    }

  if (active_position.line > lines_per_page)
    active_position.line = lines_per_page;
  if (active_position.page > number_of_pages)
    active_position.page  = number_of_pages;
  if (top_margin > lines_per_page)
    top_margin = 1;
  if (bottom_margin > lines_per_page)
    bottom_margin = lines_per_page;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-77" data-page="5-77"></a>
<section id="5.4.7">
<h3>5.4.7  Page Movement</h3>
<section id="NP">
<h4>Next Page <span>&mdash;</span> NP</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> To move the Active Position ahead one or more pages in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      U
9/11    3/?     5/5</samp></pre>
</div>
<p><em>Description:</em> This sequence causes the Active Position to move ahead a number of pages, specified by the parameter.  If the parameter value is zero (the default) or one, the active position moves ahead 1 page.  If the sequence calls for a page beyond the last page of display memory, the highest numbered page is used.  NP moves the Active Position to the home position in the new page obeying Origin Mode.</p>
<p>Whether or not the new page is displayed depends upon the setting of DECPCCM.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-78" data-page="5-78"></a>
<p><em>Algorithm:</em></p>
<pre><code>void next_page(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] == 0) parv[0] = 1;
  if ((active_position.page + parv[0]) &lt;= number_of_pages)
    active_position.page += parv[0];
  else
    active_position.page = number_of_pages;
  if (origin_mode = DISPLACED)
    {
    active_position.line = top_margin;
    active_position.column = left_margin;
    }
  else
    {
    active_position.line = 1;
    active_position.column = 1;
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-79" data-page="5-79"></a>
<section id="PP">
<h4>Preceding Page <span>&mdash;</span> PP</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> To move the Active Position back one or more pages in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      V
9/11    3/?     5/6</samp></pre>
</div>
<p><em>Description:</em> This sequence causes the active position to move back a number of pages, specified by the parameter.  If the parameter value is zero (the default) or one, the active position moves back 1 page.  If the sequence calls for a page before the first page of display memory, the first page is used.  PP moves the active position to the home position in the new page obeying Origin Mode.</p>
<p>Whether or not the new page is displayed depends upon the setting of DECPCCM.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<a id="5-80" data-page="5-80"></a>
<p><em>Algorithm:</em></p>
<pre><code>void preceding_page(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] == 0) parv[0] = 1;
  if (active_position.page > parv[0])
    active_position.page -= parv[0];
  else
    active_position.page = 1;
  if (origin_mode = DISPLACED)
    {
    active_position.line = top_margin;
    active_position.column = left_margin;
    }
  else
    {
    active_position.line = 1;
    active_position.column = 1;
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-81" data-page="5-81"></a>
<section id="PPA">
<h4>Page Position Absolute <span>&mdash;</span> PPA</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> To move the Active Position to the specified page in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      SP      P       (default Pn: 1)
9/11    3/?     2/0     5/0</samp></pre>
</div>
<p><em>Description:</em> This sequence moves the Active Position to the corresponding line and column on the n-th page.  If there are fewer than n pages in display memory, the highest numbered page is used.</p>
<p>Whether or not the new page is displayed depends upon the setting of DECPCCM.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void page_position_absolute(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] == 0) parv[0] = 1;
  if (parv[0] &lt;= number_of_pages)
    active_position.page = parv[0];
  else
    active_position.page = number_of_pages;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-82" data-page="5-82"></a>
<section id="PPR">
<h4>Page Position Relative <span>&mdash;</span> PPR</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> To move the Active Position forward to the n-th succeding page in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      SP      Q       (default Pn: 1)
9/11    3/?     2/0     5/1</samp></pre>
</div>
<p><em>Description:</em> This sequence moves the active position to the corresponding line and column of the n-th succeding page.  If the sequence calls for a page beyond the last page of display memory, the highest numbered page is used.</p>
<p>Whether or not the new page is displayed depends upon the setting of DECPCCM.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void page_position_relative(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] == 0) parv[0] = 1;
  if ((active_position.page + parv[0]) &lt;= number_of_pages)
    active_position.page += parv[0];
  else
    active_position.page = number_of_pages;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-83" data-page="5-83"></a>
<section id="PPB">
<h4>Page Position Backward <span>&mdash;</span> PPB</h4>
<p><em>Levels:</em> 3x (Windowing), 4</p>
<p><em>Purpose:</em> To move the Active Position back to the n-th preceding page in the Logical Display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      SP      R       (default Pn: 1)
9/11    3/?     2/0     5/2</samp></pre>
</div>
<p><em>Description:</em> This sequence moves the active position to the corresponding line and column on the n-th preceding page.  If the sequence calls for a page before the first page of display memory, the first page is used.</p>
<p>Whether or not the new page is displayed depends upon the setting of DECPCCM.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void page_position_backward(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
if ( (conformance_level == LEVEL_4) ||
     (level_3_extensions[WINDOWING]==TRUE) )
  {
  if (parv[0] == 0) parv[0] = 1;
  if (active_position.page > parv[0])
    active_position.page -= parv[0];
  else
    active_position.page = 1;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
</section>
<a id="5-84" data-page="5-84"></a>
<section id="5.5">
<h2>5.5  Windowing Extension</h2>
<p>The Windowing Extension supports Logical Display Page sizes that are larger or smaller than the physical display.  A rectangular area of the screen (physical display) that displays information from a Logical Display Page is called a window.</p>
<p>Conforming devices may provide local window management features for creating and manipulating more than one window on the physical display at a time (guideline).</p>
<p>The following functions described in this subsection are used to control how an area of the Logical Display is mapped to a window on the physical display.</p>
<ul>
<li><a href="#DECHCCM">DECHCCM<span> &mdash; </span>Horizontal Cursor Coupling Mode</a></li>
<li><a href="#DECVCCM">DECVCCM<span> &mdash; </span>Vertical Cursor Coupling Mode</a></li>
<li><a href="#DECPCCM">DECPCCM<span> &mdash; </span>Page Cursor Coupling Mode</a></li>
<li><a href="#DECRQDE/DECRPDE">DECRQDE<span> &mdash; </span>Request Displayed Extent</a></li>
<li><a href="#DECSNLS">DECSNLS<span> &mdash; </span>Select Number of Lines per Screen (documented exception)</a></li>
<li><a href="#SU">SU<span> &mdash; </span>Pan Down</a></li>
<li><a href="#SD">SD<span> &mdash; </span>Pan Up</a></li>
</ul>
<p>The Windowing Extension also supports two commands for changing the the size of the Logical Display Page (DECSLPP and DECSCPP, see "Page Size and Arrangement").  Finally, if more than one page of display memory is supported, the Windowing Extension includes commands to move the active position among the pages (NP, PP, PPA, PPR, and PPB, see "Page Movement").</p>
<p>The Windowing Extension may be provided at Level 1 or higher of the Character Cell Display service class, and is indicated by the extension parameter 18 in the Device Attributes (DA) response.</p>
<a id="5-85" data-page="5-85"></a>
<section id="DECHCCM">
<h4>Set/Reset Horizontal Cursor Coupling Mode <span>&mdash;</span> DECHCCM</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> Change the state of Horizontal Cursor Coupling Mode between coupled (set state, page moves horizontally in the window to keep cursor visible), and uncoupled (reset state).</p>
<div>
<p><em>To set:</em></p>
<pre><samp>CSI ? 60 h    (coupled)</samp></pre>
<p><em>To reset:</em></p>
<pre><samp>CSI ? 60 l    (uncoupled - default)</samp></pre>
</div>
<p><em>Description:</em> DECHCCM is a parameter to the Set Mode and Reset Mode commands.  In the reset (uncoupled) state, when the active position within a page goes left or right of the borders of the displayable area (window), the page does not move with respect to the window to keep the cursor visible.  The cursor is not shown in this case.  The cursor is said to be "uncoupled" from the display.  In the set state, when the active position within a page goes left or right of the borders of the displayable area (window), the page is moved the minimum amount to an 8 column boundary in the horizontal direction to keep the cursor position visible.  The cursor is said to be "coupled" to the display.</p>
<p><em>Notes on DECHCCM:</em></p>
<ol>
<li><p>Horizontal Cursor Coupling does not need to be provided when there is no way for a Logical Display Page to have more columns than can be shown in the narrowest window.</p></li>
<li><p>Horizontal Cursor Coupling may be enabled or disabled under local control in Set-Up.</p></li>
<li><p>If a Set Mode command setting DECHCCM is received while the Active Column is not visible on the display, the page is moved to include the Active Column.</p></li>
<li><p>Whether or not the cursor is actually visible may also depend on the state of Vertical and Page Cursor Coupling (DECVCCM and DECPCCM).</p></li>
<li><p>Existing implementations move the page the minimum amount to make the cursor visible.  Experience suggests moving the minimum amount to an 8 column boundary would make the display easier to follow for the user (less frequent movement).</p></li>
</ol>
</section>
<a id="5-86" data-page="5-86"></a>
<section id="DECVCCM">
<h4>Set/Reset Vertical Cursor Coupling Mode <span>&mdash;</span> DECVCCM</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> Change the state of Vertical Cursor Coupling Mode between coupled (set state, page moves vertically in window to keep cursor visible), and uncoupled (reset state).</p>
<div>
<p><em>To set:</em></p>
<pre><samp>CSI ? 61 h    (coupled - default)</samp></pre>
<p><em>To reset:</em></p>
<pre><samp>CSI ? 61 l    (uncoupled)</samp></pre>
</div>
<p><em>Description:</em> DECVCCM is a parameter to the Set Mode and Reset Mode commands.  In the reset state, when the active position within a page goes above or below the borders of the displayable area (window), the page does not move with respect to the window to keep the cursor visible.  The cursor is not shown in this case.  The cursor is said to be "uncoupled" from the display.  In the set state, when the active position within a page goes above or below the borders of the displayable area (window), the page is moved the minimum amount in the vertical direction to keep the cursor position visible.  The cursor is said to be "coupled" to the display.</p>
<p><em>Notes on DECVCCM:</em></p>
<ol>
<li><p>Vertical Cursor Coupling may be enabled or disabled under local control in Set-Up.</p></li>
<li><p>If a Set Mode command setting DECVCCM is received while the Active Line is not visible on the display, the page is moved to include the Active Line.</p></li>
<li><p>Whether or not the cursor is actually visible may also depend on the state of Horizontal and Page Cursor Coupling (DECHCCM and DECPCCM).</p></li>
</ol>
</section>
<a id="5-87" data-page="5-87"></a>
<section id="DECPCCM">
<h4>Set/Reset Page Cursor Coupling Mode <span>&mdash;</span> DECPCCM</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> Change the state of Page Cursor Coupling Mode between coupled (set state, switch page in window to keep cursor visible), and uncoupled (reset state).</p>
<div>
<p><em>To set:</em></p>
<pre><samp>CSI ? 64 h    (coupled - default)</samp></pre>
<p><em>To reset:</em></p>
<pre><samp>CSI ? 64 l    (uncoupled)</samp></pre>
</div>
<p><em>Description:</em> DECPCCM is a parameter to the Set Mode and Reset Mode commands.  In the reset state, when the active position moves to a new page in a multiple page configuration, the display is not refreshed to keep the cursor visible.  The cursor is not shown in this case.  The cursor is said to be "uncoupled" from the display.  In the set state, when the active position moves to a new page, the destination page is refreshed on the Main Display to keep the cursor position visible.  The cursor is said to be "coupled" to the display.</p>
<p><em>Notes on DECPCCM:</em></p>
<ol>
<li><p>Page Cursor Coupling may be enabled or disabled under local control in Set-Up.</p></li>
<li><p>If a Set Mode command setting DECPCCM is received when the Active Page containing the cursor is not visible on the display, the Active Page is refreshed on the Main Display.</p></li>
</ol>
</section>
<a id="5-88" data-page="5-88"></a>
<section id="DECRQDE/DECRPDE">
<h4>Request/Report Displayed Extent <span>&mdash;</span> DECRQDE/DECRPDE</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> To determine the area of page memory currently visible in the display window.</p>
<div>
<p><em>Request form:</em></p>
<pre><samp>CSI   "    v
9/11  2/2  7/6</samp></pre>
<p><em>Report  form:</em></p>
<pre><samp>CSI   Ph ; Pw ; Pml ; Pmt ; Pmp  "    w
9/11  Ph ; Pw ; Pml ; Pmt ; Pmp  2/2  7/7</samp></pre>
</div>
<p><em>Description:</em> The DECRQDE sequence, which takes no parameters, causes the device to respond with a DECRPDE control function describing the area of Page Memory being displayed on the physical screen.</p>
<p>The DECRPDE parameters provide the following information:</p>
<ul>
<li><p>Ph<span> &mdash; </span>The number of lines (height) of Page Memory being displayed in the window.  This does not include any status line (see "Status Display").  If no lines from the active session are visible, 0 is returned (see "Session Management").</p></li>
<li><p>Pw<span> &mdash; </span>The number of columns (width) of Page Memory being displayed in the window.  Pw is not necessarily 0 when Ph is 0.  Ph should be used to determine whether any lines are visible.</p></li>
<li><p>Pml<span> &mdash; </span>The column in Page Memory that is displayed in the leftmost column of the window.</p></li>
<li><p>Pmt<span> &mdash; </span>The line in Page Memory that is displayed in the topmost line of the  window.</p></li>
<li><p>Pmp<span> &mdash; </span>The page of Page Memory that is being displayed through the window.</p></li>
</ul>
</section>
<a id="5-89" data-page="5-89"></a>
<section id="DECSNLS">
<h4>Select Number Of Lines Per Screen <span>&mdash;</span> DECSNLS</h4>
<p><em>Levels:</em> Documented Exception (Windowing)</p>
<p><em>Purpose:</em> To select a font size and corresponding maximum number of lines that will fit on the physical display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      *       |
9/11    Pn      2/10    7/12</samp></pre>
</div>
<p><em>Description:</em> DECSNLS selects the maximum number of lines which can be displayed on the screen by choosing a corresponding font size.</p>
<p>Pn is a numeric parameter between 1 and 255 which indicates the number of lines which can be displayed on the screen at one time.  If a value not directly supported by the terminal is selected, the next larger size supported will be used.  If Pn is greater than the largest number of lines available, the largest number supported will be used.  The number of lines per screen that can be supported will be clearly specified in the product documentation.</p>
<p>Although DECSNLS selects a font height which determines the maximum number of lines which can be displayed, the actual number of data lines displayed can be limited by other factors including the Page Size, whether there is a Status Display, and local window management functions if any.  Applications can determine the actual number of lines displayed using the Request Display Extent (DECRQDE) control sequence.</p>
<p><em>Notes on DECSNLS:</em></p>
<ol>
<li><p>The terminal will not display more lines than are contained on a single page within a single window.</p></li>
<li><p>A Status Display, if enabled, may occupy lines that would otherwise be available for showing data from the Logical Display Page.</p></li>
<li><p>Unused lines will be left blank at the bottom of the window, or screen.</p></li>
<li><p>DECSNLS is a "User Preference Feature" intended for terminal management use.  It should not be modified by application software except in response to a user request.  The terminal may provide a means to lock DECSNLS under local control (User Features Lock in Set-&NoBreak;Up) to prevent host modification.</p><a id="5-90" data-page="5-90"></a></li>
<li><p>It is suggested that software specify Pn to match the Logical Display page sizes supported.  This will provide the best compatibility between implementations.</p></li>
<li><p>The terminal may provide a local mechanism to change DECSNLS automatically when the Page Size is changed ("auto resize window").</p></li>
</ol>
<aside>
<h4>Implementation Guideline</h4>
<p>The VT420 supports three different font heights which allow either 24, 39 or 49 data lines to be displayed on the screen, plus a status line.</p>
</aside>
</section>
<a id="5-91" data-page="5-91"></a>
<section id="SU">
<h4>Pan Down (Scroll Up) <span>&mdash;</span> SU</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> To cause the current page to move up with respect to the window making another line visible at the bottom.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      S       (default Pn: 1)
9/11    Pn      5/3</samp></pre>
</div>
<p><em>Description:</em> Causes the entire visible contents of the current page to move up one or more lines on the physical display according to the parameter.  The line at the top border of the window is no longer seen, and a new line appears at bottom border of the window for each position moved.  A numeric parameter of zero or one causes the page to move one line.</p>
<p>The window cannot be moved beyond the boundaries of the page.</p>
<p>This control affects what is visible on the physical display only.  No movement of data within the Logical Display occurs.  The Active Position does not change.</p>
</section>
<a id="5-92" data-page="5-92"></a>
<section id="SD">
<h4>Pan Up (Scroll Down) <span>&mdash;</span> SD</h4>
<p><em>Levels:</em> 3x, 4x (Windowing)</p>
<p><em>Purpose:</em> To cause the current page to move down with respect to the window making another line visible at the top.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      T       (default Pn: 1)
9/11    Pn      5/4</samp></pre>
</div>
<p><em>Description:</em> Causes the entire visible contents of the current page to move down one or more lines on the physical display according to the parameter.  The line at the bottom border of the window is no longer seen, and a new line appears at top border of the window for each position moved.  A numeric parameter of zero or one causes the page to move one line.</p>
<p>The window cannot be moved beyond the boundaries of the page.</p>
<p>This control affects what is visible on the physical display only.  No movement of data within the Logical Display occurs.  The Active Position does not change.</p>
</section>
</section>
<a id="5-93" data-page="5-93"></a>
<section id="5.6">
<h2>5.6  Visual Renditions</h2>
<p>This subsection describes functions used to control the visual appearance of characters on the display.  Attributes to be controlled include screen background (light or dark), character size (double wide and double size line attributes), character emphasis (bold, blink, underline, reverse), and character color when the Color Text Extension is implemented.</p>
<p>The following control functions are described herein:</p>
<ul>
<li><a href="#DECSCNM">DECSCNM<span> &mdash; </span>Screen Mode</a></li>
<li><a href="#5.6.1">Line Renditions</a><ul>
<li><a href="#DECSWL">DECSWL<span> &mdash; </span>Single Width Line</a></li>
<li><a href="#DECDWL">DECDWL<span> &mdash; </span>Double-Width Line</a></li>
<li><a href="#DECDHLT,DECDHLB">DECDHLT<span> &mdash; </span>Double-Height Line Top</a></li>
<li><a href="#DECDHLT,DECDHLB">DECDHLB<span> &mdash; </span>Double-Height Line Bottom</a></li>
</ul>
</li>
<li><a href="#5.6.2">Character Renditions</a><ul>
<li><a href="#SGR">SGR<span> &mdash; </span>Select Graphic Rendition</a></li>
</ul>
</li>
<li><a href="#5.6.3">Color Text Extension (SGR parameters)</a><ul>
<li><a href="#DECCTR">DECCTR<span> &mdash; </span>Color Table Report</a></li>
<li><a href="#DECSTGLT">DECSTGLT<span> &mdash; </span>Select Text/Graphics Look-Up Table (Documented Exception)</a></li>
</ul>
</li>
</ul>
<a id="5-94" data-page="5-94"></a>
<section id="DECSCNM">
<h4>Set/Reset Screen Mode <span>&mdash;</span> DECSCNM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Change the state of Screen Mode between Normal (reset) and Reverse (set) screen.</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI ? 5 h</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI ? 5 l</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall provide the capability of operating the physical display in either "normal" [reset state = normal] or "reverse" [set state = reverse] screen.  The Screen Mode setting allows the terminal operator to define his screen state with respect to normal character rendition.  Changing the mode reverses the definitions of the foreground and background colors.  The actual color values are not specified by the architecture, and are implementation defined.  All character renditions must be achievable as defined on both normal and reverse screens.</p>
<p>Note:  Conforming software should not depend on the speed of execution when changing Screen Mode.  It may take as long as the time required to repaint the entire screen, depending on the hardware implementation.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>screen_mode</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_screen_mode()
{
screen_mode = REVERSE_SCREEN;
}


void reset_screen_mode()
{
screen_mode = NORMAL_SCREEN;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-95" data-page="5-95"></a>
<section id="5.6.1">
<h3>5.6.1  Line Renditions</h3>
<p>A conforming device shall support the following line renditions:</p>
<ul>
<li>single-height, single-width</li>
<li>single-height, double-width</li>
<li>double-height, double-width top</li>
<li>double-height, double-width bottom</li>
</ul>
<p>Only one rendition may be set per line (they are mutually exclusive).  Setting double-width or double-height renditions doubles the character cell width within the line, but does not affect the addressing of characters in the line (within the constraints of the physical display).  For example, the character in column 5 of a single-width line will still be addressed as column 5 if the line rendition is changed to double-width, although the character field will now start in column 9 of the physical display.  Furthermore, when the line rendition is set to double-width or double-height, character positions cannot be addressed which are more than half the current value of the right edge of the display.</p>
<p>Note:  Conforming software will not draw only the top or the bottom of double-height lines.  When double-height lines are used, both the top and bottom must be displayed in adjacent line positions.  Otherwise, the visual display of the line and the cursor symbol registration is UNDEFINED.</p>
<a id="5-96" data-page="5-96"></a>
<section id="DECSWL">
<h4>Single-Width Line <span>&mdash;</span> DECSWL</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Set the Line Rendition of the Active Line to single-&NoBreak;width</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC     #       5
1/11    2/3     3/5</samp></pre>
</div>
<p><em>Description:</em> Setting this attribute causes all characters indicated by the codes contained in the Active Line to be displayed in single-width rendition.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Setting this attribute on a line which was previously double-width will cause the line length to be doubled.</p></li>
<li><p>Setting this attribute does not cause data contained in the Active Line to be lost.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void single_width_line()
{
  short int base;
base = (active_position.page-1) * lines_per_page;
line_rendition[active_position.line + base] = SINGLE_WIDTH;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-97" data-page="5-97"></a>
<section id="DECDWL">
<h4>Double-Width Line <span>&mdash;</span> DECDWL</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Set the Line Rendition of the Active Line to double-&NoBreak;width.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC     #       6
1/11    2/3     3/6</samp></pre>
</div>
<p><em>Description:</em> Double-width characters are achieved by displaying the characters indicated by the codes contained in the Active Line in double-width rendition.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Setting this attribute causes the length of the Active Line to be reduced by half.</p></li>
<li><p>Setting this attribute causes data which is beyond the end of the Active Line after execution of the control to be lost.</p></li>
<li><p>This control does not operate when DECLRMM (Left Right Margin Mode) is set.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<a id="5-98" data-page="5-98"></a>
<p><em>Algorithm:</em></p>
<pre><code>void double_width_line()
{
  column_t x;
  short int base;
base = (active_position.page-1) * lines_per_page;
line_rendition[active_position.line + base] = DOUBLE_WIDTH;
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
for (x=end_of_line(active_position.line)+1;
     x&lt;=columns_per_page;
     x++)
  {
  display[active_position.line + base][x].code = EMPTY_CHARACTER;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-99" data-page="5-99"></a>
<section id="DECDHLT,DECDHLB">
<h4>Double-Height Line <span>&mdash;</span> DECDHLT,DECDHLB</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Set the Line Rendition of the Active Line to double-&NoBreak;height top or double-height bottom.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC     #       3               top
1/11    2/3     3/3

ESC     #       4               bottom
1/11    2/3     3/4</samp></pre>
</div>
<p><em>Description:</em> Double-height characters are achieved by setting the Line Rendition of adjacent lines to double-height top and double-height bottom.  Setting double-height top causes the upper half of the characters indicated by the codes contained in the Active Line to be displayed in double-height and double-width rendition.  Setting double-height bottom causes the lower half of the characters contained in the Active Line to be displayed in double-height and double-width rendition.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Conforming software will not draw only the top or the bottom of double-height lines.  When double-height lines are used, both the top and bottom must be displayed in adjacent line positions.  Otherwise, the visual display of the line and the cursor symbol registration is UNDEFINED.</p></li>
<li><p>Since double-height also implies double-width, setting this attribute causes the length of the Active Line to be reduced by half.</p></li>
<li><p>Setting this attribute causes data which is beyond the end of the Active Line after execution of the control to be lost.</p></li>
<li><p>This control does not operate when DECLRMM (Left Right Margin Mode) is set.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<a id="5-100" data-page="5-100"></a>
<p><em>Algorithm:</em></p>
<pre><code>void double_height_line_top()
{
  column_t x;
  short int base;
base = (active_position.page-1) * lines_per_page;
line_rendition[active_position.line + base] = DOUBLE_HEIGHT_TOP;
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
for (x=end_of_line(active_position.line)+1;
     x&lt;=columns_per_page;
     x++)
  {

  display[active_position.line + base][x].code = EMPTY_CHARACTER;
  }
}


void double_height_line_bottom()
{
  column_t x;
  short int base;
base = (active_position.page-1) * lines_per_page;
line_rendition[active_position.line + base] = DOUBLE_HEIGHT_TOP;
if (active_position.column > end_of_line(active_position.line))
  active_position.column = end_of_line(active_position.line);
for (x=end_of_line(active_position.line)+1;
     x&lt;=columns_per_page;
     x++)
  {
  display[active_position.line + base][x].code = EMPTY_CHARACTER;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-101" data-page="5-101"></a>
<section id="5.6.2">
<h3>5.6.2  Character Renditions</h3>
<p>Each character cell in the display has a set of visual attributes associated with it.  These attributes can be defined using the concept of foreground and background values.  A character cell consists of a rectangular area filled with a background color, and a character pattern written in a foreground color.  Background and foreground values are at least binary in nature (i.e., they must have at least two clearly distinguishable visual states).  Characters are rendered in the physical display by some combination of the background and foreground states.  The actual values and meanings of the background and foreground colors are not specified by the architecture, and are implementation defined.</p>
<p>A conforming device shall provide normal, bold, underline, blink, and reverse renditions for each character in the display.  These renditions can be combined in any manner for each character position independently.  The architecture requires that each rendition and every possible rendition combination be individually distinguishable one from the other, without affecting the ability to recognize the character pattern within the cell.  Graphic renditions apply to all graphic character codes (2/1 to 7/14 inclusive, and 10/0 to 15/15 inclusive) as well as to the Space character (2/0).</p>
<section id="5.6.2.1">
<h4>5.6.2.1  Normal Rendition</h4>
<p>Normal rendition defines the rendering of characters in the physical display in its "natural" state, that is, where the character is rendered in the display foreground against a field of display background.  Normal rendition is the absence of any special rendition of the character cell.  (Note:  Normal rendition of characters is dependent on the state of the Screen Mode, which is used to define the values of the foreground and background colors.)</p>
</section>
<section id="5.6.2.2">
<h4>5.6.2.2  Bold Rendition</h4>
<p>Bold rendition of characters may be achieved either by emphasizing the display foreground without changing the background characteristics of the cell, or by intensifying the background color while holding the foreground value constant.</p>
</section>
<section id="5.6.2.3">
<h4>5.6.2.3  Blink Rendition</h4>
<p>Blink rendition is achieved by alternating the stable rendition of a character with a different rendition at a fixed rate, with a duty cycle of approximately one second.</p>
</section>
<a id="5-102" data-page="5-102"></a>
<section id="5.6.2.4">
<h4>5.6.2.4  Underscore Rendition</h4>
<p>Underscore rendition is achieved by the addition of a single horizontal bar extending the full width of the character field and rendered in the display foreground.  The bar must be easily distinguishable from the underline character (5/15).</p>
</section>
<section id="5.6.2.5">
<h4>5.6.2.5  Reverse Rendition</h4>
<p>Reverse rendition is achieved by using the current value of the foreground color as the cell background, and the current value of the background color as the foreground.</p>
</section>
<a id="5-103" data-page="5-103"></a>
<section id="SGR">
<h4>Select Graphic Rendition <span>&mdash;</span> SGR</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Designate the graphic rendition to be applied to all subsequent characters entered into the display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Ps ; ... ; Ps   m       default Ps: 0
9/11    Ps ; ... ; Ps   6/13</samp></pre>
</div>
<p><em>Description:</em> The SGR control selects the graphic rendition (visual attribute) to be applied to all subsequent characters entered into the display.  The parameter values indicate the combination of renditions to be selected as indicated in the following table (for both Level 1 and Level 2):</p>
<table>
<thead>
<tr><th>Parameter</th><th>Rendition</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>All renditions off</td></tr>
<tr><td>1</td><td>Bold</td></tr>
<tr><td>4</td><td>Underscore</td></tr>
<tr><td>5</td><td>Blink</td></tr>
<tr><td>7</td><td>Negative (reverse) image</td></tr>
</tbody>
</table>
<p>The following additional values are recognized in Level 2 operation.  Although these values may be recognized when the terminal is operating as a Level 1 device, conforming software shall not rely on this feature.</p>
<table>
<thead>
<tr><th>Parameter</th><th>Rendition</th></tr>
</thead>
<tbody>
<tr><td>22</td><td>Normal intensity (Bold off)</td></tr>
<tr><td>24</td><td>Not Underscore</td></tr>
<tr><td>25</td><td>Steady (not Blink)</td></tr>
<tr><td>27</td><td>Positive image</td></tr>
</tbody>
</table>
<p><em>Notes:</em></p>
<ol>
<li><p>All other parameter values shall be ignored unless they are part of a well defined extension to the architecture.</p></li>
<li><p>Renditions may be selected in any combination, and will be rendered appropriately.  Selecting additional renditions does not affect the setting of previously selected renditions (newly selected renditions will be combined with previously selected renditions) unless all renditions are turned off (parameter value zero (0)).</p><a id="5-104" data-page="5-104"></a></li>
<li><p>In no way does the selection of current rendition affect the rendition of characters already entered into the display.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void select_graphic_rendition(parc, parv)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
if (parc == 0) parc = 1;
for (n=0; n&lt;parc; n++)
  {
  switch(parv[n])
    {
    case 0:
      current_rendition.bold = FALSE;
      current_rendition.underscore = FALSE;
      current_rendition.blink = FALSE;
      current_rendition.reverse = FALSE;
      break;
    case 1:
      current_rendition.bold = TRUE;
      break;
    case 4:
      current_rendition.underscore = TRUE;
      break;
    case 5:
      current_rendition.blink = TRUE;
      break;
    case 7:
      current_rendition.reverse = TRUE;
      break;
    default:
      break;
    }
  if (conformance_level == LEVEL_2)
    {
    switch(parv[n])
      {
      case 22:
        current_rendition.bold = FALSE;
        break;
      case 24:
        current_rendition.underscore = FALSE;
<a id="5-105" data-page="5-105"></a>        break;
      case 25:
        current_rendition.blink = FALSE;
        break;
      case 27:
        current_rendition.reverse = FALSE;
        break;
      default:
        break;
      }
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
<a id="5-106" data-page="5-106"></a>
<section id="5.6.3">
<h3>5.6.3  ANSI Color Text Extension</h3>
<p>The Color Text Extension provides for the selection of text foreground and background colors on a per character basis using SGR color parameters.  The Color Text extension may be provided at Level 2 or higher of the Character Cell Display service class, and is indicated by the extension parameter 22 in the Device Attributes (DA) response.</p>
<section id="5.6.3.1">
<h4>5.6.3.1  SGR Color Selection</h4>
<p>A conforming device shall recognize parameter values 30-37 and 39 to the SELECT GRAPHIC RENDITION (SGR) control sequence to select the foreground color attribute and parameter values 40-47 and 49 to select the background color attribute, as specified in the table.  The eight colors listed as factory defaults shall be available at a minimum.  These colors are taken from the ANSI X3.64 standard.</p>
<table>
<thead>
<tr><th data-underline="---">SGR</th><th data-underline="-------">meaning</th><th data-underline="---------------------">factory default color</th></tr>
</thead>
<tbody>
<tr><td>30</td><td>foreground color 0</td><td>black</td></tr>
<tr><td>31</td><td>foreground color 1</td><td>red</td></tr>
<tr><td>32</td><td>foreground color 2</td><td>green</td></tr>
<tr><td>33</td><td>foreground color 3</td><td>yellow</td></tr>
<tr><td>34</td><td>foreground color 4</td><td>blue</td></tr>
<tr><td>35</td><td>foreground color 5</td><td>magenta</td></tr>
<tr><td>36</td><td>foreground color 6</td><td>cyan</td></tr>
<tr><td>37</td><td>foreground color 7</td><td>white</td></tr>
<tr><td>39</td><td>default foreground color</td><td>&lt;device-dependent></td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>40</td><td>background color 0</td><td>black</td></tr>
<tr><td>41</td><td>background color 1</td><td>red</td></tr>
<tr><td>42</td><td>background color 2</td><td>green</td></tr>
<tr><td>43</td><td>background color 3</td><td>yellow</td></tr>
<tr><td>44</td><td>background color 4</td><td>blue</td></tr>
<tr><td>45</td><td>background color 5</td><td>magenta</td></tr>
<tr><td>46</td><td>background color 6</td><td>cyan</td></tr>
<tr><td>47</td><td>background color 7</td><td>white</td></tr>
<tr><td>49</td><td>default background color</td><td>&lt;device-dependent></td></tr>
</tbody>
</table>
<p>A device may provide means, either under software or local control, to modify these colors and may provide means to save the modified colors in non-volatile memory.</p>
</section>
<section id="5.6.3.2">
<h4>5.6.3.2  Interaction With Other Visual Renditions</h4>
<p>The foreground color and background color are maintained as part of the current_rendition.  As new characters are written to the <a id="5-107" data-page="5-107"></a>display, the current_rendition is used to update the attribute bits associated with each character in display memory.</p>
<p>Selecting the Reverse Rendition (SGR parameter 7) will, if the Reverse Rendition is not already set, be equivalent to invoking the current foreground color as the new background color, and the current background color as the new foreground color.  Likewise, selecting the Positive Rendition (SGR parameter 27) will, if the Positive Rendition is not already set, be equivalent to invoking the current foreground color as the new background color, and the current background color as the new foreground color.</p>
<p>SGR parameters 30-37 and 39, the nine foreground color specifiers, will set the foreground color without regard to whether the Reverse Rendition is set.  Likewise, SGR parameters 40-47 and 49, the nine background color specifiers, will set the background color without regard to whether the Reverse Rendition is set.</p>
<p>SGR parameter 0 (all renditions off) will reset the foreground and background color attributes to their defaults (equivalent to SGR parameters 39 and 49).  SOFT TERMINAL RESET (DECSTR) will similarly cause the foreground and background color attributes to be reset.</p>
<p>When the Color Text Extension is present, the Bold Rendition (SGR parameter 1) should be distinguished by a heavier weight font (Guideline).  It is preferable not to use a separate color (increased intensity) for bolding in order to keep it distinct from the other color text attributes.</p>
<p>Changing between normal and reverse screen mode (DECSCNM) will affect which attribute bits from display memory are used to render the text foreground and background color.  It does not affect the current_rendition, or how the current_rendition is applied to the character attribute bits associated with each character in display memory.</p>
<p>The architecture does not specify the default text foreground or background colors.  It is recommended however that normal screen mode correspond to lighter text on a darker background (not mandatory).  The factory default for screen mode is device dependent.  A device may provide means to save the screen mode in non-volatile memory so as to override the factory default at power-up.</p>
</section>
<section id="5.6.3.3">
<h4>5.6.3.3  Color Maps</h4>
<p>A color map is a table that associates a binary value in display memory with a color that can be produced on the display.  During display refresh, the active color map is used to translate color values from display memory to colors that appear on the screen.  The size of the active color map cannot exceed 2**N entries where N is the number of bits used to <a id="5-108" data-page="5-108"></a>represent a color in display memory (often the number of bit planes).</p>
<p>A device can have many color maps of which only one is active at time, or can assign color map entries from a single color map to different applications, limiting the size of each application's color map.  Color maps can be read-only (fixed), or read-write (modifiable under software control).</p>
<p>Applications often model color selection as asking for a particular color (non-indexed, absolute color specification, read-&NoBreak;only), or asking for a particular color map entry (indexed color, read-write).  When using indexed color, it is normal to allow the application to modify a color map entry causing all objects written with that color index to change color on the display.</p>
<p>Conforming devices may implement the ANSI SGR colors as indexed or non-indexed, and may allow selecting between these two models under local control.</p>
</section>
<a id="5-109" data-page="5-109"></a>
<section id="5.6.3.4">
<h4>5.6.3.4  Color Table Report (DECCTR)</h4>
<p>A conforming device that supports the TSI and Color Text Extensions, and has a color table shall be capable of reporting the color table in the form of a DECCTR sequence as follows.</p>
<section id="DECCTR">
<h4>Color Table Request/Report/Restore <span>&mdash;</span> DECCTR</h4>
<p><em>Levels:</em> 2x, 3x, 4x (TSI and Color Text)</p>
<p><em>Purpose:</em> To Request, Report, and Restore the contents of the color table.</p>
<div>
<p><em>Request Format:</em></p>
<pre><samp>CSI  2   ;    Pu  $    u     (DECRQTSR Ps=2)
9/11 3/2 3/11 3/? 2/4  7/5</samp></pre>
<p><em>Report Format:</em></p>
<pre><samp>DCS 2   $    s  D...D ST     (DECTSR Ps=2)
9/0 3/2 2/4 7/3 D...D 9/12</samp></pre>
<p><em>Restore Format:</em></p>
<pre><samp>DCS 2   $   p   D...D ST     (DECRSTS Ps=2)
9/0 3/2 2/4 7/0 D...D ST</samp></pre>
</div>
<p>Where D...D consists of groups of 5 parameters as follows:</p>
<p><samp>Pc; Pu; Px; Py; Pz / Pc; Pu; Px; Py; Pz / ...</samp></p>
<ul>
<li>Pc is the color number 0-255.</li>
<li>Pu is the color coordinate system<ul>
<li>0 = illegal</li>
<li>1 = HLS (hue 0-360, lightness 0-100, saturation 0-100)</li>
<li>2 = RGB (red 0-100, green 0-100, blue 0-100)</li>
</ul>
</li>
<li>Px, Py, Px are values in the color coordinate system specified by Pu.</li>
<li>; is the semicolon character (3/11)</li>
<li>/ is the slach character (2/15)</li>
</ul>
<p><em>Description:</em> DECRQTSR with parameter 2 is sent from the host to the terminal to request a color table report.  The terminal responds with a DECTSR control with parameter 2 and each color table entry given as a group of 5 parameters in the data string.  To load or restore a previously reported color map, the host transmits the DECRSTS control with parameter 2 and the desired color map definitions in the data string.  When loading the color map, only the index entries specified are changed.</p>
<p>When using DECRQTSR to request a color table report, you can include an additional parameter Pu to select the color coordinate <a id="5-110" data-page="5-110"></a>system the terminal uses to report the color map (0=default, 1=HLS, 2=RGB).</p>
</section>
</section>
<section id="5.6.3.5">
<h4>5.6.3.5  Default Color Assignment (Guideline)</h4>
<p>When indexed color is used, the following color map assignments are recommended to maximize compatibility among implementations when the colors are not specified explicitly (not mandatory).  "Normal" text foreground and background refers to when Screen Mode is reset.</p>
<table>
<caption>Four or more plane (16 or more color) color map:</caption>
<thead>
<tr><th data-underline="-----">Color</th><th data-underline="----">Mono</th><th data-underline="--------">Text Use</th></tr>
</thead>
<tbody>
<tr><td>0 black</td><td>black</td><td>normal background</td></tr>
<tr><td>1 blue</td><td>gray-2</td><td></td></tr>
<tr><td>2 red</td><td>gray-4</td><td></td></tr>
<tr><td>3 green</td><td>gray-6</td><td></td></tr>
<tr><td>4 magenta</td><td>gray-1</td><td></td></tr>
<tr><td>5 black</td><td>gray-3</td><td>black text</td></tr>
<tr><td>6 white</td><td>gray-5</td><td>white text</td></tr>
<tr><td>7 gray 50%</td><td>white</td><td>normal foreground</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>8 gray 25%</td><td>black</td><td></td></tr>
<tr><td>9 blue*</td><td>gray-2</td><td>blue text</td></tr>
<tr><td>10 red*</td><td>gray-4</td><td>red text</td></tr>
<tr><td>11 green*</td><td>gray-6</td><td>green text</td></tr>
<tr><td>12 magenta*</td><td>gray-1</td><td>magenta text</td></tr>
<tr><td>13 cyan*</td><td>gray-3</td><td>cyan text</td></tr>
<tr><td>14 yellow*</td><td>gray-5</td><td>yellow text</td></tr>
<tr><td>15 gray 75%</td><td>white</td><td>bold text (VT340)</td></tr>
</tbody>
<tfoot>
<tr><td colspan="3">* = may be less saturated</td></tr>
</tfoot>
</table>
<p>If more than four planes are supported, this series of 16 colors can be repeated as needed.</p>
<aside>
<h4>Explainatory Note&nbsp;</h4>
<p>DECterm uses these assignments directly, though colors corresponding to map entries 9-14 are not less saturated.</p>
<p>The VT340 uses these assignments except that color 5 is cyan, and color 6 is yellow.  These were changed to black and white to make black and white ANSI text colors not dependent on the default foreground and background colors in DECterm. <a id="5-111" data-page="5-111"></a>Color map entries 0-3 match the VT240 default colors.</p>
</aside>
</section>
<a id="5-112" data-page="5-112"></a>
<section id="5.6.3.6">
<h4>5.6.3.6  Color Interaction Among Modes And Data Syntaxes (Guideline)</h4>
<p>ANSI Color Text, Sixels, and ReGIS can all support indexed color using a similar color model.  A conforming device may share a single color map among these protocols so that changing a color definition in one protocol will affect the color map used by the other protocols.  Support for the option of sharing the same color map is recommended, but not mandatory.  Conforming software should not depend on cross protocol side effects if maximum portability is desired.</p>
</section>
<section id="5.6.3.7">
<h4>5.6.3.7  Alternative Text Rendition Mapping (Guideline)</h4>
<p>Some previous terminals which do not support ANSI Color Text allowed other SGR parameters to select text colors.</p>
<table>
<caption>VT241</caption>
<thead>
<tr><th data-underline="-----">Color</th><th data-underline="------"> Entry</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>normal text background</td></tr>
<tr><td>1</td><td>reverse graphic rendition (<a href="#SGR">SGR</a> 7)</td></tr>
<tr><td>2</td><td>bold    graphic rendition (<a href="#SGR">SGR</a> 1)</td></tr>
<tr><td>3</td><td>normal text foreground</td></tr>
</tbody>
</table>
<p>For backward compatibility, the VT340 provides an alternative text rendition mapping mode selectable from Set-Up.</p>
<table>
<caption>VT340 Alternative Text Rendition Mapping</caption>
<thead>
<tr><th data-underline="-----">Color</th><th data-underline="------"> Entry</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>normal text background</td></tr>
<tr><td>8</td><td>reverse graphic rendition (<a href="#SGR">SGR</a> 7)</td></tr>
<tr><td>15</td><td>bold    graphic rendition (<a href="#SGR">SGR</a> 1)</td></tr>
<tr><td>7</td><td>normal text foreground</td></tr>
</tbody>
</table>
<p>When alternative text rendition mapping is not selected, the reverse attribute is rendered by exchanging the text foreground and background colors.</p>
<p>A conforming device may provide an alternative text rendition mapping mode selectable in Set-Up, but this is not part of the Color Text Extension.  The factory default behavior should be to treat bold and reverse graphic renditions independently of color selection (not mandatory).</p>
<a id="5-113" data-page="5-113"></a>
<section id="DECSTGLT">
<h4>Select Text/Graphics Look-Up Table <span>&mdash;</span> DECSTGLT</h4>
<p><em>Levels:</em> 3 (Documented Exception)</p>
<p><em>Purpose:</em> To select color look-up table used and the mapping of text renditions to look-up table entries.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Ps   )    {
9/11  3/?  2/9  7/11</samp></pre>
</div>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="-------------">Look-Up Table</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>monochrome look-up table (default)</td></tr>
<tr><td>1</td><td>color look-up table,
standard text rendition mapping</td></tr>
<tr><td>2</td><td>color look-up table,
alternative text rendition mapping</td></tr>
</tbody>
</table>
<p><em>Description:</em> DECSTGLT permits host selection of the video color look-up table used in the device, and the mapping of text renditions to look-up table entries.  This control function assumes the existence of two color look-up tables:  monochrome and color.  When a color look-up table is selected, two text rendition mappings can be defined, called "standard" and "alternative".  The "standard" mapping permits the reverse video rendition to use a different color look-up table entry for the background of displayed text.  The "alternative" mapping restricts text rendition mapping to a single background entry, and one or two foreground entries (two if the bold graphic rendition is effected through increased intensity).  In other words, the alternative mapping supports the use of bold and reverse graphic renditions to select text foreground colors.</p>
<p>This control function is not intended to supplant the Color Text Extension, but instead provide a means of backward compatibility to earlier video devices which provided several different text rendition mappings based on different monitor configurations.</p>
</section>
</section>
</section>
</section>
<a id="5-114" data-page="5-114"></a>
<section id="5.7">
<h2>5.7  Audible Indicator</h2>
<p>A conforming device shall provide a warning "bell", or some similar audible indicator suitable to signal the operator's attention.  It may be possible to change the volume of the bell sound, or disable it entirely, as a local Setup function.</p>
<section id="BEL">
<h4>Warning Bell <span>&mdash;</span> BEL</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Rings the terminal bell.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>BEL

0/7</samp></pre>
</div>
<p><em>Description:</em> The BEL control causes the terminal to emit an audible tone of brief duration.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>It may be possible to change the volume of the bell sound, or disable it entirely, as a local Setup function.</p></li>
</ol>
<p><em>State Affected:</em> none</p>
</section>
</section>
<a id="5-115" data-page="5-115"></a>
<section id="5.8">
<h2>5.8  Graphic Character Sets</h2>
<p>The terminal shall maintain a repertory of available character sets which may be used to interpret received data characters to be displayed.  The character sets must be selectable on a per character basis, and are mutually exclusive (that is, there can be only one character set value for each character position in the Logical Display).  Refer to the Code Extension Chapter of this standard (DEC STD 70-3) for more information on designating and invoking character sets, G-sets, and the structure of the in-use table.</p>
<section id="5.8.1">
<h3>5.8.1  Character Set Repertoire</h3>
<p>The table below shows the graphic character sets required at each Conformance Level, and those available as Extensions.</p>
<table>
<thead>
<tr><th data-underline="----------------------------">Character Set(s)</th><th data-underline="------------------------">Level at which required,
or availabe as Extension</th></tr>
</thead>
<tbody>
<tr><td>U.S. ASCII</td><td>1-4</td></tr>
<tr><td>DEC Line Drawing</td><td>l-4</td></tr>
<tr><td>DEC Supplemental Graphic</td><td>2-4</td></tr>
<tr><td>ISO Latin-1 Supplemental</td><td>2x, 3-4</td></tr>
<tr><td>UPSS</td><td>2x, 3-4</td></tr>
<tr><td>UK set (United Kingdom)</td><td>1x</td></tr>
<tr><td>NRCS</td><td>1x, 2x, 3x, 4x</td></tr>
<tr><td>JIS_ROMAN, JIS_KATAKANA</td><td>2x, 3x, 4x</td></tr>
<tr><td>DRCS</td><td>2x, 3x, 4x</td></tr>
<tr><td>DEC Technical</td><td>3x, 4x</td></tr>
</tbody>
</table>
<p><em>Notes:</em></p>
<ol>
<li><p>ISO Latin-1 Supplemental is available at Level 2 as part of the 8-bit Interface Architecture Extension.</p></li>
<li><p>UPSS (User Preference Supplemental Set) is not actually a character set in itself, but a pointer to one of the supplemental sets (usually DEC Supplemental or ISO Latin-1 Supplemental).  UPSS is available at Level 2 as part of the 8-bit Interface Architecture Extension.</p></li>
<li><p>The UK set is an optional extension to Level 1 which if present, may be selected in Set-Up to replace ASCII (ASCII and UK cannot be designated simultaneously).  This extension was implemented on the VT100, but has since been replaced by the NRCS Extension.</p></li>
<li><p>NRCS (National Replacement Character Set) is an extension which provides twelve 7-bit NRC sets, one of which may be selected under local user control (Set-Up) to replace <a id="5-116" data-page="5-116"></a>U.S.  ASCII as the default set.  See DECNRCM.  Depending on the implementation, only one NRC set corresponding to the keyboard dialect may be selectable at a time.</p></li>
<li><p>JIS_ROMAN and JIS_KATAKANA are part of the Katakana Extension.</p></li>
<li><p>DRCS (Dynamically Redefinable Character Set) is an extension which allows a soft character set to be downloaded from the host and assigned a designating sequence possibly replacing an existing character set.  See Chapter 10 of this standard (DEC STD 70-10), DRCS Extension.</p></li>
</ol>
<p>The character sets themselves are described in DEC STD 169 Digital Standard Coded graphic Character Sets for Hardware and Software.</p>
</section>
<section id="5.8.2">
<h3>5.8.2  Character Set Selection</h3>
<p>Character sets are identified to the terminal using designating escape sequences which must be registered in DEC Standard 138.  Each sequence consists of zero, one, or two intermediate characters in the range 2/0 through 2/15, followed by a final character in the range 3/0 through 7/15, the combination of which uniquely identifies the character set to be designated.  (Note: the designating sequence is preceded by the Escape character (1/11) and a single intermediate value 2/8, 2/9, 2/10, or 2/11 indicating which of the four G-sets the specified character set is to be designated into.  For a complete description of the designating and invoking process, see the section "Code Extension Layer", DEC STD 70-3.)</p>
<a id="5-117" data-page="5-117"></a>
<section id="SCS">
<h4>Designate Character Set <span>&mdash;</span> SCS</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Designate the graphic character sets.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC  &lt;G-Set designator>  &lt;Character set designator></samp></pre>
</div>
<p>The G-Set designators are:</p>
<ul>
<li>94 character sets<ul>
<li>G0&emsp;<samp>(</samp>&emsp;<samp>2/8</samp></li>
<li>G1&emsp;<samp>)</samp>&emsp;<samp>2/9</samp></li>
<li>G2&emsp;<samp>*</samp>&emsp;<samp>2/10</samp></li>
<li>G3&emsp;<samp>+</samp>&emsp;<samp>2/11</samp></li>
</ul>
</li>
<li>96 character sets<ul>
<li>G1&emsp;<samp>-</samp>&emsp;<samp>2/13</samp></li>
<li>G2&emsp;<samp>.</samp>&emsp;<samp>2/14</samp></li>
<li>G3&emsp;<samp>/</samp>&emsp;<samp>2/15</samp></li>
</ul>
</li>
</ul>
<p>The Character set designators are:</p>
<ul>
<li>ASCII_G&emsp;<samp>B</samp>&emsp;<samp>4/2</samp></li>
<li>LINE_DRAWING_G&emsp;<samp>0</samp>&emsp;<samp>3/0</samp></li>
<li>DEC_SUPPLEMENTAL_G&emsp;<samp>%5</samp>&emsp;<samp>2/5 3/5</samp></li>
<li>ISO_LATIN1_SUPPLEMENTAL_G&emsp;<samp>A</samp>&emsp;<samp>4/1</samp></li>
<li>UPSS_G&emsp;<samp>&lt;</samp>&emsp;<samp>3/12</samp></li>
<li>DRCS_G&emsp;<samp>I I F</samp>&emsp;<samp>2/? 2/? ?/?</samp></li>
<li>TCS_G&emsp;<samp>></samp></li>
<li>JIS Roman&emsp;<samp>J</samp>&emsp;<samp>4/10</samp></li>
<li>JIS Katakana&emsp;<samp>I</samp>&emsp;<samp>4/9</samp></li>
<li>NRCS<ul>
<li>British&emsp;<samp>A</samp></li>
<li>Dutch&emsp;<samp>4</samp>&emsp;<i>(discontinued in L3)</i>
</li>
<li>Finnish&emsp;<samp>5 or C</samp></li>
<li>French&emsp;<samp>R</samp></li>
<li>French Canadian&emsp;<samp>Q</samp></li>
<li>German&emsp;<samp>K</samp></li>
<li>Italian&emsp;<samp>Y</samp></li>
<li>Norwegian/Danish&emsp;<samp>E or 6</samp></li>
<li>Portuguese&emsp;<samp>%6</samp></li>
<li>Spanish&emsp;<samp>Z</samp></li>
<li>Swedish&emsp;<samp>7 or H</samp></li>
<li>Swiss&emsp;<samp>=</samp></li>
</ul>
</li>
</ul>
<p>For example,</p>
<ul>
<li><samp>ESC ( B</samp> designates ASCII_G to G0</li>
<li><samp>ESC ) 0</samp> designates Line Drawing to G1</li>
<li><samp>ESC * &lt;</samp> designates the UPSS to G2</li>
</ul>
<a id="5-118" data-page="5-118"></a>
<p><em>Description:</em> The character set designating escape sequences provide the means of selecting the G0, G1, G2, and G3 character sets, which can be invoked into the left (GL) and right (GR) sides of the In Use Table.  (For a complete description of the G-sets and the In Use Table, see the section "Code Extension Layer".)</p>
<p><em>Notes:</em></p>
<ol>
<li><p>In Level 1 operation character sets can only be designated into G0 and G1, with G2 and G3 containing the ASCII character set by default.</p></li>
<li><p>Conforming software will not change the default designations of the G0 and G2 character sets.  The G1 and G3 sets will be used when it is desired to designate alternate character sets.  Furthermore, conforming software will not designate ASCII_G to either G2 or G3, and will not designate Supplemental_G to either G0 or G1.</p></li>
<li><p>Designating a character set which is invoked into the In Use Table at the time the control is executed causes the In Use Table to be changed to reflect the change to the designated set.</p></li>
<li><p>As a Level 1 extension, the UK (United Kingdom) Character Set may be provided, and designated with the sequence ESC I A (1/11 I 4/1).  If this extension is supported, it may also be possible to locally select the UK set to replace ASCII as the default 7-bit set.  In this case, the UK set will be used in all instances in which ASCII is employed throughout the Video Systems Reference Manual when the terminal is in Level 1 operation.</p></li>
<li><p>On traditional video terminals with the NRCS extension, it is permissable to only recognize the one NRC set corresponding to the keyboard dialect at a time.  Workstation terminal emulators may extend the character set table to recognize all NRC sets regardless of the current keyboard dialect (not mandatory).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>designated_graphic_sets[4]</code></li>
<li><code>in_use_table</code></li>
</ul>
<a id="5-119" data-page="5-119"></a>
<p><em>Algorithm:</em></p>
<pre><code>/***************
 *
 * Initialize the character set table
 *   This procedure should be called on power-up or
 *   reset to initialize the character set table
 *   with the appropriate designating sequences.
 *
 **************/
void intialize_character_set_table()
{
char_set_table[TABLE_ASCII].name = ASCII_G;
char_set_table[TABLE_ASCII].first_intermediate = 0;
char_set_table[TABLE_ASCII].second_intermediate = 0;
char_set_table[TABLE_ASCII].final = 'B';

char_set_table[TABLE_LINE_DRAWING].name = LINE_DRAWING_G;
char_set_table[TABLE_LINE_DRAWING].first_intermediate = 0;
char_set_table[TABLE_LINE_DRAWING].second_intermediate = 0;
char_set_table[TABLE_LINE_DRAWING].final = '0';

if (conformance_level >= LEVEL_2)
  {
  char_set_table[TABLE_DEC_SUPP].name = DEC_SUPPLEMENTAL_G;
  char_set_table[TABLE_DEC_SUPP].first_intermediate = '%';
  char_set_table[TABLE_DEC_SUPP].second_intermediate = 0;
  char_set_table[TABLE_DEC_SUPP].final = '5';

  if (level_2_extensions[DRCS_EXT]==TRUE)
    {
    char_set_table[TABLE_DRCS].name = DRCS_G;
    char_set_table[TABLE_DRCS].first_intermediate = 0;
    char_set_table[TABLE_DRCS].second_intermediate = 0;
    char_set_table[TABLE_DRCS].final = 0;
    }
  if (level_2_extensions[NRCS_EXT]==TRUE)
    {
    /*
       This entry is initialized to correspond
       with the keyboard dialect whenever it
       is changed in Set-Up.
     */
    char_set_table[TABLE_NRCS].name = NRCS_G;
    char_set_table[TABLE_NRCS].first_intermediate = 0;
    char_set_table[TABLE_NRCS].second_intermediate = 0;
    char_set_table[TABLE_NRCS].final = 0;
    }
  }
if ((conformance_level >= LEVEL_3) ||
    (level_2_extensions[EIGHT_BIT_IA]==TRUE))
  {
  char_set_table[TABLE_LATIN1].name = ISO_LATIN1_SUPPLEMENTAL_G;
<a id="5-120" data-page="5-120"></a>  char_set_table[TABLE_LATIN1].first_intermediate = 0;
  char_set_table[TABLE_LATIN1].second_intermediate = 0;
  char_set_table[TABLE_LATIN1].final = 'A';

  char_set_table[TABLE_UPSS].name = UPSS_G;
  char_set_table[TABLE_UPSS].first_intermediate = 0;
  char_set_table[TABLE_UPSS].second_intermediate = 0;
  char_set_table[TABLE_UPSS].final = '&lt;';
  }
if (level_3_extensions[TCS]==TRUE)
  {
  char_set_table[TABLE_TCS].name = TCS_G;
  char_set_table[TABLE_TCS].first_intermediate = 0;
  char_set_table[TABLE_TCS].second_intermediate = 0;
  char_set_table[TABLE_TCS].final = '>';
  }
}





void designate_character_set(parc, parv)
  /* parc and parv contain the count and values
     of the indermediate characters of the
     designating sequence */
  short int parc;
  short int parv[MAX_NUM_INTERMEDIATES];
{
  short int n;
  short int gset_number;
  short int set_size;
  boolean_t compare_designator();  /* function declaration */
/*.....................*/
/* find which set we're designating */
switch (parv[0])
  {
  case ')':  /* 2/8  designate 94 into G0 */
    gset_number = 0;
    set_size = 94;
    break;
  case '(':  /* 2/9  designate 94 into G1 */
    gset_number = 1;
    set_size = 94;
    break;
  case '*':  /* 2/10 designate 94 into G2 */
    gset_number = 2;
    set_size = 94;
    break;
  case '+':  /* 2/11 designate 94 into G3 */
    gset_number = 3;
    set_size = 94;
    break;
<a id="5-121" data-page="5-121"></a>  case '-':  /* 2/13 designate 96 into G1 */
    gset_number = 1;
    set_size = 96;
    break;
  case '.':  /* 2/14 designate 96 into G2 */
    gset_number = 2;
    set_size = 96;
    break;
  case '/':  /* 2/15 designate 96 into G3 */
    gset_number = 3;
    set_size = 96;
    break;
  }

/* look for the designator in the table */
/*
   Note that because the DRCS designator is processed last,
   it will replace an installed set if the designator is
   identical.
*/
for (n=0; n&lt;MAX_NUM_CHAR_SETS; n++)
  {
  if ( compare_designator(parc, parv, n) )
    {
    designated_graphic_sets[gset_number] =
      char_set_table[n].name;
    }
  }

/* update the in_use_table with
   the latest designations (if any)
   for the invoked gsets */
in_use_table.gl =
  designated_graphic_sets[in_use_table.invoked_gl];
if (conformance_level >= LEVEL_2)
  {
  in_use_table.gr =
    designated_graphic_sets[in_use_table.invoked_gr];
  }
/* perform hardware specific actions needed
   to update the character set displayed */
}  /* end procedure designate_character_set */


/*
 * compare sequence designator to table entry n
 */
boolean_t compare_designator(parc, parv, n)
  short int parc;  /* number of sequence characters */
  short int parv[MAX_NUM_INTERMEDIATES];
  short int n;     /* char set table entry */
{
  boolean_t status;
<a id="5-122" data-page="5-122"></a>status = TRUE;
if (char_set_table[n].final != parv[parc-1])
  status = FALSE;
else
  {
  if (parc > 2)
    {
    if (char_set_table[n].first_intermediate != parv[1])
      status = FALSE;
    else
      {
      if (parc >= 3)
        if (char_set_table[n].second_intermediate != parv[2])
          status = FALSE;
      }
    }
  }
return(status);
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-123" data-page="5-123"></a>
<section id="DECAUPSS">
<h4>Assign User-Preference Supplemental Set <span>&mdash;</span> DECAUPSS</h4>
<p><em>Levels:</em> 2x (8-bit Interface Architecture), 3-4</p>
<p><em>Purpose:</em> To assign a user preferred supplemental set</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Ps  !    u    Dscs  ST
9/0      2/1  7/5        9/12</samp></pre>
</div>
<p><em>Description:</em> This control string assigns a character set to be the User-Preference Supplemental Set (UPSS).  The User-Preference Supplemental Set serves the following functions:</p>
<ol>
<li><p>It acts as the default supplemental set for reception.  On soft terminal reset, the UPSS is designated as G2.</p></li>
<li><p>It acts as the keyboard supplemental set, that is, it determines which supplemental characters can be generated from the keyboard (including valid compose sequences).</p></li>
<li><p>It provides a level of indirection for application software.  The UPSS can be explicitly designated without needing to know the actual character set assigned.</p></li>
</ol>
<p>Currently DEC Supplemental and ISO Latin-1 supplemental may be used as the UPSS.  The default User-Preference Supplemental Set is determined through a Set-Up feature.  The value of Ps and Dscs denote which set from the terminal's repertory of character sets is to be the User-Preference Supplemental Set.</p>
<p>Ps selects between 94 and 96 character sets (Ps = 0 selets a 94 character set).  Dscs is the intermediate and final characters of the SCS escape sequence used to explicitly designated that character set.  For example a value of "% 5" for Dscs indicates that the DEC Supplemental character set is the User-Preference Supplemental set.  See the SCS command for more information on the designating intermediate and final characters.  Attempts to assign an invalid supplemental set will be ignored.</p>
<p><em>Notes on DECAUPSS:</em></p>
<ol>
<li><p>The DRCS can be used as the UPSS by naming it as DEC Supplemental or ISO Latin-1 supplemental.</p></li>
<li><p>Assigning a new UPSS will immediately update the In-Use table if the UPSS is currently designated and invoked.</p></li>
<li><p>This sequence is sent from the terminal to the host in response to a DECRQUPSS request.</p></li>
</ol>
<a id="5-124" data-page="5-124"></a>
<aside>
<h4>Implementation Guideline</h4>
<p>The valid combinations for the VT320 are:</p>
<table>
<tbody>
<tr><td>Ps = 0, Dscs = % 5</td><td>DEC Supplemental</td></tr>
<tr><td>Ps = 1, Dscs = A</td><td>ISO Latin-1 supplemental graphic</td></tr>
</tbody>
</table>
</aside>
<p><em>State Affected:</em></p>
<ul>
<li><code>upss    /* defined in code extension layer */</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void assign_user_preference_set(parv, string)
  short int parv[MAX_NUM_PARAMETERS];
  char string[];
{
if ((conformance_level >= LEVEL_3) ||
    (level_2_extensions[EIGHT_BIT_IA] == TRUE))
  {
  /* update upss state in Code Extension Layer */
  if ((parv[0] = 0) &amp;&amp; (strcmp(string, "%5") == 0))
    {
    /* size is 94 characters */
    upss = DEC_SUPPLEMENTAL_G;
    }
  else if ((parv[0] = 1) &amp;&amp; (strcmp(string, "A") == 0))
    {
    /* size is 96 characters */
    upss = ISO_LATIN1_SUPPLEMENTAL_G;
    }

  /* update in use table */
  if (in_use_table.gl == UPSS_G)
    {
    ; /* perform hardware dependent actions as needed */
    }
  if (in_use_table.gr == UPSS_G)
    {
    ; /* perform hardware dependent actions as needed */
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-125" data-page="5-125"></a>
<section id="DECRQUPSS">
<h4>Request User-Preference Supplemental Set <span>&mdash;</span> DECRQUPSS</h4>
<p><em>Levels:</em> 2x (8-bit Interface Architecture), 3-4</p>
<p><em>Purpose:</em> To request the user preferred supplemental set</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   &amp;    u
9/11  2/6  7/5</samp></pre>
</div>
<p><em>Description:</em> Upon receipt of this sequence, the terminal will return a DECAUPSS sequence which specifies which coded character set is assigned to be the User-Preference Supplemental Set.</p>
<p><em>State Affected:</em> none</p>
<p><em>Algorithm:</em></p>
<pre><code>void request_user_preference_set()
{
if ((conformance_level >= LEVEL_3) ||
    (level_2_extensions[EIGHT_BIT_IA] == TRUE))
  {
  send_char(0x90, host_port);  /* DCS */
  if (upss = DEC_SUPPLEMENTAL_G)
    {
    send_int(0, host_port);
    send_string("!u%5", host_port);
    }
  else if (upss = ISO_LATIN1_SUPPLEMENTAL_G)
    {
    send_int(1, host_port);
    send_string("!uA", host_port);
    }
  send_char(0x9C, host_port);  /* ST */
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-126" data-page="5-126"></a>
<section id="DECNRCM">
<h4>Set/Reset Character Set Mode <span>&mdash;</span> DECNRCM</h4>
<p><em>Levels:</em> 1x, 2x, 3x, 4x (NRCS Extension)</p>
<p><em>Purpose:</em> To select 8-bit Multinational Characters, or 7-bit NRCS Characters for transmission (keyboard) and reception (display).</p>
<div>
<p><em>To set:</em></p>
<pre><samp>CSI ? 42 h   (7-bit NRCS Characters)</samp></pre>
<p><em>To reset:</em></p>
<pre><samp>CSI ? 42 l   (8-bit Multinational Characters)</samp></pre>
</div>
<p><em>Description:</em> This parameter is applicaple to the Set Mode and Reset Mode control sequence.  When 8-bit Multinational Characters is selected (factory default), the terminal uses ASCII in GL and either DEC Supplemental or ISO Latin-1 Supplemental in GR (depending on the UPSS).  When 7-bit NRCS Characters is selected, a 7-bit National Replacement Character set is used for transmission and reception in GL (GR is not used).  The NRCS used is determined by the Keyboard Dialect chosen in Set-Up (see "Keyboard Processing", DEC STD 70-6).</p>
<p><em>Notes on DECNRCM:</em></p>
<ol>
<li><p>Changing this mode has the side effect of re-initializing the designated and invoked character sets to their default state (the state at power-on or reset).  If 7-bit NRCS Characters is selected, a 7-bit NRC Set may replace U.S.  ASCII in the default designations.</p></li>
<li><p>8-bit Characters are temporarily disabled when in Level 1 (VT100 mode), or a 7-bit host line environment is selected.  The DECNRCM sequence will still be recognized, but in the case of the reset sequence, 8-bit characters will remain disabled until the restrictive conditions are removed.</p></li>
<li><p>This sequence is ignored when the North American or Dutch Keyboard Dialect is selected.  These keyboard dialects use U.S.  ASCII as their 7-bit set, so there is no need to disable the multinational set (which includes U.S.  ASCII as its left half) to access 7-bit NRC characters.  U.S.  ASCII may be considered the NRC set for North America.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>character_set_mode</code></li>
<li><code>r_character_set_mode
   /* used to keep track of character set mode
      when a restrictive condition (7-bit Host Line,
<a id="5-127" data-page="5-127"></a>      or VT100 mode) is in effect */</code></li>
<li><code>in_use_table</code></li>
<li><code>designated_graphic_sets[4]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_character_set_mode()
{
if (level_1_extensions[NRCS_EXT]==TRUE)
  {
  character_set_mode = SEVEN_BIT_NATIONAL;
  /* keep track of mode if there are restrictions in effect */
  r_character_set_mode = SEVEN_BIT_NATIONAL;
  if (keyboard_usage_mode == TYPEWRITER)
    {
    in_use_table.gl = nrcs_list[keyboard_dialect];
    in_use_table.gr = nrcs_list[keyboard_dialect];
    in_use_table.invoked_gl = G0;
    in_use_table.invoked_gr = G2;
    designated_graphic_sets[0] = nrcs_list[keyboard_dialect];
    designated_graphic_sets[1] = nrcs_list[keyboard_dialect];
    designated_graphic_sets[2] = nrcs_list[keyboard_dialect];
    designated_graphic_sets[3] = nrcs_list[keyboard_dialect];
    }
  else    /* keyboard usage mode is Data Processing */
    {
    in_use_table.gl = ASCII_G;
    in_use_table.gr = ASCII_G;
    in_use_table.invoked_gl = G0;
    in_use_table.invoked_gr = G2;
    designated_graphic_sets[0] = ASCII_G;
    designated_graphic_sets[1] = ASCII_G;
    designated_graphic_sets[2] = ASCII_G;
    designated_graphic_sets[3] = ASCII_G;
    }
  }
}


void reset_character_set_mode()
{
if (level_1_extensions[NRCS_EXT]==TRUE)
  {
  /* keep track of mode if there are restrictions in effect */
  r_character_set_mode = EIGHT_BIT_MULTINATIONAL;
  /* ignore if 7-bit host line or VT100 mode */
  if ((host_port_environment != SEVEN_BIT) &amp;&amp;
      (conformance_level != LEVEL_1))
    {
    character_set_mode = EIGHT_BIT_MULTINATIONAL;
    in_use_table.gl = ASCII_G;
    in_use_table.gr = UPSS_G;
<a id="5-128" data-page="5-128"></a>    in_use_table.invoked_gl = G0;
    in_use_table.invoked_gr = G2;
    designated_graphic_sets[0] = ASCII_G;
    designated_graphic_sets[1] = ASCII_G;
    designated_graphic_sets[2] = UPSS_G;
    designated_graphic_sets[3] = UPSS_G;
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
</section>
<section id="5.9">
<h2>5.9  Summary Of Control Character Processing</h2>
<p>This subsection provides a summary of control character processing as a convenience to the reader, and to include control characters which are not described in detail in their corresponding functional subsection of this chapter (DEC STD 70-5).</p>
<section id="5.9.1">
<h3>5.9.1  C0 Control Characters</h3>
<p>C0 control characters are those with values of 0/0 to 1/15, and 7/15 (0 - 31, and 127 decimal).  The following is a description of the control characters recognized by conforming devices.  All other C0 control characters cause no action to be taken.</p>
<table>
<thead>
<tr><th data-underline="-------">Control</th><th data-underline="-------">Col/&NoBreak;Row</th><th data-underline="------------">Action Taken</th></tr>
</thead>
<tbody>
<tr><td>NUL</td><td>0/0</td><td>Ignored on input (not
stored in input buffer).
May be used as a time fill
character.  Note:  When
Control Representation Mode
is Set, NUL is not ignored,
but displayed, and may not
be used as a time fill
character.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>ENQ</td><td>0/5</td><td>Transmit answerback message.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#BEL">BEL</a></td><td>0/7</td><td>Causes bell tone to sound
from keyboard.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#BS">BS</a></td><td>0/8</td><td>Causes the cursor to move
to the left one character
position, unless it is at
the left margin.  Does not
cause wrap.</td></tr>
<tr><td colspan="3"><a id="5-129" data-page="5-129"></a></td></tr>
<tr><td><a href="#HT">HT</a></td><td>0/9</td><td>Causes the cursor to move
to the next tab stop, or
the right margin if no
further tab stops.  Does
not cause wrap.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#LF">LF</a></td><td>0/10</td><td>Causes a line feed or a new
line operation depending on
the setting of Line Feed/New
Line Mode (<a href="#LNM">LNM</a>).  <a href="#LF">LF</a> causes
a line to be printed if in
auto print mode.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#VT">VT</a></td><td>0/11</td><td>Interpreted as a <a href="#LF">LF</a>.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#FF">FF</a></td><td>0/12</td><td>Interpreted as a <a href="#LF">LF</a>.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#CR">CR</a></td><td>0/13</td><td>Cursor goes to left margin.
If cursor is already left of the left
margin, cursor goes to column 1.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>SO (LS1)</td><td>0/14</td><td>Invoke G1 character set into GL.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>SI (LS0)</td><td>0/15</td><td>Invoke G0 character set into GL.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>XON</td><td>1/1</td><td>Causes terminal to resume
transmitting, if XOFF
handling is enabled.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>XOFF</td><td>1/3</td><td>Causes terminal to stop
transmitting all codes
except XOFF and XON, if
XOFF handling is enabled.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>CAN</td><td>1/8</td><td>If received during an escape or
control sequence, the sequence
is immediately terminated and
not executed.  No character is
displayed.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#SUB">SUB</a></td><td>1/10</td><td>If received during an escape or
control sequence, the sequence
is immediately terminated and
not executed.  The error
character (reverse question mark)
is displayed.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>ESC</td><td>1/11</td><td>Introduces an escape sequence.
Terminates any escape, control sequence,
or control string in progress.</td></tr>
<tr><td colspan="3"><a id="5-130" data-page="5-130"></a></td></tr>
<tr><td>DEL</td><td>7/15</td><td>Ignored on input (not
stored in input buffer).
May not be used as a time fill
character.</td></tr>
</tbody>
</table>
</section>
<section id="5.9.2">
<h3>5.9.2  C1 Control Characters</h3>
<p>C1 control characters are those with positions of 8/0 to 9/15.  The following is a description of the C1 control characters which are recognized by conforming devices.  All other C1 control characters cause no action to be taken.</p>
<p>Note C1 controls can be represented by ESC Fe sequences in 7-bits.  See "Code Extension Layer" (DEC STD 70-3).</p>
<table>
<thead>
<tr><th data-underline="-------">Control</th><th data-underline="-------">Col/&NoBreak;Row</th><th data-underline="------------">Action Taken</th></tr>
</thead>
<tbody>
<tr><td><a href="#IND">IND</a></td><td>8/4</td><td>INDEX - Causes the active
position to move downward
one line without changing
the horizontal position.
If the active position is
at the bottom margin, a
scroll up is performed.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#NEL">NEL</a></td><td>8/5</td><td>NEXT LINE - Causes the
active position to move
to the first position on
the next line downward.
If the active position is
at the bottom margin, a
scroll action is performed.
(a <a href="#CR">CR</a> <a href="#LF">LF</a> is executed).</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#HTS">HTS</a></td><td>8/8</td><td>HORIZONTAL TABULATION SET
Sets one horizontal
tabulation stop at the
column of the active
position (See also, <a href="#TBC">TBC</a>).</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td><a href="#RI">RI</a></td><td>8/13</td><td>REVERSE INDEX - Moves the
active position to the
same horizontal position
on the preceding line.
If the active position is
at the top margin, a
scroll down is performed.</td></tr>
<tr><td colspan="3"><a id="5-131" data-page="5-131"></a></td></tr>
<tr><td>SS2</td><td>8/14</td><td>SINGLE SHIFT 2 - Causes
the G2 set to be invoked
for the next single
displayed character.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>SS3</td><td>8/15</td><td>SINGLE SHIFT 3 - Causes
the G3 set to be invoked
for the next single
displayable character.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>DCS</td><td>9/0</td><td>DEVICE CONTROL STRING -
Introduces a Device
Control String.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>SOS</td><td>9/8</td><td>START OF STRING -
This control is ignored.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>DECID (reserved)</td><td>9/10</td><td>DEC PRIVATE IDENTIFICATION -
Causes the same response as
the ANSI device attributes
(see DA).  This sequence is
not recognized a Level 3 or
above.  Conforming software
shall use DA.  Note:  If
printer controller mode is
enabled, the sequence will be
sent to the printer.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>CSI</td><td>9/11</td><td>CONTROL SEQUENCE INTRODUCER -
Introduces a control sequence.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>ST</td><td>9/12</td><td>STRING TERMINATOR -
Terminates Control
Strings introduced by
DCS, APC, OSC, and PM.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>OSC</td><td>9/13</td><td>Operating System Command -
A control string.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>PM</td><td>9/14</td><td>Privacy Message -
A control string.</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td>APC</td><td>9/15</td><td>Application Program Command -
A control string.</td></tr>
</tbody>
</table>
<a id="5-132" data-page="5-132"></a>
<section id="SUB">
<h4>Substitute <span>&mdash;</span> SUB</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Place a reversed question mark symbol in the display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>SUB
1/10</samp></pre>
</div>
<p><em>Description:</em> The SUB control is used to indicate the presence of characters in the data stream for which there is no graphic representation.  This control is processed by placing a reversed question mark in the display at the Active Position.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The character to be displayed in cases where the reversed question mark cannot be used is a "half-tone blotch", which is rendered by filling the entire character cell in the display with a cross-hatched pattern.</p></li>
<li><p>Receipt of the Substitute character within an escape or control sequence causes the sequence in progress to be aborted and the Substitute control function to be executed instead (that is, the reversed question mark symbol will be displayed).  (See the section "Code Extension Layer" for a complete description of the handling of control characters within escape and control sequences.)</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void substitute()
{
short int sub = 0x1A;
/*..........*/

/* place a reversed question mark in the display */
insert_or_replace_character(&amp;sub);
}
</code></pre>
<p><em>Known Deviations:</em></p>
<p>Most existing terminals (VT100, VT101, VT102, VT125, VT131, VT132) display the blotch character instead of the reversed question mark.</p>
</section>
</section>
</section>
<a id="5-133" data-page="5-133"></a>
<section id="5.10">
<h2>5.10  Modes States (And Mode Descriptions)</h2>
<p>A conforming device shall provide certain programmable state capabilities or modes as described below.  It should be noted that some modes are identified as User Preference Features (see the section "Concepts and Conformance Criteria" for a list of the modes which are classified as User Preference Features).  The state of these features should not be changed by conforming software, except in response to an explicit user request (for example, a request to change the screen width).</p>
<section id="5.10.1">
<h3>5.10.1  SM/RM - Set Mode, Reset Mode Sequence</h3>
<p>The Set Mode/Reset Mode control sequence is used to control the state of various settable modes in the terminal.</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI   Ps...Ps  l
9/11  Ps...Ps  6/12</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI   Ps...Ps  h
9/11  Ps...Ps  6/8</samp></pre>
</div>
<p>Sets/Resets one or more modes of the terminal as specified by each selective parameter in the parameter string.  Each mode to be set/&NoBreak;reset is specified by a separate parameter.</p>
<p>Note that ANSI specified mode parameters and DEC private mode parameters may not be mixed within the same SM or RM sequence.</p>
<section id="5.10.1.1">
<h4>5.10.1.1  ANSI Specified Modes:</h4>
<table>
<thead>
<tr><th>Mode
Parameter</th><th>Mnemonic</th><th>Mode Function</th></tr>
</thead>
<tbody>
<tr><td>0</td><td></td><td>Error (ignored)</td></tr>
<tr><td>2</td><td>KAM</td><td>Keyboard Action Mode</td></tr>
<tr><td>4</td><td><a href="#IRM">IRM</a></td><td>Insert Replacement Mode</td></tr>
<tr><td>12</td><td><a href="#SRM">SRM</a></td><td>Send-Receive Mode</td></tr>
<tr><td>20</td><td><a href="#LNM">LNM</a></td><td>Line Feed New Line Mode</td></tr>
</tbody>
</table>
</section>
<section id="5.10.1.2">
<h4>5.10.1.2  DEC Private Modes:</h4>
<p>If the first character in the parameter string is 3/15 (?), the parameters are interpreted as DEC private parameters, according to the following table.</p>
<a id="5-134" data-page="5-134"></a>
<table>
<thead>
<tr><th>Mode
Parameter</th><th>Mnemonic</th><th>Mode Function</th></tr>
</thead>
<tbody>
<tr><td>0</td><td></td><td>Error (ignored)</td></tr>
<tr><td>1</td><td>DECCKM</td><td>Cursor Key Mode</td></tr>
<tr><td>3</td><td><a href="#DECCOLM">DECCOLM</a></td><td>Column Mode</td></tr>
<tr><td>4</td><td><a href="#DECSCLM">DECSCLM</a></td><td>Scrolling Mode</td></tr>
<tr><td>5</td><td><a href="#DECSCNM">DECSCNM</a></td><td>Screen Mode</td></tr>
<tr><td>6</td><td><a href="#DECOM">DECOM</a></td><td>Origin Mode</td></tr>
<tr><td>7</td><td>DECAWM</td><td>Autowrap Mode</td></tr>
<tr><td>8</td><td>DECARM</td><td>Autorepeating Mode</td></tr>
<tr><td>18</td><td>DECPFF</td><td>Print Form Feed</td></tr>
<tr><td>19</td><td>DECPEX</td><td>Print Extent</td></tr>
<tr><td>25</td><td>DECCEM</td><td>Cursor Enable Mode</td></tr>
<tr><td>38</td><td>DECTEK</td><td>Tektronix 4010/4014 Mode</td></tr>
<tr><td>42</td><td><a href="#DECNRCM">DECNRCM</a></td><td>National Character set mode</td></tr>
<tr><td>61</td><td><a href="#DECVCCM">DECVCCM</a></td><td>Vertical Coupling</td></tr>
<tr><td>64</td><td><a href="#DECPCCM">DECPCCM</a></td><td>Page Coupling</td></tr>
<tr><td>68</td><td>DECKBUM</td><td>Keyboard Usage Mode</td></tr>
<tr><td>69</td><td><a href="#DECLRMM">DECLRMM</a></td><td>Left Right Margin Mode</td></tr>
<tr><td>73</td><td>DECXRLM</td><td>Transmit Rate Limiting</td></tr>
</tbody>
</table>
<p>Any other parameter values are ignored.</p>
</section>
<section id="5.10.1.3">
<h4>5.10.1.3  Modes That Cannot Be Changed</h4>
<p>The following modes which are specified in the ANSI X3.64-1979 standard may be considered to be permanently set, permanently reset, or not applicable, as noted.  Refer to that standard for further information concerning these modes.</p>
<table>
<thead>
<tr><th>Mode
Mnemonic</th><th>Mode Function</th><th>State</th></tr>
</thead>
<tbody>
<tr><td>EBM</td><td>Editing Boundary Mode</td><td>Reset</td></tr>
<tr><td>FEAM</td><td>Format Effector Action Mode</td><td>Reset</td></tr>
<tr><td>FETM</td><td>Format Effector Transfer Mode</td><td>NA</td></tr>
<tr><td>HEM</td><td>Horizontal Editing Mode</td><td>Reset</td></tr>
<tr><td>MATM</td><td>Multiple Area Transfer Mode</td><td>NA</td></tr>
<tr><td>PUM</td><td>Positioning Unit Mode</td><td>Reset</td></tr>
<tr><td>SATM</td><td>Selected Area Transfer Mode</td><td>NA</td></tr>
<tr><td>SRTM</td><td>Status Reporting Transfer Mode</td><td>Reset</td></tr>
<tr><td>TSM</td><td>Tabulation Stop Mode</td><td>Reset</td></tr>
<tr><td>VEM</td><td>Vertical Editing Mode</td><td>Reset</td></tr>
</tbody>
</table>
</section>
</section>
<section id="5.10.2">
<h3>5.10.2  Mode Descriptions</h3>
<p>The detailed descriptions for many of the modes that use the SM/RM sequences are included in other parts of this standard (DEC STD <a id="5-135" data-page="5-135"></a>70) to keep related functions together.</p>
<section id="SRM">
<h4>Set/Reset Send Receive Mode <span>&mdash;</span> SRM</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> To turn the local echo feature ON or OFF</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI 12 h        (local echo off, default)</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI 12 l        (local echo on)</samp></pre>
</div>
<p><em>Description:</em> SRM is a parameter applicable to the Set Mode and Reset Mode control sequences.  The reset state causes local echo to be ON.  The set state causes local echo to be OFF.</p>
<aside>
<h4>NOTE</h4>
<p>Local echo is temporarily disabled when either or both of the following conditions are true:</p>
<ul>
<li>The terminal is in printer controller mode</li>
<li>The terminal is in local mode</li>
</ul>
</aside>
<p><em>State Affected:</em></p>
<ul>
<li><code>send_receive_mode   /* See Keyboard Processing */</code></li>
<li><code>r_send_receive_mode</code></li>
</ul>
<a id="5-136" data-page="5-136"></a>
<p><em>Algorithm:</em></p>
<pre><code>void set_send_receive_mode()
{
send_receive_mode = ECHO_OFF;
/* remember state in case there are restrictions */
r_send_receive_mode = ECHO_OFF;
}


void reset_send_receive_mode()
{
/* remember state in case there are restrictions */
r_send_receive_mode = ECHO_ON;
if ((printer_controller_mode != PRINTER_CONTROLLER_ON) &amp;&amp;
    (line_local_mode != LOCAL))
  send_receive_mode = ECHO_ON;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
</section>
<a id="5-137" data-page="5-137"></a>
<section id="5.11">
<h2>5.11  Editing Functions</h2>
<p>This subsection describes the following functions used to edit data, or control editing in the Logical Display.</p>
<ul>
<li><a href="#IRM">IRM<span> &mdash; </span>Insert/Replacement Mode</a></li>
<li><a href="#ICH">ICH<span> &mdash; </span>Insert Character</a></li>
<li><a href="#DCH">DCH<span> &mdash; </span>Delete Character</a></li>
<li><a href="#IL">IL<span> &mdash; </span>Insert Line</a></li>
<li><a href="#DL">DL<span> &mdash; </span>Delete Line</a></li>
<li><a href="#DECIC">DECIC<span> &mdash; </span>Insert Column</a></li>
<li><a href="#DECDC">DECDC<span> &mdash; </span>Delete Column</a></li>
<li><a href="#ECH">ECH<span> &mdash; </span>Erase Character</a></li>
<li><a href="#EL">EL<span> &mdash; </span>Erase in Line</a></li>
<li><a href="#DECSEL">DECSEL<span> &mdash; </span>Selective Erase in Line</a></li>
<li><a href="#ED">ED<span> &mdash; </span>Erase in Display</a></li>
<li><a href="#DECSED">DECSED<span> &mdash; </span>Selective Erase in Display</a></li>
<li><a href="#5.11.1">Character Attributes (selective erase)</a><ul>
<li><a href="#DECSCA">DECSCA<span> &mdash; </span>Select Character Attribute</a></li>
</ul>
</li>
</ul>
<a id="5-138" data-page="5-138"></a>
<section id="IRM">
<h4>Set/Reset Insert/Replacement Mode <span>&mdash;</span> IRM</h4>
<p><em>Levels:</em> 1X, 2-4</p>
<p><em>Purpose:</em> Change the state of Insert/Replacement Mode between Replace (reset) and Insert (set) graphic characters.</p>
<div>
<p><em>Set Format:</em></p>
<pre><samp>CSI 4 h</samp></pre>
<p><em>Reset Format:</em></p>
<pre><samp>CSI 4 l</samp></pre>
</div>
<p><em>Description:</em> A conforming device shall provide the ability to select whether characters entered into character positions which already contain data shall overwrite the character at that position [reset state = replace], or shall be inserted by causing all data on the line starting at the Active Position to be shifted one column to the right to accommodate the new character [set state = insert].</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The IRM controls are part of the Level 1 Editing Extension.  This extension is required in all new Level 1 implementations.  They are required functions in Level 2.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>insert_replacement_mode</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void set_insert_replacement_mode()
{
insert_replacement_mode = INSERT;
}


void reset_insert_replacement_mode()
{
insert_replacement_mode = REPLACE;
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-139" data-page="5-139"></a>
<section id="INSERT">
<h4>Insert Or Replace Graphic Character</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> To place a graphic character in the display at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>implied on receipt of graphic character data</samp></pre>
</div>
<p><em>Description:</em> This procedure is called on receipt of graphic character data to place the data in the appropriate position in the display structure.  The character code, as well as the values of the Current Rendition, Current Attribute, and the character set indicated by the In Use Table (left side if code &lt;= 7/14, otherwise right side) are stored in the display list.</p>
<p>The Active Position is advanced by one column each time this operation is performed until it reaches the Right Margin, or the last column of the Active Line.  If the Active Position is within the Scroll Area, it will advance to the Right Margin.  If the Active Position is outside the Scroll Area, it will advance to the last column of the Active Line.</p>
<p>If Auto Wrap mode is off, the Active Position will not advance beyond the Right Margin or last column of the Active Line.  Additional graphic characters received will overwrite this position.</p>
<p>If Auto Wrap Mode is on and the Active Position is within the Vertical Scroll Margins, the Active Position will advance from the Right Margin or last column of the Active Line, to the Left Margin of the next line (causing the display to scroll if necessary) when a graphic character is received and the Last Column Flag is set (see Auto Wrap Mode, DEC STD 70-D for details).</p>
<p>If Auto Wrap Mode is on and the Active Position is outside the Vertical Scroll Margins, the Active Position will advance from the last column of the Active Line, to the first column of the next line when a graphic character is received and the Last Column Flag is set (see Auto Wrap Mode, DEC STD 70-D for details).  No scrolling will occur.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>This operation is affected by the setting of Insert/&NoBreak;Replacement Mode.  When this mode is in the reset state (Replace) the new data will overwrite existing data at the Active Position.  When this mode is in the set state (Insert) the contents of the active line will be shifted right one column starting at the Active Position to accommodate the new data.  Data shifted past the Right <a id="5-140" data-page="5-140"></a>Margin within the Scroll Area, or the last column of the Active Line outside the Scroll Area is lost.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>active_position</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void insert_or_replace_character(parv)
  short int parv[];
{
  column_t x;
  short int line;    /* actual line in logical display */
  short int margin;  /* effective right boundary */
line = (active_position.page * lines_per_page) +
        active_position.line;
if (insert_replacement_mode == INSERT)
  {
  /* determine right boundary for shifting characters */
  if ( (active_position.column &lt;= right_margin) &amp;&amp;
       (active_position.line >= bottom_margin) &amp;&amp;
       (active_position.line &lt;= top_margin)    &amp;&amp;
       (right_margin &lt; end_of_line(line))    )
    margin = right_margin;
  else
    margin = end_of_line(line);
  /* make room for character to be inserted */
  for ( x=margin;
        x > active_position.column;
        x-- )
    strncpy( display[line][x], display[line][x-1],
             sizeof(character_t) );
  }
/* put code in the display, strip 8th bit */
display[line][active_position.column].code = parv[0] &amp; 0x7F;

display[line][active_position.column].rendition =
current_rendition;
display[line][active_position.column].attribute =
current_attribute;

/* write the character set */
if (single_shift == NO_SINGLE_SHIFT)
  {
  if (parv[0] &lt;= 126)
    display[line][active_position.column].character_set =
      in_use_table.gl;
  else
<a id="5-141" data-page="5-141"></a>    display[line][active_position.column].character_set =
      in_use_table.gr;
  }
else if (single_shift == SS2)
  display[line][active_position.column].character_set =
    designated_graphic_sets[2];
else if (single_shift == SS3)
  display[line][active_position.column].character_set =
    designated_graphic_sets[3];

/* advance the active position after entering character */
if (active_position.column &lt; margin)
  active_position.column += 1;
else  /* active position is at effective margin */
  if (auto_wrap_mode = WRAP_ON)
    {
    if (last_column_flag)
      {
      carriage_return();
      line_feed();
      last_column_flag = FALSE;
      }
    else
      last_column_flag = TRUE;
    }
}   /* end insert_or_replace_character() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-142" data-page="5-142"></a>
<section id="ICH">
<h4>Insert Character <span>&mdash;</span> ICH</h4>
<p><em>Levels:</em> 2-4</p>
<p><em>Purpose:</em> Insert empty characters at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      @               default Pn: 1
9/11    Pn      4/0</samp></pre>
</div>
<p><em>Description:</em> The ICH control causes empty characters to be inserted at the Active Position.  A parameter value of zero or one causes a single empty character to be inserted.  A parameter value of n causes n empty characters to be inserted.  Data on the Active Line from the Active Column to the Right Margin is shifted forward as in character insertion.  Characters shifted beyond the Right Margin are lost.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The extent of the display affected by execution of this control is limited to the Active Line within the left and right margins.  Data which is shifted beyond the Right Margin is lost.</p></li>
<li><p>If the active position is outside the left or right margin, this control is ignored.</p></li>
<li><p>The Active Position is not affected by execution of this control.</p></li>
<li><p>Execution of this control is not affected by the setting of Insert/Replacement Mode.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<a id="5-143" data-page="5-143"></a>
<p><em>Algorithm:</em></p>
<pre><code>void insert_character(parv)
  int parv[MAX_NUM_PARAMETERS];
{
  column_t x;
  short int line;    /* actual line in logical display */
  short int margin;  /* effective right boundary */
  short int n;
/*.......................*/

/* ignore if we're outside the scrolling area */
if ( (active_position.line >= bottom_margin) &amp;&amp;
     (active_position.line &lt;= top_margin)    &amp;&amp;
     (active_position.column >= left_margin) &amp;&amp;
     (active_position.column &lt;= right_margin)  )
  {
  line = (active_position.page * lines_per_page) +
          active_position.line;
  /* determine right boundary for shifting characters */
  if (right_margin &lt; end_of_line(line))
    margin = right_margin;
  else
    margin = end_of_line(line);

  if (parv[0] == 0) n = 1;
  else n = parv[0];
  if ((active_position.column + n) > margin)
    n = margin - active_position.column + 1;

  /* make room for characters to be inserted */
  for ( x=margin;
        x > active_position.column + n;
        x-- )
    strncpy( display[line][x], display[line][x-n],
             sizeof(character_t) );
  for (x=1; x&lt;=n; x++)
    {
    display[line][active_position.column+(x-1)].code =
      EMPTY_CHARACTER;
    }
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-144" data-page="5-144"></a>
<section id="DCH">
<h4>Delete Character <span>&mdash;</span> DCH</h4>
<p><em>Levels:</em> 1X, 2-4</p>
<p><em>Purpose:</em> Delete characters at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      P               default Pn: 1
9/11    Pn      5/0</samp></pre>
</div>
<p><em>Description:</em> The DCH control causes characters to be deleted at the Active Position.  A parameter value of zero or one causes a single character to be deleted.  A parameter value of n causes n characters to be deleted.  Data on the Active Line between the Active Column and Right Margin is shifted left to close up the deleted character positions, and empty characters are inserted at the Right Margin to accommodate the shift.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The DCH control is part of the Level 1 Editing Extension.  This extension is required in all new Level 1 implementations.  It is a required function in Level 2.</p></li>
<li><p>The extent of the display affected by execution of this control is limited to the Active Line within the left and right margins.</p></li>
<li><p>If the Active Position is outside the left or right margins, this control is ignored.</p></li>
<li><p>The Active Position is not affected by execution of this control.</p></li>
<li><p>Execution of this control is not affected by the setting of Insert/Replacement Mode.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<a id="5-145" data-page="5-145"></a>
<p><em>Algorithm:</em></p>
<pre><code>void delete_character(parv)
  int parv[MAX_NUM_PARAMETERS];
{
  column_t x;
  short int line;    /* actual line in logical display */
  short int margin;  /* effective right boundary */
  short int n;
/*.......................*/

/* ignore if we're outside left or right margin */
if ( (active_position.column >= left_margin) &amp;&amp;
     (active_position.column &lt;= right_margin)  )
  {
  line = (active_position.page * lines_per_page) +
          active_position.line;
  /* determine right boundary for shifting characters */
  if (right_margin &lt; end_of_line(line))
    margin = right_margin;
  else
    margin = end_of_line(line);

  if (parv[0] == 0) n = 1;
  else n = parv[0];
  if ((active_position.column + n) > margin)
    n = margin - active_position.column + 1;

  /* make delete characters */
  for ( x=active_position.column;
        x &lt;= margin-n;
        x++ )
    strncpy( display[line][x], display[line][x+n],
             sizeof(character_t) );
  for (x=1; x&lt;=n; x++)
    {
    display[line][margin-(x-1)].code =
      EMPTY_CHARACTER;
    }
  }  /* end active position within the left and right margins */
} /* end delete_character() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-146" data-page="5-146"></a>
<section id="IL">
<h4>Insert Line <span>&mdash;</span> IL</h4>
<p><em>Levels:</em> 1x, 2-4</p>
<p><em>Purpose:</em> Insert lines of empty characters at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      L               default Pn: 1
9/11    Pn      4/12</samp></pre>
</div>
<p><em>Description:</em> The IL control causes lines of empty characters to be inserted at the Active Position.  A parameter value of zero or one causes a single line to be inserted.  A parameter value of n causes n lines to be inserted.  Data in the display is scrolled downward to the Bottom Margin from the active line to accommodate the insertion.  Only that portion of the display between the top, bottom, left, and right margins is affected.  IL is ignored if the Active Position is outside the Scroll Area.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The IL control is part of the Level l Editing Extension.  This extension is required in all new Level 1 implementations.  It is a required function in Level 2.</p></li>
<li><p>The Active Position is set to the Left Margin in the active line after execution of this control.  The active line does not change.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
</ul>
<a id="5-147" data-page="5-147"></a>
<p><em>Algorithm:</em></p>
<pre><code>void insert_line(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
/*......................*/
/* ignore if we're outside the scrolling area */
if ( (active_position.line >= bottom_margin) &amp;&amp;
     (active_position.line &lt;= top_margin)    &amp;&amp;
     (active_position.column >= left_margin) &amp;&amp;
     (active_position.column &lt;= right_margin)  )
  {
  if (parv[0] == 0) n = 1;
  else n = parv[0];
  if ((active_position.line + n) > bottom_margin)
    n = (bottom_margin - active_position.line) + 1;
  scroll_down(active_position.line, n);
  active_position.column = left_margin;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-148" data-page="5-148"></a>
<section id="DL">
<h4>Delete Line <span>&mdash;</span> DL</h4>
<p><em>Levels:</em> 1x, 2-4</p>
<p><em>Purpose:</em> Delete lines at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      M               default Pn: 1
9/11    Pn      4/13</samp></pre>
</div>
<p><em>Description:</em> The DL control causes lines of characters to be deleted at the Active Position.  A parameter value of zero or one causes a single line to be deleted.  A parameter value of n causes n lines to be deleted.  Data in the display is scrolled upward from the Bottom Margin to the active line to accommodate the deletion.  Only that portion of the display between the top, bottom, left, and right margins is affected.  DL is ignored if the active position is outside the scroll area.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The DL control is part of the Level 1 Editing Extension.  This extension is required in all new Level 1 implementations.  It is a required function in Level 2.</p></li>
<li><p>The Active Position is set to the Left Margin in the active line after execution of this control.  The active line does not change.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
<li><code>active_position</code></li>
</ul>
<a id="5-149" data-page="5-149"></a>
<p><em>Algorithm:</em></p>
<pre><code>void delete_line(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
/*......................*/
/* ignore if we're outside the scrolling area */
if ( (active_position.line >= bottom_margin) &amp;&amp;
     (active_position.line &lt;= top_margin)    &amp;&amp;
     (active_position.column >= left_margin) &amp;&amp;
     (active_position.column &lt;= right_margin)  )
  {
  if (parv[0] == 0) n = 1;
  else n = parv[0];
  if ((active_position.line + n) > bottom_margin)
    n = (bottom_margin - active_position.line) + 1;
  scroll_up(active_position.line, n);
  active_position.column = left_margin;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-150" data-page="5-150"></a>
<section id="DECIC">
<h4>Insert Column <span>&mdash;</span> DECIC</h4>
<p><em>Level:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Insert columns of empty characters at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI    Pn    '    }          default Pn: 1
9/11   Pn    2/7  7/13</samp></pre>
</div>
<p><em>Description:</em> The DECIC control causes Pn columns to be inserted at the active column position.  The contents of the display are shifted to the right from the active column to the right margin.  The inserted columns are set to blank with normal rendition.  Only that portion of the display between the top, bottom, left, and right margins is affected.  DECIC is ignored if the active position is outside the Scroll Area.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>/* routine insert_column(parv) to be supplied */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-151" data-page="5-151"></a>
<section id="DECDC">
<h4>Delete Column <span>&mdash;</span> DECDC</h4>
<p><em>Level:</em> 4x (Horizontal Scrolling)</p>
<p><em>Purpose:</em> Delete columns at the Active Position</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI    Pn    '    ~          default Pn: 1
9/11   Pn    2/7  7/14</samp></pre>
</div>
<p><em>Description:</em> The DECDC control causes Pn columns to be deleted at the active column position.  The contents of the display are shifted to the left from the right margin to the active column.  Columns containing blank characters with normal rendition are shifted into the display from the right margin.  Only that portion of the display between the top, bottom, left, and right margins is affected.  DECDC is ignored if the active position is outside the Scroll Area.</p>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>/* routine delete_column(parv) to be supplied */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-152" data-page="5-152"></a>
<section id="ECH">
<h4>Erase Character <span>&mdash;</span> ECH</h4>
<p><em>Levels:</em> 2-4</p>
<p><em>Purpose:</em> Erase characters at the Active Position.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Pn      X               default Pn: 1
9/11    Pn      5/8</samp></pre>
</div>
<p><em>Description:</em> The ECH control causes the character at the Active Position and the next n-1 characters to be erased and their attributes set to normal.  A parameter value of zero causes a single character to be erased.  No reformatting of data on the line occurs, and the Active Position does not move.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The extent of the display affected by execution of this control is limited to the Active Line.  If a parameter value is given which is greater than the distance from the Active Position to the end of the Active Line, only character positions up to the end of the Active Line will be erased.  This control is not affected by the margins.</p></li>
<li><p>Execution of this control is not affected by the setting of Insert/Replacement Mode.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<a id="5-153" data-page="5-153"></a>
<p><em>Algorithm:</em></p>
<pre><code>void erase_character(parv)
  short int parv[MAX_NUM_PARAMETERS];
{
  column_t x;
  short int line;  /* actual line in logical display */
  short int n;
/*.........*/
line = active_position.page * lines_per_page +
       active_position.line;
if (parv[0] == 0) n = 1;
else n = parv[0];
if ((active_position.line + n) > end_of_line(line))
  n = (end_of_line(line) - active_position.column) + 1;
for (x=active_position.column;
     x &lt;= active_position.column + (n-1);
     x++)
  {
  display[line][x].code = EMPTY_CHARACTER;
  }
}
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-154" data-page="5-154"></a>
<section id="EL">
<h4>Erase In Line <span>&mdash;</span> EL</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Erase character positions within the Active Line.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Ps      K               default Ps: 0
9/11    Ps      4/11</samp></pre>
</div>
<p><em>Description:</em> The EL control causes a set of adjacent character positions in the Active Line to be set to the empty state, that is the empty character (imaged as SPACE), the empty rendition, and the empty character attribute.  The set of character positions affected by this control is determined by the parameter value.  An omitted parameter or a value of zero (0) cause the control to affect character positions from the Active Column to the end of the Active Line (inclusive).  A parameter value of one (1) causes the control to affect character positions from the beginning of the Active Line to the Active Column (inclusive).  A parameter value of two (2) causes the control to affect all character positions in the Active Line (inclusive).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The line renditon is not affected by execution of this control.</p></li>
<li><p>The syntax of the EL control is identical to the Selective Erase in Line (DECSEL) control, except that DECSEL includes a private parameter specifier ?  (3/15).</p></li>
<li><p>This control is not affected by the margins.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
</ul>
<a id="5-155" data-page="5-155"></a>
<p><em>Algorithm:</em></p>
<pre><code>/*
 * erase_in_line
 *   both standard and selective_erase
 */
void erase_in_line(parc, parv, private)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
  boolean_t private;
{
  column_t x;
  short int line;  /* actual line in logical display */
  short int n;
/*................*/
if (private) selective_erase_in_line(parc, parv);
else
  {
  line = active_position.page * lines_per_page +
         active_position.line;
  if (parc == 0) parc = 1;
  for (n=0; n&lt;parc; n++)
    {
    switch(parv[n])
      {
      case 0:
        for (x=active_position.column;
             x &lt;= end_of_line(line); x++)
          display[line][x].code = EMPTY_CHARACTER;
        break;
      case 1:
        for (x=1; x&lt;=active_position.column; x++)
          display[line][x].code = EMPTY_CHARACTER;
        break;
      case 2:
        for (x=1; x&lt;=end_of_line(line); x++)
          display[line][x].code = EMPTY_CHARACTER;
        break;
      }
    }
  }
}    /* end erase_in_line() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-156" data-page="5-156"></a>
<section id="ED">
<h4>Erase In Display <span>&mdash;</span> ED</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Erase character positions within the display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Ps      J               default Ps: 0
9/11    Ps      4/10</samp></pre>
</div>
<p><em>Description:</em> The ED control causes a set of adjacent character positions (extending across line boundaries) in the display to be set to the empty state.  That is the empty character (imaged as SPACE), the empty rendition, and the empty character attribute.  The set of character positions affected by this control is determined by the parameter value.  An omitted parameter or a value of zero (0) cause the control to affect character positions from the Active Position to the end of the bottom line in the display (inclusive).  A parameter value of one (1) causes the control to affect character positions from the beginning of the first line of the display to the Active Position (inclusive).  A parameter value of two (2) causes the control to affect all character positions in the display (inclusive).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The Line Renditions of all lines completely erased (all character positions in the line set to the erased state, that is, empty characters) as a result of execution of this control are set to single-width.</p></li>
<li><p>This control affects the entire display and is not affected by the setting of the scrolling region or the setting of Origin Mode.</p></li>
<li><p>The syntax of the ED control is identical to the Selective Erase in Display (DECSED) control, except that DECSED includes a private parameter specifier ?  (3/15).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
</ul>
<a id="5-157" data-page="5-157"></a>
<p><em>Algorithm:</em></p>
<pre><code>/*
 * erase_in_display
 *   both standard and selective_erase
 */
void erase_in_display(parc, parv, private)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
  boolean_t private;
{
  line_t y;
  column_t x;
  short int base;  /* first line(-1) of current page */
  short int line;  /* actual line in logical display */
  short int n;
/*................*/
if (private) selective_erase_in_display(parc, parv);
else
  {
  base = (active_position.page-1) * lines_per_page;
  line = base + active_position.line;
  if (parc == 0) parc = 1;
  for (n=0; n&lt;parc; n++)
    {
    switch(parv[n])
      {
      case 0:  /* erase to end of display */
        for (x=active_position.column;
             x &lt;= end_of_line(line); x++)
          display[line][x].code = EMPTY_CHARACTER;
        if (active_position.column = 1)
          line_rendition[line] = SINGLE_WIDTH;
        for (y=line+1; y&lt;(base+lines_per_page); y++)
          {
          for (x=1; x&lt;=end_of_line(y); x++)
            {
            display[y][x].code = EMPTY_CHARACTER;
            line_rendition[y] = SINGLE_WIDTH;
            }
          }
        break;
      case 1:  /* erase from beginning of display */
        for (y=1; y&lt;(base+line); y++)
          {
          for (x=1; x&lt;=end_of_line(y); x++)
            {
            display[y][x].code = EMPTY_CHARACTER;
            line_rendition[y] = SINGLE_WIDTH;
            }
          }
        for (x=1; x&lt;=active_position.column; x++)
          display[line][x].code = EMPTY_CHARACTER;
<a id="5-158" data-page="5-158"></a>        if (active_position.column = end_of_line(line))
          line_rendition[line] = SINGLE_WIDTH;
        break;
      case 2:  /* erase entire display */
        for (y=1; y&lt;(base+lines_per_page); y++)
          {
          for (x=1; x&lt;=end_of_line(y); x++)
            {
            display[y][x].code = EMPTY_CHARACTER;
            line_rendition[y] = SINGLE_WIDTH;
            }
          }
        break;
      }
    }
  }  /* end not private */
}    /* end erase_in_display() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-159" data-page="5-159"></a>
<section id="DECSEL">
<h4>Selective Erase In Line <span>&mdash;</span> DECSEL</h4>
<p><em>Levels:</em> 2x, 3x, 4x (Selective Erase)</p>
<p><em>Purpose:</em> Change character positions within the Active Line which have the Selectively Erasable attribute to the Space character (2/0).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     ?       Ps      K       default Ps: 0
9/11    3/15    Ps      4/11</samp></pre>
</div>
<p><em>Description:</em> The DECSEL control causes a set of adjacent character positions in the Active Line which have the attribute "Selectively Erasable" to be changed to the Space character (2/0).  The character rendition and attributes associated with each position do not change.  Characters which have been entered into the display with the Selectively Erasable attribute reset (Not Selectively Erasable), as well as empty character positions, are not affected by this control, and no reformatting of the data will occur.</p>
<p>The set of character positions affected by this control is determined by the parameter value.  An omitted parameter or a value of zero (0) cause the control to affect character positions from the Active Column to the end of the Active Line (inclusive).  A parameter value of one (1) causes the control to affect character positions from the beginning of the Active Line to the Active Column (inclusive).  A parameter value of two (2) causes the control to affect all character positions in the Active Line (inclusive).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Use of this control permits efficient "clearing" of parts of the screen while leaving other parts alone, such as in form filling applications.  (See Select Character Attribute, DECSCA, for a description of how to invoke the selectively erasable character attribute).  This capability is an extension to Level 2 and so is not available in all Level 2 terminals.</p></li>
<li><p>This control is only executed if the Level 2 extension Selectively Erasable Characters is supported.  In Level 1 operation and in other Level 2 devices it will be ignored.</p></li>
<li><p>The Line Rendition is not affected by execution of this control.</p><a id="5-160" data-page="5-160"></a></li>
<li><p>The syntax of the DECSEL control is identical to the Erase in Line (EL) control, except that DECSEL includes a private parameter specifier ?  (3/15).</p></li>
<li><p>This control is not affected by the margins.</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void selective_erase_in_line(parc, parv)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
{
  column_t x;
  short int line;  /* actual line in logical display */
  short int n;
/*................*/
line = active_position.page * lines_per_page +
       active_position.line;
if (parc == 0) parc = 1;
for (n=0; n&lt;parc; n++)
  {
  switch(parv[n])
    {
    case 0:
      for (x=active_position.column;
           x &lt;= end_of_line(line); x++)
        {
        if (display[line][x].attribute.selective_erase)
          display[line][x].code = 32;  /* Space */
        }
      break;
    case 1:
      for (x=1; x&lt;=active_position.column; x++)
        {
        if (display[line][x].attribute.selective_erase)
          display[line][x].code = 32;  /* Space */
        }
      break;
    case 2:
      for (x=1; x&lt;=end_of_line(line); x++)
        {
        if (display[line][x].attribute.selective_erase)
          display[line][x].code = 32;  /* Space */
        }
      break;
    }
  }
<a id="5-161" data-page="5-161"></a>}    /* end selective erase_in_line() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-162" data-page="5-162"></a>
<section id="DECSED">
<h4>Selective Erase In Display <span>&mdash;</span> DECSED</h4>
<p><em>Levels:</em> 2x, 3x, 4x (Selective Erase)</p>
<p><em>Purpose:</em> Change character positions within the display which have the Selectively Erasable attribute to the Space character (2/0).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     ?       Ps      J       default Ps: 0
9/11    3/15    Ps      4/10</samp></pre>
</div>
<p><em>Description:</em> The DECSED control causes a set of adjacent character positions in the display which have the attribute "Selectively Erasable" to be changed to the Space character (2/0).  The character rendition and attributes associated with each position do not change.  Characters which have been entered into the display with the Selectively Erasable attribute reset (Not Selectively Erasable), as well as empty character positions, are not affected by this control, and no reformatting of the data will occur.</p>
<p>The set of character positions affected by this control is determined by the parameter value.  An omitted parameter or a value of zero (0) cause the control to affect character positions from the Active Position to the end of the bottom line in the display (inclusive).  A parameter value of one (1) causes the control to affect character positions from the beginning of the first line of the display to the Active Position (inclusive).  A parameter value of two (2) causes the control to affect all character positions in the display (inclusive).</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Use of this control permits efficient "clearing" of parts of the display while leaving other parts alone, such as in form filling applications.  (See Select Character Attribute, DECSCA, for a description of how to invoke the selectively erasable character attribute).</p></li>
<li><p>This control is only executed if the Level 2 extension Selectively Erasable Characters is supported.  In Level 1 operation and in other Level 2 devices it will be ignored.</p></li>
<li><p>The Line Renditions of all lines are not affected by execution of this control.</p></li>
<li><p>This control affects the entire display and is not affected by the setting of the scrolling region or the setting of Origin Mode.</p><a id="5-163" data-page="5-163"></a></li>
<li><p>The syntax of the DECSED control is identical to the Erase in Display (ED) control, except that DECSED includes a private parameter specifier ?  (3/15).</p></li>
</ol>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
<li><code>line_rendition[MAX_NUM_LINES]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void selective_erase_in_display(parc, parv)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
{
  line_t y;
  column_t x;
  short int base;  /* first line(-1) of current page */
  short int line;  /* actual line in logical display */
  short int n;
/*................*/
base = (active_position.page-1) * lines_per_page;
line = base + active_position.line;
if (parc == 0) parc = 1;
for (n=0; n&lt;parc; n++)
  {
  switch(parv[n])
    {
    case 0:  /* erase to end of display */
      for (x=active_position.column;
           x &lt;= end_of_line(line); x++)
        {
        if (display[line][x].attribute.selective_erase)
          display[line][x].code = 32;  /* Space */
        }
      if (active_position.column = 1)
        line_rendition[line] = SINGLE_WIDTH;
      for (y=line+1; y&lt;(base+lines_per_page); y++)
        {
        for (x=1; x&lt;=end_of_line(y); x++)
          {
          if (display[y][x].attribute.selective_erase)
            display[y][x].code = 32;  /* Space */
          }
        }
      break;
    case 1:  /* erase from beginning of display */
      for (y=1; y&lt;(base+line); y++)
<a id="5-164" data-page="5-164"></a>        {
        for (x=1; x&lt;=end_of_line(y); x++)
          {
          if (display[y][x].attribute.selective_erase)
            display[y][x].code = 32;  /* Space */
          }
        }
      for (x=1; x&lt;=active_position.column; x++)
        {
        if (display[line][x].attribute.selective_erase)
          display[line][x].code = 32;  /* Space */
        }
      if (active_position.column = end_of_line(line))
        line_rendition[line] = SINGLE_WIDTH;
      break;
    case 2:  /* erase entire display */
      for (y=1; y&lt;(base+lines_per_page); y++)
        {
        for (x=1; x&lt;=end_of_line(y); x++)
          {
          if (display[y][x].attribute.selective_erase)
            display[y][x].code = 32;  /* Space */
          }
        }
      break;
    }
  }
}    /* end selective_erase_in_display() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-165" data-page="5-165"></a>
<section id="5.11.1">
<h3>5.11.1  Character Attributes</h3>
<p>Each character cell in the display may also have logical (non-&NoBreak;visual) attribute associated with it, which affect its characteristics when processed or retransmitted by the terminal.  These attributes can be combined in any manner for each character position independently.  The architecture requires that each character attribute and every character attribute combination to have effect individually and independently from every other character attribute and character rendition (see previous section).  Character attributes apply to all graphic characters codes (2/1 to 7/14 inclusive, and 10/1 to 15/14 inclusive) as well as to the Space character (2/0).</p>
<section id="5.11.1.1">
<h4>5.11.1.1  Normal Character Attribute</h4>
<p>The Normal character attribute defines the non-visible attributes in the physical display in its "natural" state, that is, where the character behaves with no special non-visible attributes.</p>
</section>
<section id="5.11.1.2">
<h4>5.11.1.2  Selectively Erasable Character Attribute</h4>
<p>One logical attribute may be applied to characters as a Level 2 or higher extension.  This attribute is referred to as "Selectively Erasable Character".  When this extension is provided, the terminal will recognize two forms of the commands Erase_In_Line and Erase_In_Display:  one in which all characters in the given extent are erased, regardless of their logical attributes, and another in which all character in the given extent which have been assigned the Selectively Erasable Character attribute are turned into Space characters (2/0).  (See the Select Character Attribute, Erase In Line, and Erase In Display control functions for a complete description of this feature).</p>
</section>
<a id="5-166" data-page="5-166"></a>
<section id="DECSCA">
<h4>Select Character Attribute <span>&mdash;</span> DECSCA</h4>
<p><em>Levels:</em> 2x, 3x, 4x (Selective Erase)</p>
<p><em>Purpose:</em> Designate the character attribute(s) to be applied to all subsequent characters entered into the display.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI     Ps ; ... ; Ps   "   q       default Ps: 0
9/11    Ps ; ... ; Ps   2/2 7/1</samp></pre>
</div>
<p><em>Description:</em> The DECSCA control selects the character attribute (logical attribute) to be applied to all subsequent characters entered into the display.  The parameter values indicate the combination of attributes to be selected as indicated in the following table:</p>
<table>
<thead>
<tr><th>Parameter</th><th>Rendition</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Attributes off</td></tr>
<tr><td>1</td><td>Not Selectively Erasable
(attribute on)</td></tr>
<tr><td>2</td><td>Selectively Erasable</td></tr>
</tbody>
</table>
<p><em>Notes:</em></p>
<ol>
<li><p>Character attribute parameter values are assigned in pairs.  The lower (odd) value sets the attribute to the on state and the higher (even) value resets the attribute to the off state (same as normal or when all attributes are turned off (value 0).</p></li>
<li><p>All other parameter values will be ignored.</p></li>
<li><p>Attributes may be selected in any combination, and will be rendered appropriately.  Selecting additional attributes does not affect the setting of previously selected attributes (newly selected attributes will be combined with previously selected attributes) unless all attributes are turned off (parameter value zero (0)).</p></li>
<li><p>In no way does the selection of attributes affect the rendition (SGR) or attributes (DECSCA) of characters already entered into the display.</p></li>
<li><p>This control is ignored unless the Level 2 or higher extension for Selectively Erasable Characters is supported.  The Selectively Erasable Character attribute affects the execution of the controls Selective Erase In Line (DECSEL) and Selective Erase In Display (DECSED).</p></li>
</ol>
<a id="5-167" data-page="5-167"></a>
<p><em>State Affected:</em></p>
<ul>
<li><code>display[MAX_NUM_LINES][MAX_NUM_COLUMNS]</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void select_character_attribute(parc, parv)
  short int parc;
  short int parv[MAX_NUM_PARAMETERS];
{
  short int n;
/*................*/
if (conformance_level >= 2)
  {
  if (parc == 0) parc = 1;
  for (n=0; n&lt;parc; n++)
    {
    switch(parv[n])
      {
      case 0:
        current_attribute.selective_erase = TRUE;
        break;
      case 1:
        current_attribute.selective_erase = FALSE;
        break;
      case 2:
        current_attribute.selective_erase = TRUE;
        break;
      }
    }
  }
} /* end select_character_attribute() */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
</section>
</section>
<a id="5-168" data-page="5-168"></a>
<section id="5.12">
<h2>5.12  OLTP Features</h2>
<p>This subsection describes features defined at Level 4 to improve performance for On Line Transaction Processing (OLTP).  These include Rectangular Area Operations, Data Integrity Checking, and Text Macros.</p>
<section id="5.12.1">
<h3>5.12.1  Rectangular Area Operations</h3>
<p>This subsection describes the following functions used to edit data, or control editing of rectangular areas in the Logical Display.</p>
<ul>
<li><a href="#DECCRA">DECCRA<span> &mdash; </span>Copy Rectangular Area</a></li>
<li><a href="#DECFRA">DECFRA<span> &mdash; </span>Fill Rectangular Area</a></li>
<li><a href="#DECERA">DECERA<span> &mdash; </span>Erase Rectangular Area</a></li>
<li><a href="#DECSERA">DECSERA<span> &mdash; </span>Selective Erase Rectangular Area</a></li>
<li><a href="#DECCARA">DECCARA<span> &mdash; </span>Change Att In Rectangular Area</a></li>
<li><a href="#DECRARA">DECRARA<span> &mdash; </span>Reverse Attributes Rectangular Area</a></li>
<li><a href="#DECSACE">DECSACE<span> &mdash; </span>Select Attribute Change Extent</a></li>
</ul>
<a id="5-169" data-page="5-169"></a>
<section id="DECCRA">
<h4>Copy Rectangular Area <span>&mdash;</span> DECCRA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To copy a rectangular array of characters from one part of a logical display page to another.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pts; Pls; Pbs; Prs; Pps; Ptd; Pld; Ppd  $    v
9/11  Pts; Pls; Pbs; Prs; Pps; Ptd; Pld; Ppd  2/4  7/6</samp></pre>
</div>
<p><em>Description:</em> When this control is received, the terminal copies the character values and attributes in the specified rectangular area of character positions defined by Pts, Pls, Pbs, and Prs on the specified page Pps, to the area specified by the coordinate Ptd, Pld on the specified page Ppd.  Pts, Pbs, and Ptd are line numbers.  Pls, Prs, and Pld are column numbers.  Pps and Ppd are page numbers.  The character positions (Pts, Pls) and (Pbs, Prs) define the rectangular area that is to be copied from page Pps.</p>
<p>The coordinates of the rectangular area are affected by the setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>If the rectangular area contains both single and double width lines, the area copied FROM may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then characters 5 through 10 from all lines within the rectangular area will be copied whether they are single width or double width characters.  Text copied to the destination area take on the line attributes of that area.</p>
<p>Pts must be less or equal to Pbs, and Pls must be less than or equal to Prs, otherwise the entire control function is ignored.  Default values are Pts = 1, Pls = 1, Pbs = last-line-of-page, Prs = last-column-of-page, Pps = 1, Ptd = 1, Pld = 1, and Ppd = 1.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.  If a page value exceeds the number of pages available in the current Page Configuration, it is treated as the last page in the current configuration.</p>
<p>If the destination rectangle specified is partially off of the Page, clipping of information will occur; only information which will appear in valid character positions in the page will be copied.</p>
<p>The Active Position does not change.</p>
</section>
<a id="5-170" data-page="5-170"></a>
<section id="DECFRA">
<h4>Fill Rectangular Area <span>&mdash;</span> DECFRA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To fill a group of adjacent character positions defined by a rectangular area.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pch ; Pt ; Pl ; Pb ; Pr  $    x
9/11  Pch ; Pt ; Pl ; Pb ; Pr  2/4  7/8</samp></pre>
</div>
<p><em>Description:</em> When this control is received, the terminal fills the rectangular area of character positions defined by Pt, Pl, Pb, and Pr, replacing both the character and the rendition present in those character positions with the character defined by the decimal value of Pch and the current renditions set through the SGR command.</p>
<p>The Pch parameter may be a decimal value from 32 to 126, or from 160 to 255.  The decimal value refers to the character in the current GL and GR "in-use" character table, which is used to fill the specified rectangular area.  If the value of Pch is not in the above range, the command is ignored.</p>
<p>Pt and Pb are line numbers, and Pl and Pr are column numbers.  The character positions (Pt, Pl) and (Pb, Pr) define the rectangular area.</p>
<p>The coordinates of the rectangular area are affected by the setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>Pt must be less or equal to Pb, and Pl must be less than or equal to Pr, otherwise the entire control function is ignored.  Default values are Pch = 32, Pt = 1, Pb = last-line-of-page, Pl = 1, and Pr = last-column-of-page.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.</p>
<p><em>Notes on DECFRA:</em></p>
<ol>
<li><p>If the rectangular area contains both single and double width lines, the area affected may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then all lines within the rectangular area, whether single or double width, will have character positions 5 through 10 affected.</p></li>
<li><p>DECFRA does not change any line attributes.  Double height or double width characters will be filled into positions on lines containing those attributes.  The Active Position does not move.</p></li>
</ol>
</section>
<a id="5-171" data-page="5-171"></a>
<section id="DECERA">
<h4>Erase Rectangular Area <span>&mdash;</span> DECERA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To erase a group of adjacent characters defined by a rectangular area.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pt ; Pl ; Pb ; Pr  $    z
9/11  Pt ; Pl ; Pb ; Pr  2/4  7/10</samp></pre>
</div>
<p><em>Description:</em> When this control is received, the terminal erases the rectangular area of character positions defined by Pt, Pl, Pb, and Pr, clearing all character attributes.  Line attributes are not changed.  When an area is erased, all characters are replaced with the Space character (2/0).  Any unoccupied character positions remain unoccupied.  The Active Position does not move.</p>
<p>Pt and Pb are line numbers, and Pl and Pr are column numbers.  The character positions (Pt, Pl) and (Pb, Pr) define the rectangular area.</p>
<p>The coordinates of the rectangular area are affected by the setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>Pt must be less or equal to Pb, and Pl must be less than or equal to Pr, otherwise the entire control function is ignored.  Default values are Pt = 1, Pb = last-line-of-page, Pl = 1, and Pr = last-&NoBreak;column-of-page.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.</p>
<p><em>Notes on DECERA:</em></p>
<ol>
<li><p>If the rectangular area contains both single and double width lines, the area affected may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then all lines within the rectangular area, whether single or double width, will have character positions 5 through 10 affected.</p></li>
</ol>
</section>
<a id="5-172" data-page="5-172"></a>
<section id="DECSERA">
<h4>Selective Erase Rectangular Area <span>&mdash;</span> DECSERA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To erase a group of unprotected characters defined by a rectangular area.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pt ; Pl ; Pb ; Pr  $    {
9/11  Pt ; Pl ; Pb ; Pr  2/4  7/11</samp></pre>
</div>
<p><em>Description:</em> This control function erases unprotected characters within the rectangular area of character positions defined by Pt, Pl, Pb, and Pr.  Unprotected characters are those with the "Selective Erase" character attribute (see DECSCA).  When a character is erased, it is replaced with the Space character (2/0).  Unoccupied character positions are not affected.  This sequence does not change or clear any video character attributes (SGR or DECSCA), video line attributes, or the selection attribute.  The active position does not move.</p>
<p>Pt and Pb are line numbers, and Pl and Pr are column numbers.  The character positions (Pt, Pl) and (Pb, Pr) define the rectangular area.</p>
<p>The coordinates of the rectangular area are affected by the setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>Pt must be less or equal to Pb, and Pl must be less than or equal to Pr, otherwise the entire control function is ignored.  Default values are Pt = 1, Pb = last-line-of-page, Pl = 1, and Pr = last-&NoBreak;column-of-page.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.</p>
<p><em>Notes on DECSERA:</em></p>
<ol>
<li><p>If the rectangular area contains both single and double width lines, the area affected may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then all lines within the rectangular area, whether single or double width, will have character positions 5 through 10 affected.</p></li>
</ol>
</section>
<a id="5-173" data-page="5-173"></a>
<section id="DECCARA">
<h4>Change Attributes Rectangular Area <span>&mdash;</span> DECCARA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To change the character rendition of a group of adjacent characters without having to re-write them.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pt ; Pl ; Pb ; Pr ; Ps1 ; Ps2...Psn  $    r
9/11  Pt ; Pl ; Pb ; Pr ; Ps1 ; Ps2...Psn  2/4  7/2</samp></pre>
</div>
<p><em>Description:</em> This sequence changes the video attributes (bold, blink, underline, and reverse) for all of the character positions in a rectangular area without altering any characters in those positions.  The active position does not move.</p>
<p>The area of the page which is affected is indicated by the first 4 parameters.  Pt and Pb are line numbers; Pl and Pr are column numbers.  The character positions (Pt, Pl) and (Pb, Pr) define the top-left and bottom-right corners of the rectangular area.  Pt must be less than or equal to Pb, and Pl must be less than or equal to Pr.  Default values are Pt = 1, Pb = last-line-of-page, Pl = 1, and Pr = last-column-of-page.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.</p>
<p>The coordinates of the rectangular area are affected by the current setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>The character positions affected depend on the current setting of DECSACE (STREAM or RECTANGLE).  See DECSACE for details.</p>
<p>The video attribute(s) that the character positions are set to is indicated by one or more subsequent selective parameters.  These parameters correspond to the parameters of the Set Graphic Rendition control function (SGR):</p>
<table>
<thead>
<tr><th>Parameter</th><th>Parameter Meaning</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Attributes off (normal intensity,
positive image, not underlined,
not blinking)</td></tr>
<tr><td>1</td><td>Bold or increase intensity</td></tr>
<tr><td>4</td><td>Underscore</td></tr>
<tr><td>5</td><td>Blink</td></tr>
<tr><td>7</td><td>Negative (reverse) image</td></tr>
<tr><td>22</td><td>Normal intensity</td></tr>
<tr><td>24</td><td>Not underlined</td></tr>
<tr><td>25</td><td>Not blinking</td></tr>
<tr><td>27</td><td>Positive image</td></tr>
</tbody>
</table>
<a id="5-174" data-page="5-174"></a>
<p>All other parameter values shall be ignored unless they are part of a well defined extension to the architecture (such as Color Text).  When multiple parameters are used, they are cumulative, as if several DECCARA control functions were received and executed in sequence.</p>
<p>The default for the video attribute parameters, if no valid subsequent parameter is received, is 0, which will clear all video attributes in the specified area.  This command does not change the current graphic rendition.</p>
<p><em>Notes on DECCARA:</em></p>
<ol>
<li><p>If the rectangular area contains both single and double width lines, the area affected may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then all lines within the rectangular area, whether single or double width, will have character positions 5 through 10 affected.</p></li>
</ol>
</section>
<a id="5-175" data-page="5-175"></a>
<section id="DECRARA">
<h4>Reverse Attributes Rectangular Area <span>&mdash;</span> DECRARA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To reverse character attributes of a group of adjacent characters without having to re-write them.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pt ; Pl ; Pb ; Pr ; Ps1 ; Ps2...Psn  $    t
9/11  Pt ; Pl ; Pb ; Pr ; Ps1 ; Ps2...Psn  2/4  7/4</samp></pre>
</div>
<p><em>Description:</em> This sequence reverses one or more video attributes (bold, blink, underline, reverse) for all of the character positions in a rectangular area without altering any characters in those positions.  The active position does not move.  To reverse the attribute bit within the specified range means to set the specified attribute bits if it was not previously set, and reset the bit(s) if it was already set.</p>
<p>The area of the page which is affected is indicated by the first 4 parameters.  Pt and Pb are line numbers; Pl and Pr are column numbers.  The character positions (Pt, Pl) and (Pb, Pr) define the top-left and bottom-right corners of the rectangular area.</p>
<p>The coordinates of the rectangular area are affected by the setting of Origin Mode.  This control is not otherwise affected by the margins.</p>
<p>The character positions affected depend on the current setting of DECSACE (STREAM or RECTANGLE).  See DECSACE for more details.</p>
<p>Pt must be less or equal to Pb, and Pl must be less than or equal to Pr, otherwise the entire control function is ignored.  Default values are Pt = 1, Pb = last-line-of-page, Pl = 1, and Pr = last-&NoBreak;column-of-page.  If a value exceeds the width or height of the active page, it is treated as the width or height of the active page.</p>
<p>The video attribute(s) to be reversed are in the affected area are indicated by one or more subsequent parameters.  These parameters are similar to the parameters of the Set Graphic Rendition control function (SGR):</p>
<table>
<thead>
<tr><th>Parameter</th><th>Parameter Meaning</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Reverse all attributes</td></tr>
<tr><td>1</td><td>Reverse bold attribute</td></tr>
<tr><td>4</td><td>Reverse underscore attribute</td></tr>
<tr><td>5</td><td>Reverse blinking attribute</td></tr>
<tr><td>7</td><td>Reverse negative (reverse) image attribute</td></tr>
</tbody>
</table>
<p>All other parameter values shall be ignored unless they are part <a id="5-176" data-page="5-176"></a>of a well defined extension to the architecture.  Note if the Color Text Extension is present, the color text SGR values are ignored since the "reverse" of a color is not defined by the extension.</p>
<p>When multiple parameters are used, they are cumulative, as if several DECRARA control functions were received and executed in sequence.</p>
<p>There is no default for the video attribute parameters, if no valid subsequent parameter is received, the command is ignored.</p>
<p>This sequence does not change the current graphic rendition (see SGR).</p>
<p><em>Notes on DECRARA:</em></p>
<ol>
<li><p>If the rectangular area contains both single and double width lines, the area affected may not appear rectangular on the display.  For example if Pl=5 and Pr=10, then all lines within the rectangular area, whether single or double width, will have character positions 5 through 10 affected.</p></li>
</ol>
</section>
<a id="5-177" data-page="5-177"></a>
<section id="DECSACE">
<h4>Select Attribute Change Extent <span>&mdash;</span> DECSACE</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To specify what character positions are affected by DECCARA and DECRARA control functions (STREAM or RECTANGLE)</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Ps  *     x
9/11  Ps  2/10  7/8</samp></pre>
</div>
<ul>
<li>Ps = 0 stream of character positions are affected (default)</li>
<li>Ps = 1 stream of character positions are affected</li>
<li>Ps = 2 rectangular area of character positions are affected</li>
</ul>
<p><em>Description:</em> This control function is used to specify what character positions are affected by the DECCARA and DECRARA control functions.</p>
<p>When Ps = 0 or 1, DECCARA and DECRARA affects the stream of character positions beginning with the first character position specified in the command, and ending with the second character position specified.  The following diagram shows an example of these character positions.  The two asterisks represent the character positions specified in the DECCARA or DECRARA control function.  The "U"'s represent unoccupied character positions.  These unoccupied positions are not affected by DECCARA or DECRARA when in this mode.</p>
<figure>
<pre>+-----------------+
|                 |
|  *##############|
|########UUUUUUUUU|      Ps = 0
|#################|
|###########*     |
|                 |
+-----------------+</pre>
</figure>
<p>When Ps = 2 DECCARA and DECRARA affects all character positions within a rectangular area, the top-left and bottom right corners of which are specified in the control function.  The following diagram shows an example of these character positions.  The two asterisks represent the character positions specified in the DECCARA or DECRARA control function.  The "U"'s represent unoccupied character positions.  When DECCARA or DECRARA is executed, these character positions are changed to blanks and are affected.</p>
<a id="5-178" data-page="5-178"></a>
<figure>
<pre>+-----------------+
|                 |
|  *#########     |
|  ##########UUUUU|      Ps = 2
|  ##########     |
|  #########*     |
|                 |
+-----------------+</pre>
</figure>
<p>In both cases the specified character positions (marked by asterisks) are also affected.</p>
</section>
</section>
<a id="5-179" data-page="5-179"></a>
<section id="5.12.2">
<h3>5.12.2  Data Integrity</h3>
<p>The data integrity features described here are application functions intended to improve the reliability of OLTP applications.  They are not a substitute for error free communications as might be provided by an error correcting protocol.</p>
<section id="DECRQCRA">
<h4>Request Checksum Of Rectangular Area <span>&mdash;</span> DECRQCRA</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To cause the terminal to compute and report the checksum of a rectangular area, allowing applications to insure it has not been changed.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pid ; Pp ; Pt ; Pl ; Pb ; Pr  *     y
9/11  Pid ; Pp ; Pt ; Pl ; Pb ; Pr  2/10  7/9</samp></pre>
</div>
<p><em>Description:</em> Upon receipt of a DECRQCRA by the device, a checksum of the indicated rectangular area of the indicated page will be generated and reported to the host in a Checksum Report (DECCKSR).</p>
<p>Pid is an arbitrary numeric label provided by the application to identify the checksum request.  It will be provided in the DECCKSR response from the device.  This label serves to differentiate between multiple checksum reports if necessary.</p>
<p>Pp is the page number where the rectangular area of interest is located.  If Pp is 0 or omitted, subsequent parameters are ignored and a checksum for all page memory will be reported.  If Pp is higher than the total number of pages available in the device, the highest numbered page is used.</p>
<p>The final four parameters indicate the top, left (Pt, Pl) and bottom, right (Pb, Pr) coordintate of the rectangular area on page Pp of which the checksum is to be calculated.  The coordinates of the rectangular area are affected by the setting of Origin Mode (DECOM).  Pt must be less than or equal to Pb, and Pl must be less than or equal to Pr or the sequence is ignored.</p>
<p>Default values are:  Pt = 1; Pb = last-line-of-page; Pl = 1; and Pr = last-column-of-page.  If the final four parameters are unspecified, a checksum of page Pp is generated.</p>
</section>
<a id="5-180" data-page="5-180"></a>
<section id="DSR">
<h4>Memory Checksum Device Status Report <span>&mdash;</span> DSR</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To request a checksum of the current text macro definitions, allowing the host to insure they have not been changed.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   ?     6    3   ; Pid  n
9/11  3/15  3/6  3/3 ; Pid  6/14</samp></pre>
</div>
<p><em>Description:</em> This request causes a Checksum Report (DECCKSR) to be issued reporting the checksum of current text macro definitions.</p>
<p>Pid is an optional numeric parameter which provides a label to identify the checksum request.  It will be provided in the DECCKSR response from the terminal.  This label serves to differentiate between multiple checksum reports if necessary.</p>
</section>
<a id="5-181" data-page="5-181"></a>
<section id="DECCKSR">
<h4>Checksum Report <span>&mdash;</span> DECCKSR</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To report a requested checksum.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Pn  !    ~     D...D  ST
9/0  Pn  3/2  7/14  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> DECCKSR is issued in response to a Request Checksum of Rectangular Area (DECRQCRA) or a Device Status Report (DSR) with a parameter value of ?63 indicating a request for a checksum of the macro definitions.</p>
<p>The numeric parameter of the DECCKSR control string is a numeric label for the checksum report specified in the DECRQCRA or DSR control function.  This label serves to differentiate between multiple checksum reports if necessary.</p>
<p>The data of the control string consists of four hexadecimal digits (3/0 through 3/9 and 4/1 through 4/6) indicating the checksum.</p>
</section>
</section>
<a id="5-182" data-page="5-182"></a>
<section id="5.12.3">
<h3>5.12.3  Macros</h3>
<section id="DECDMAC">
<h4>Define Macro <span>&mdash;</span> DECDMAC</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To define a string of characters as a text macro, allowing the host to shorten subsequent transmissions.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Pid ; Pdt ; Pen  !    z     D...D  ST
9/0  Pid ; Pdt ; Pen  2/1  7/10  D...D  9/12</samp></pre>
</div>
<p>Where</p>
<ul>
<li>Pid is the macro ID number:  0-63.</li>
<li>Pdt is the delete control:<ul>
<li>0  delete only a macro with the same ID number (if one exists) before defining this macro.</li>
<li>1  delete all macro definitions before defining this macro.</li>
</ul>
</li>
<li>Pen is the macro encoding:<ul>
<li>0  text (ASCII) encoding.</li>
<li>1  hex pair encoding.</li>
</ul>
</li>
</ul>
<p><em>Description:</em> This control string defines a macro consisting of ANSI commands.  Once defined, a macro can be invoked using DECINVM to cause the macro's definition to be processed by the terminal as if received from the host.</p>
<p>Omitted parameters are defaulted to zero.  Pid must be a number between 0 and 63; Pdt 0 or 1; and Pen 0 or 1; otherwise the control will be ignored.</p>
<p>The data of the control string is the series of text and ANSI commands which are performed when the macro is invoked.</p>
<p>Macros can invoke other macros with up to 16 levels of nesting, but cannot invoke themselves recursively.  Macro definitions cannot be nested.  That is, a DECDMAC cannot be included as part of a macro definition.</p>
<p>When text encoding is used (Pen = 0), the macro consists of the graphic characters appearing in the control string.  Only characters from 2/0 through 7/14 and 10/00 through 15/15 may be included in a macro using this encoding method.</p>
<p>When hex pair encoding is used (Pen = 1), each pair of characters in the definition represents the hex value of a single ASCII <a id="5-183" data-page="5-183"></a>character which will be stored in the definition of the macro.  If a non-hex pair is encountered that is not a valid repeat sequence, the entire macro definition is ignored.</p>
<p>A Repeat Introducer (!) is defined to allow a string of hex pairs to be repeated in the definition any number of times.  Repeat sequences are imbedded within the text of the macro definition.  If a non-hex character is encountered in the repeat string, the entire macro definition is ignored.</p>
<p>The format is:</p>
<p><samp>! Pn ; D...D ;</samp></p>
<p>Where</p>
<ul>
<li>!   is the repeat introducer</li>
<li>Pn  is a numeric parameter which specifies the number of times to repeat the sequence.  If Pn is not specified, the sequence is inserted into the definition once.</li>
<li>D...D  is the sequence to repeat within the definition, Pn times.</li>
<li>;   A semicolon separates the repeat count from the sequence of hex pairs.  Another semicolon terminates the sequence.</li>
</ul>
<p>If any non parameter characters are encountered before the first semicolon, the entire macro definition is ignored.  If a string terminator is encountered before the final semicolon, the repeat string is terminated normally.</p>
<p>6k bytes of RAM is available for storage of macro definitions.  Any macro definitions which cannot fit in the remaining macro storage space are ignored.</p>
<p>All macro definitions are cleared on receipt of a Reset to Initial State (RIS) or Secure Reset (DECSR).  Soft Terminal Reset (DECSTR) has no effect on stored macro definitions.</p>
<p>Note that characters from 0/8 through 0/13 can be included to format the device control string, but are not part of the macro definition.</p>
</section>
<a id="5-184" data-page="5-184"></a>
<section id="DECINVM">
<h4>Invoke Macro <span>&mdash;</span> DECINVM</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To invoke a previously defined macro definition.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pid  *     z
9/11  Pid  2/10  7/10</samp></pre>
</div>
<p><em>Description:</em> Causes the specified macro to be invoked.  The macro must have been previously defined using DECDMAC.  The terminal substitutes the DECINVM sequence with the contents of the macro definition, and executes the substituted text.</p>
<p>Pid is the macro id number.  If a macro is not found with the specified id, the command is ignored.</p>
<p>The current state of the machine is not saved or restored when macros are invoked.  Any functions executed by a macro invocation are still in effect when the macro invocation finishes.</p>
<p>If the terminal is in Printer Controller mode, the macro is not expanded by the terminal.  The command to invoke the macro is passed on to the printer, to be expanded by the printer's text macro facility.</p>
</section>
<a id="5-185" data-page="5-185"></a>
<section id="DECMSR">
<h4>Macro Space Report <span>&mdash;</span> DECMSR</h4>
<p><em>Level:</em> 4</p>
<p><em>Purpose:</em> To report the space remaining for macro definitions in response to DSR request.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Pn  *     {
9/11  Pn  2/10  7/11</samp></pre>
</div>
<p><em>Description:</em> DECMSR is reported in response to a Device Status Report (DSR) with a private selectable parameter ?62, specifying a request to report the available space for macro definitions.</p>
<p>The numeric parameter specifies the number of bytes available for macro definitions divided by 16 (rounded down).</p>
</section>
</section>
</section>
<a id="5-186" data-page="5-186"></a>
<section id="5.13">
<h2>5.13  Saving And Restoring Terminal State</h2>
<section id="5.13.1">
<h3>5.13.1  Cursor Save Buffer</h3>
<p>A conforming device shall provide a means of saving and restoring on command the value of the Active Position, as well as certain of the terminal states.  The state which must be saved in Level 1 operation includes the Current Rendition value (determined by the most recent occurrence of Select_Graphic_Rendition), the current value of Origin Mode, the character sets designated to G0, G1, G2, and G3, and the character set most recently invoked into the left hand side (GL) of the In Use Table.</p>
<p>In Level 2 operation, all of this state must also be saved, as well as the character set most recently invoked into the right hand side (GR) of the In Use Table.  If the Level 2 extension Selectively Erasable Characters is supported, the Current Attribute value (determined by the most recent occurrence of Select_Character_Attribute) must be saved.  If the ANSI Color Text Extension is supported, the current foreground and background text writing colors are saved as part of the Current Rendition.</p>
<p>Level 3 and 4 require the same information as Level 2.</p>
<a id="5-187" data-page="5-187"></a>
<section id="DECSC">
<h4>Save Cursor <span>&mdash;</span> DECSC</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Saves the Active Position and other selective state information.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC     7
1/11    3/7</samp></pre>
</div>
<p><em>Description:</em> In Level 1 operation, the DECSC control provides a means of storing the values of the Active Position, the Current Rendition, Origin Mode, the currently designated G0, G1, G2, and G3 sets, and the currently invoked GL set.</p>
<p>In Level 2 or higher it also stores the currently invoked GR set.  The Current Attribute value is also saved if the Level 2 extension for Selectively Erasable Characters is supported.  These values can later be restored using the DECRC control.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>Only one level of storage is provided by this control.  Each additional execution of this control will cause previously stored values to be lost.</p></li>
<li><p>The values of the specified state information (see above) are not affected by the execution of this control.</p></li>
<li><p>On initialization or reset the values of the save buffer are cleared to the following state:</p><pre><code>position.line = 1;
position.column = 1;
position.page = 1;
rendition.bold = FALSE;
rendition.underscore = FALSE;
rendition.blink = FALSE;
rendition.reverse = FALSE;
attribute.selective_erase = FALSE;
origin_mode = ABSOLUTE;
left = in_use_table.gl;
right = in_use_table.gr
g0 = designated_graphic_sets[0];
g1 = designated_graphic_sets[1];
g2 = designated_graphic_sets[2];
g3 = designated_graphic_sets[3];</code></pre>
</li>
<li><p>Execution of Soft Terminal Reset (DECSTR) also causes the Save Buffer to be set to the default values as given above.</p></li>
</ol>
<a id="5-188" data-page="5-188"></a>
<p><em>State Affected:</em></p>
<ul>
<li><code>save_buffer_t  cursor_save_buffer;</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void save_cursor()
{
cursor_save_buffer.position.line =
            active_position.line;
cursor_save_buffer.position.column =
            active_position.column;
cursor_save_buffer.position.page =
            active_position.page;
cursor_save_buffer.rendition.bold =
           current_rendition.bold;
cursor_save_buffer.rendition.underscore =
           current_rendition.underscore;
cursor_save_buffer.rendition.blink =
           current_rendition.blink;
cursor_save_buffer.rendition.reverse =
           current_rendition.reverse;
cursor_save_buffer.origin_mode = origin_mode;
cursor_save_buffer.left = in_use_table.gl;
cursor_save_buffer.g0 = designated_graphic_sets[0];
cursor_save_buffer.g1 = designated_graphic_sets[1];
cursor_save_buffer.g2 = designated_graphic_sets[2];
cursor_save_buffer.g3 = designated_graphic_sets[3];
if (conformance_level >= LEVEL_2)
  {
  cursor_save_buffer.right = in_use_table.gr;
  cursor_save_buffer.attribute.selective_erase =
                     current_attribute.selective_erase;
  }
} /* end save_cursor */
</code></pre>
<p><em>Known Deviations:</em> None</p>
</section>
<a id="5-189" data-page="5-189"></a>
<section id="DECRC">
<h4>Restore Cursor <span>&mdash;</span> DECRC</h4>
<p><em>Levels:</em> 1-4</p>
<p><em>Purpose:</em> Restores the previously saved values of the Active Position and other selective state information.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>ESC     8
1/11    3/8</samp></pre>
</div>
<p><em>Description:</em> In Level 1 operation, the DECRC control provides a means of restoring the values of the Active Position, the Current Rendition, Origin Mode, the currently designated G0, G1, G2, and G3 sets, and the currently invoked GL set.</p>
<p>In Level 2 or higher it also restores the currently invoked GR set.  The Current Attribute value is also saved if the Level 2 extension for Selectively Erasable Characters is supported.  These values are the ones which were previously stored using the Save Cursor (DECSC) control function.</p>
<p><em>Notes:</em></p>
<ol>
<li><p>The values of the specified state information (see above) at the time this control is received by the terminal are lost.</p></li>
<li><p>The values stored in the Cursor Save Buffer are not affected by execution of this control.</p></li>
<li><p>If the restored cursor position lies outside of the scrolling region, and the restored value of Origin Mode is set, the Active Position will be moved to the closest position within the scrolling region.  That is, if the restored cursor position is above the Top Margin, the Active Position will be set to the Top Margin, and if the restored position is below the Bottom Margin, the Active Position will be set to the Bottom Margin.  In either case, the Active Column will not change, but will remain as the stored column value.  For example:  the Active Position is at line 5, column 5 when the cursor is saved, and Origin Mode is set; the scrolling region is subsequently changed to 10,15; when the cursor is restored, the Active Position will be moved to line 10, column 5, to insure that it will lie inside the scrolling region.  This reason for this recovery is to guarantee that the Active Position will always be within the bounds of the scrolling region, and will never have a negative value.</p></li>
</ol>
<a id="5-190" data-page="5-190"></a>
<p><em>State Affected:</em></p>
<ul>
<li><code>active_position</code></li>
<li><code>current_rendition</code></li>
<li><code>origin_mode</code></li>
<li><code>in_use_table</code></li>
<li><code>designated_graphic_sets[4]</code></li>
<li><code>current_attribute</code></li>
</ul>
<p><em>Algorithm:</em></p>
<pre><code>void restore_cursor()
{
  short int base;  /* first line(-1) of page */
if (cursor_save_buffer.position.page > number_of_pages)
  active_position.page = number_of_pages;
else active_position.page = cursor_save_buffer.position.page;
base = (active_position.page-1) * lines_per_page;
if (cursor_save_buffer.position.column >
    end_of_line(active_position.line + base))
  active_position.column = end_of_line(active_position.line +
base);
else
  active_position.column = cursor_save_buffer.position.column;
active_position.line = cursor_save_buffer.position.line;

current_rendition.bold =
  cursor_save_buffer.rendition.bold;
current_rendition.underscore =
  cursor_save_buffer.rendition.underscore;
current_rendition.blink =
  cursor_save_buffer.rendition.blink;
current_rendition.reverse =
  cursor_save_buffer.rendition.reverse;

origin_mode = cursor_save_buffer.origin_mode;
if (origin_mode == DISPLACED)
  {
  if (active_position.line &lt; top_margin)
    active_position.line = top_margin;
  if (active_position.line > bottom_margin)
    active_position.line = bottom_margin;
  if (active_position.column &lt; left_margin)
    active_position.column = left_margin;
  if (active_position.column > right_margin)
    active_position.column = right_margin;
  }

in_use_table.gl = cursor_save_buffer.left;
designated_graphic_sets[0] = cursor_save_buffer.g0;
designated_graphic_sets[1] = cursor_save_buffer.g1;
designated_graphic_sets[2] = cursor_save_buffer.g2;
<a id="5-191" data-page="5-191"></a>designated_graphic_sets[3] = cursor_save_buffer.g3;

if (conformance_level >= LEVEL_2)
  {
  in_use_table.gr = cursor_save_buffer.right;
  if (level_2_extensions[SELECTIVE_ERASE]==TRUE)
    current_attribute.selective_erase =
      cursor_save_buffer.attribute.selective_erase;
  }
}
</code></pre>
<p><em>Known Deviations:</em></p>
<p>In the VT100, VT101, VT102, VT125, VT131, and VT132, if the restored cursor position lies outside of the scrolling region, and the restored value of Origin Mode is set, the Active Position will not be moved into the scrolling region, and an illegal (e.g., negative) cursor position value may result.</p>
</section>
</section>
<section id="5.13.2">
<h3>5.13.2  Terminal State Interrogation</h3>
<p>Terminal State Interrogation (TSI) allows a host computer to query most of the settable state in the terminal.  Terminal state is divided into three general catagories based on the ANSI syntax used to control it:  (1) modes controlled by set__mode/&NoBreak;reset__mode; (2) selections and settings such as current graphic rendition, and scroll margins.  (3) presentation state such as tab stops and character sets.  The terminal provides control functions to query state in each of these catagories, as well as a compact report that allows most settable state to be saved and later restored in one operation.</p>
<p>All TSI controls operate at Levels 2, 3 and 4.  Level 3 defines TSI as an implicit extension at Level 2.  The following control functions are provided to support Terminal State Interrogation.</p>
<ul>
<li><p><a href="#DECRQM">DECRQM<span> &mdash; </span>Request Mode</a><br />Sequence sent from host to terminal to request the state of a single mode.</p></li>
<li><p><a href="#DECRPM">DECRPM<span> &mdash; </span>Report Mode</a><br />Sequence sent from terminal to host to report the state of the mode requested by DECRQM.</p></li>
<li><p>DECNKM<span> &mdash; </span>Numeric Keypad Mode<br />This is a selectable mode sequence which controls the keypad allowing its state to be reported by DECRPM above.  See "Keyboard Processing", DEC STD 70-6.</p></li>
<li><p><a href="#DECRQSS">DECRQSS<span> &mdash; </span>Request Selection or Setting</a><br /><a id="5-192" data-page="5-192"></a>Sequence sent from host to terminal to request the state of a selection or setting which is not encoded as a selectable mode (example:  SGR).</p></li>
<li><p><a href="#DECRPSS">DECRPSS<span> &mdash; </span>Report Selection or Setting</a><br />Sequence sent from terminal to host to report settings and selections in response to DECRQSS.</p></li>
<li><p><a href="#DECRQPSR">DECRQPSR<span> &mdash; </span>Request Presentation State Report</a><br />Sequence sent from host to terminal to request presentation state (cursor information and tab stops)</p></li>
<li><p><a href="#DECPSR">DECPSR<span> &mdash; </span>Presentation State Report</a><br />Control string sent from terminal to host in response to DECRQPSR.  Two presentation state reports are defined:  (1) Cursor Information Report - DECCIR; (2) Tabulation Stop Report - DECTABSR</p></li>
<li><p><a href="#DECRSPS">DECRSPS<span> &mdash; </span>Restore Presentation State</a><br />Control string sent from host to terminal to restore the presentation state reported by DECPSR.</p></li>
<li><p><a href="#DECRQTSR">DECRQTSR<span> &mdash; </span>Request Terminal State Report</a><br />Sequence sent from host to terminal to request a compact report of most settable state.</p></li>
<li><p><a href="#DECTSR">DECTSR<span> &mdash; </span>Terminal State Report</a><br />Control string sent from terminal to host which reports most terminal state in one compact sequence.</p></li>
<li><p><a href="#DECRSTS">DECRSTS<span> &mdash; </span>Restore Terminal State</a><br />Control string sent from host to VT420 to restore the terminal state reported by DECTSR.</p></li>
</ul>
<a id="5-193" data-page="5-193"></a>
<section id="DECRQM">
<h4>Request Mode <span>&mdash;</span> DECRQM</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To request the state of modes controlled by Set Mode/&NoBreak;Reset Mode sequences.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI         Ps  $    p      (ANSI modes)
CSI   ?     Ps  $    p      (DEC private modes)
9/11  3/15  Ps  2/4  7/0</samp></pre>
</div>
<p><em>Description:</em> This sequence takes one selective parameter specifying a single selectable mode controllable using the Set Mode and Reset Mode sequences.  The terminal responds with a Report Mode control sequence (DECRPM) which specifies the state of the mode as follows:  (0) Unknown (mode is not recognized by terminal); (1) Set; (2) Reset; (3) Set and cannot be changed; or (4) Reset and cannot be changed.</p>
<p>All ANSI standard modes defined in X3.64-1979 are reported as either Set or Reset.  DEC Private modes that cannot be set or reset from the host will report as unknown [Reason:  the list is long and changes frequently.  Since DEC defines these modes, applications can infer how to handle unknown modes as needed].</p>
<a id="5-194" data-page="5-194"></a>
<aside>
<h4>Implementation Guideline</h4>
<p>The VT420 allows the following selectable modes to be queried through the use of the DECRQM control:</p>
<table>
<thead>
<tr><th colspan="2">ANSI Specified</th><th colspan="2"> DEC Private</th></tr>
<tr><th>Mode Parameter</th><th>Mnemonic</th><th>Mode Parameter</th><th>Mnemonic</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>GATM *</td><td>?1</td><td>DECCKM</td></tr>
<tr><td>2</td><td>KAM</td><td>?2</td><td>DECANM ***</td></tr>
<tr><td>3</td><td>CRM **</td><td>?3</td><td><a href="#DECCOLM">DECCOLM</a></td></tr>
<tr><td>4</td><td><a href="#IRM">IRM</a></td><td>?4</td><td><a href="#DECSCLM">DECSCLM</a></td></tr>
<tr><td>5</td><td>SRTM *</td><td>?5</td><td><a href="#DECSCNM">DECSCNM</a></td></tr>
<tr><td></td><td></td><td>?6</td><td><a href="#DECOM">DECOM</a></td></tr>
<tr><td>7</td><td>VEM  *</td><td>?7</td><td>DECAWM</td></tr>
<tr><td>10</td><td>HEM  *</td><td>?8</td><td>DECARM</td></tr>
<tr><td>11</td><td>PUM  *</td><td></td><td></td></tr>
<tr><td>12</td><td><a href="#SRM">SRM</a></td><td></td><td></td></tr>
<tr><td>13</td><td>FEAM *</td><td></td><td></td></tr>
<tr><td>14</td><td>FETM *</td><td></td><td></td></tr>
<tr><td>15</td><td>MATM *</td><td></td><td></td></tr>
<tr><td>16</td><td>TTM  *</td><td>?18</td><td>DECPFF</td></tr>
<tr><td>17</td><td>SATM *</td><td>?19</td><td>DECPEX</td></tr>
<tr><td>18</td><td>TSM  *</td><td>?25</td><td><a href="#DECTCEM">DECTCEM</a></td></tr>
<tr><td>19</td><td>EBM  *</td><td></td><td></td></tr>
<tr><td>20</td><td><a href="#LNM">LNM</a></td><td>?42</td><td><a href="#DECNRCM">DECNRCM</a></td></tr>
<tr><td></td><td></td><td>?60</td><td><a href="#DECHCCM">DECHCCM</a> *</td></tr>
<tr><td></td><td></td><td>?61</td><td><a href="#DECVCCM">DECVCCM</a></td></tr>
<tr><td></td><td></td><td>?64</td><td><a href="#DECPCCM">DECPCCM</a></td></tr>
<tr><td></td><td></td><td>?66</td><td>DECNKM</td></tr>
<tr><td></td><td></td><td>?67</td><td>DECBKM</td></tr>
<tr><td></td><td></td><td>?68</td><td>DECKBUM</td></tr>
<tr><td></td><td></td><td>?69</td><td><a href="#DECLRMM">DECVSSM</a></td></tr>
<tr><td></td><td></td><td>?73</td><td>DECXRLM</td></tr>
</tbody>
<tfoot>
<tr><td colspan="4"><p>*    This mode is always Reset in the VT420 and can not be changed.</p>
<p>**   The terminal will not respond to a DECRQM sequence while in Control Representation Mode (this mode can only report RESET).  CRM can not be changed from the host.</p>
<p>***  The terminal will not respond to a DECRQM sequence when not in ANSI mode (this mode can only report SET).</p></td></tr>
</tfoot>
</table>
</aside>
</section>
<a id="5-195" data-page="5-195"></a>
<section id="DECRPM">
<h4>Report Mode <span>&mdash;</span> DECRPM</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report the state of modes controlled by Set Mode/&NoBreak;Reset Mode sequences (terminal to host).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI         Ps1 ; Ps2  $    y      (ANSI modes)
CSI   ?     Ps1 ; Ps2  $    y      (DEC private modes)
9/11  3/15  Ps1 ; Ps2  2/4  7/9</samp></pre>
</div>
<p><em>Description:</em> This sequence is returned to the host upon receipt of a valid DECRQM control sequence.  This sequence reports the state of a particular selectable mode to the host.  The first selective parameter (Ps1) is the selectable mode number (the question mark ("?") must be added for DEC private selectable modes), that was requested from the DECRQM sequence.  The second selective parameter (Ps2) indicates the state of that mode:</p>
<table>
<thead>
<tr><th data-underline="---">Ps2</th><th data-underline="-------------">State of mode</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>UNKNOWN (mode not recognized by terminal).</td></tr>
<tr><td>1</td><td>Mode is in SET state</td></tr>
<tr><td>2</td><td>Mode is in RESET state</td></tr>
<tr><td>3</td><td>Mode is in SET state, and cannot change</td></tr>
<tr><td>4</td><td>Mode is in RESET state, and cannot change</td></tr>
</tbody>
</table>
</section>
<a id="5-196" data-page="5-196"></a>
<section id="DECRQSS">
<h4>Request Selection Or Setting <span>&mdash;</span> DECRQSS</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To request the state of a selection or setting which is not encoded as a Set Mode/Reset Mode sequence.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  $    q    D...D  ST
9/0  2/4  7/1  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> Request Selection or Setting is sent to the terminal to determine the selection or setting of a single device feature, such as the current Graphic Rendition (SGR).  The data of the device control string for DECRQSS contains the identifying intermediate and final characters of the control sequence used to make the selection.  For example, if the command is to request the state of SGR, the data would consist of a single character 'm', which is the final character (no intermediates) in the control sequence for SGR.  The terminal responds with a Report Selection or Setting (DECRPSS) sequence.</p>
<p>Only one setting or selection may be queried per request.</p>
<aside>
<h4>Implementation Guideline</h4>
<p>The VT420 allows the state of features selectable through the following sequences to be determined through DECRQSS:</p>
<table>
<thead>
<tr><th data-underline="-------------------------">Setting Control Sequence</th><th data-underline="------------">Abbreviation</th><th data-underline="------------------">Final Character(s)</th></tr>
</thead>
<tbody>
<tr><td>Select Active Status Display</td><td>DECSASD</td><td>$ }</td></tr>
<tr><td>Select Attribute Change Extent</td><td><a href="#DECSACE">DECSACE</a></td><td>* x</td></tr>
<tr><td>Set Character Attribute</td><td><a href="#DECSCA">DECSCA</a></td><td>" q</td></tr>
<tr><td>Set Conformance Level</td><td>DECSCL</td><td>" p</td></tr>
<tr><td>Set Columns Per Page</td><td><a href="#DECSCPP">DECSCPP</a></td><td>$ |</td></tr>
<tr><td>Set Lines Per Page</td><td><a href="#DECSLPP">DECSLPP</a></td><td>t</td></tr>
<tr><td>Set Number of Lines per Screen</td><td><a href="#DECSNLS">DECSNLS</a></td><td>* |</td></tr>
<tr><td>Set Status Line Type</td><td>DECSSDT</td><td>$ ~</td></tr>
<tr><td>Set Left and Right Margins</td><td><a href="#DECSLRM">DECSLRM</a></td><td>s</td></tr>
<tr><td>Set Top and Bottom Margins</td><td><a href="#DECSTBM">DECSTBM</a></td><td>r</td></tr>
<tr><td>Set Graphic Rendition</td><td><a href="#SGR">SGR</a></td><td>m</td></tr>
</tbody>
</table>
</aside>
</section>
<a id="5-197" data-page="5-197"></a>
<section id="DECRPSS">
<h4>Report Selection Or Setting <span>&mdash;</span> DECRPSS</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report the state of a selection or setting which is not encoded as a Set Mode/Reset Mode sequence (terminal to host).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Ps  $    r    D...D  ST
9/0  Ps  2/4  7/2  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> The Report Selection or Setting device control string is issued from the terminal in response to a Request Selection or Setting command.  The value of Ps indicates whether the Request was successful:</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="-------">meaning</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>UNKNOWN selection or setting, request unsuccessful</td></tr>
<tr><td>1</td><td>request successful, data contains selection information</td></tr>
</tbody>
</table>
<p>The data returned by the DECRPSS control string is the entire control function that the host would send to the terminal to select or set the parameter being inquired, based on the current setting or selection of that parameter, with the single exception of the leading Control Sequence Introducer character (9/11, or 1/11 5/11 in 7 bits).</p>
<p>The returned control function will contain no omitted parameters, even if the inquired value is the default value.  In the case where there is no default value for the inquired parameter, the returned control function will be constructed so as to overwrite the existing setting or selection, if and when that information is returned to the device.</p>
<p>For example, if the current Graphic Rendition is blinking, and reversed, the data would consist of the characters '0;5;7m', which is the parameter string and final character necessary to change the graphic rendition to that state.</p>
<p>Note that the coding of the DECRPSS control string which indicates UNKNOWN, is always coded as follows:</p>
<p><samp>DCS  0  $  r  ST</samp></p>
</section>
<a id="5-198" data-page="5-198"></a>
<section id="DECRQPSR">
<h4>Request Presentation State Report <span>&mdash;</span> DECRQPSR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To request presentation state (cursor information and tab stops).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI  Ps   $    w
9/11  Ps  2/4  7/7</samp></pre>
</div>
<p><em>Description:</em> DECRQPSR causes the terminal to respond with a Presentation State Report (DECPSR).  The control sequence takes one selective parameter which specifies the type of Presentation State Report to be returned.</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="--------------">Type of DECPSR</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>ignored, no report sent</td></tr>
<tr><td>1</td><td>Cursor Information Report  (<a href="#DECCIR">DECCIR</a>)</td></tr>
<tr><td>2</td><td>Tabulation Stop Report  (<a href="#DECTABSR">DECTABSR</a>)</td></tr>
</tbody>
</table>
</section>
<a id="5-199" data-page="5-199"></a>
<section id="DECPSR">
<h4>Presentation State Report <span>&mdash;</span> DECPSR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report the presentation state (cursor information and tab stops, terminal to host).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Ps  $    u    D...D  ST
9/0  Ps  2/4  7/5  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> The Presentation State Report is a device control string containing data which represents the settings of presentation attributes in the terminal.  A Presentation State Report is sent in response to a Request Presentation State Report control sequence (DECRQPSR).</p>
<p>The type of Presenation State Report is specified by the value of Ps:</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="--------------">Type of DECPSR</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>illegal</td></tr>
<tr><td>1</td><td>Cursor Information Report        (<a href="#DECCIR">DECCIR</a>)</td></tr>
<tr><td>2</td><td>Tabulation Stop Report           (<a href="#DECTABSR">DECTABSR</a>)</td></tr>
</tbody>
</table>
</section>
<a id="5-200" data-page="5-200"></a>
<section id="DECCIR">
<h4>Cursor Information Report <span>&mdash;</span> DECCIR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report the presentation state cursor information</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  1    $    u    D...D  ST
9/0  3/1  2/4  7/5  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> The data of a device control string for a Cursor Information Report consists of a string of parameters containing the information saved through a Save Cursor (DECSC) command, according to the following format:</p>
<p><samp>Pr ; Pc ; Pp ; Srend ; Satt ; Sflag ; Pgl ; Pgr ; Scss ; Sdesig</samp></p>
<p>where:</p>
<ul>
<li><p>Pr, Pc<span> &mdash; </span>The cursor position (example:  24;132)</p></li>
<li><p>Pp<span> &mdash; </span>The current page (example:  3)<br />Note that in a single page configuration, the Pp parameter would be 1.</p></li>
<li><p>Srend<span> &mdash; </span>One or more bytes containing the encoded Graphic Renditions that must be saved, according to the following bit-encoded format:</p><table>
<tbody>
<tr><td>bit&nbsp;8:</td><td>always reset (0)</td></tr>
<tr><td>bit&nbsp;7:</td><td>always set (1)</td></tr>
<tr><td>bit&nbsp;6:</td><td>extension indicator:  if this bit is set (1), another byte of rendition information follows (always reset on VT420).</td></tr>
<tr><td>bit&nbsp;5:</td><td>always reset (0)</td></tr>
<tr><td>bit&nbsp;4:</td><td>reverse video rendition</td></tr>
<tr><td>bit&nbsp;3:</td><td>blink rendition</td></tr>
<tr><td>bit&nbsp;2:</td><td>underline rendition</td></tr>
<tr><td>bit&nbsp;1:</td><td>bold rendition</td></tr>
</tbody>
</table>
<p>For the actual rendition bits (1 through 5, above) if the bit is set (1), it indicates that the rendition has been selected.  Example:  if bold and underline are set the terminal would report a single byte, coded in binary as 01000011, or a hex 43, ASCII "C".</p></li>
<li><p>Satt<span> &mdash; </span>One or more bytes containing the encoded Character Attributes that must be saved, according to the following bit-encoded format:</p><a id="5-201" data-page="5-201"></a><table>
<tbody>
<tr><td>bit&nbsp;8:</td><td>always reset (0)</td></tr>
<tr><td>bit&nbsp;7:</td><td>always set (1)</td></tr>
<tr><td>bit&nbsp;6:</td><td>extension indicator:  if this bit is set (1), another byte of character attribute information follows (always reset on VT420).</td></tr>
<tr><td>bit&nbsp;5:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;4:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;3:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;2:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;1:</td><td>selectively erasable attribute</td></tr>
</tbody>
</table>
<p>For the actual character attribute bits (1 through 5, above) if the bit is set (1), it indicates that the character attribute has been selected.  Example:  if the selective erase attribute is set, the terminal would report a single byte, coded in binary as 01000001, or a hex 41, ASCII "A".</p></li>
<li><p>Sflag<span> &mdash; </span>One or more bytes containing several flags and modes that must be saved, according to the following bit-encoded format:</p><table>
<tbody>
<tr><td>bit&nbsp;8:</td><td>always reset (0)</td></tr>
<tr><td>bit&nbsp;7:</td><td>always set (1)</td></tr>
<tr><td>bit&nbsp;6:</td><td>extension indicator:  if this bit is set (1), another byte of flags follows (always reset on VT420).</td></tr>
<tr><td>bit&nbsp;5:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;4:</td><td>auto-wrap pending (1 if pending)</td></tr>
<tr><td>bit&nbsp;3:</td><td>SS3 pending (1 if SS3 received)</td></tr>
<tr><td>bit&nbsp;2:</td><td>SS2 pending (1 if SS2 received)</td></tr>
<tr><td>bit&nbsp;1:</td><td>origin mode (1 = set 0 = reset)</td></tr>
</tbody>
</table>
<p>For the flags above, if the bit is set (1) it indicates that the mode or state is set (as indicated).  Example:  if origin mode DECOM is set, auto-wrap is pending, and an SS3 has been received, the terminal would report a single byte, coded in binary as 01001101, or a hex 4D, ASCII "M".</p></li>
<li><p>Pgl, Pgr<span> &mdash; </span>Character G-sets which are currently invoked into GL and GR.  These parameters are characters from 0 through 3, depending on which of G0, G1, G2, or G3 are invoked into GL and GR, respectively.</p></li>
<li><p>Scss<span> &mdash; </span>One byte containing the encoded information regarding the size of the character sets designated into G0 through G3 according to the following bit-encoded format:</p><a id="5-202" data-page="5-202"></a><table>
<tbody>
<tr><td>bit&nbsp;8:</td><td>always reset (0)</td></tr>
<tr><td>bit&nbsp;7:</td><td>always set (1)</td></tr>
<tr><td>bit&nbsp;6:</td><td>extension indicator:  if this bit is set (1), another byte of character size information follows (always reset on VT420).</td></tr>
<tr><td>bit&nbsp;5:</td><td>reserved for future use</td></tr>
<tr><td>bit&nbsp;4:</td><td>size of G3 set</td></tr>
<tr><td>bit&nbsp;3:</td><td>size of G2 set</td></tr>
<tr><td>bit&nbsp;2:</td><td>size of G1 set</td></tr>
<tr><td>bit&nbsp;1:</td><td>size of G0 set</td></tr>
</tbody>
</table>
<p>For the character set size bits (1 through 4, above) if the bit is set (1), it indicates that the graphic set contains a 96-character character set.  If the bit is reset, the graphic set contains a 94-character character set.  Example:  if ISO Latin Alphabet Nr 1 Supplemental, a 96-character character set is designated into G2 and G3, and ASCII, a 94-&NoBreak;character character set is designated into G0 and G1, the terminal would report a single byte, coded in binary as 01001100 = hex 4C = ASCII "L".</p></li>
<li><p>Sdesig<span> &mdash; </span>A string of bytes which consist of the strings of designating tails of the character sets designated into G0, G1, G2, and G3, in that order.  The designating tail consists of the intermediate and final characters of the Select Character Set (SCS) designating escape sequence for the character set.</p>
<p>(Example:  If ASCII were designated into G0, the Line Drawing (DEC Special Graphics) set into G1, and the DEC Supplemental Set into G2 and G3, the value of Sdesig would be: 'B0%5%5')</p>
<p>Note:  this string is deliberately placed at the end of the data of the DECCIR control string, because the semicolon (;) separator character used between the previous parameters is a valid character in a SCS escape sequence.</p>
<p>Note:  This string will report the User Preference Supplemental Set (UPSS) designator if that is how a character set was designated.  DECRQUPSS can be used to determine the actual UPSS if needed.</p></li>
</ul>
<a id="5-203" data-page="5-203"></a>
<aside>
<h4>Example&nbsp;</h4>
<p>An example DECCIR report, assuming the default state of the terminal would be:</p>
<p><samp>&lt;DCS>1$u1;1;1;@;@;@;0;2;@;BB&lt;&lt; &lt;ST></samp></p>
<p>indicating that:</p>
<ul>
<li>"1;1;1" - cursor home on first page</li>
<li>"@;@" - no graphic rendition or character attribute active; DECOM reset, no SS2, SS3, or auto-wrap is pending<br />(ASCII @ is binary 01000000)</li>
<li>"0;2" - G0 in GL and G2 in GR</li>
<li>"@" - all character sets designated are 94-&NoBreak;character character sets</li>
<li>"BB&lt;&lt;" - ASCII in G1 and G2, User Preference Supplemental Set in G2 and G3</li>
</ul>
</aside>
</section>
<a id="5-204" data-page="5-204"></a>
<section id="DECTABSR">
<h4>Tabulation Stop Report <span>&mdash;</span> DECTABSR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report the presentation state tab stops</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  2    $    u    D...D  ST
9/0  3/2  2/4  7/5  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> The data of a device control string for a Tabulation Stop Report consists of a string of numeric parameters specifying where tabulation stops are currently set in the terminal, separated by slash ("/") characters.  An example of a DECTABSR when the terminal has 8 column tabs set would be as follows:</p>
<p><samp>DCS 2 $ u 9 / 17 / 25 / 33 / 41 / 49 / 57 / 65 / 73 ST</samp></p>
</section>
<a id="5-205" data-page="5-205"></a>
<section id="DECRSPS">
<h4>Restore Presentation State <span>&mdash;</span> DECRSPS</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report previously reported presentation state (cursor information or tab stops).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Ps   $    t    D...D  ST
9/0  Ps   2/4  7/4  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> This device control string is sent to reset the terminal to the presentation state described in the data of the control string.  This DCS takes one selective parameter, which indicates the format of the data of the DCS.  The data of the DCS must be in the format of one of the Presentation State Reports (DECPSR).  The type of DECPSR format that the data consists of is specified by the selective parameter:</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="--------------">Type of DECPSR</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>error, restore ignored</td></tr>
<tr><td>1</td><td>Cursor Information Report  (<a href="#DECCIR">DECCIR</a>)</td></tr>
<tr><td>2</td><td>Tabulation Stop Report  (<a href="#DECTABSR">DECTABSR</a>)</td></tr>
</tbody>
</table>
<p>When this sequence is received by the terminal, the terminal will begin to change the terminal state according to the state encoded in the data of the control string.</p>
<p>If an invalid value is detected, the terminal will ignore the error, if possible, and if not will ignore the remainder of the data, parsing until a ST control is encountered.  This may leave the terminal state partially unrestored.  No error indication is returned to the host.</p>
</section>
<a id="5-206" data-page="5-206"></a>
<section id="DECRQTSR">
<h4>Request Terminal State Report <span>&mdash;</span> DECRQTSR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To request a compact report of most settable state.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>CSI   Ps  $    u
9/11  Ps  2/4  7/5</samp></pre>
</div>
<p><em>Description:</em> DECRQTSR causes the terminal to issue a Terminal State Report (DECTSR).  Terminal State Reports transmit information on global state within the terminal.  The type of DECTSR returned depends on the value of the selective parameter.</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="--------------">Type of DECTSR</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>ignored, no report sent</td></tr>
<tr><td>1</td><td>Terminal State Report  (<a href="#DECTSR">DECTSR</a>)</td></tr>
</tbody>
</table>
<p>If the terminal does not recognize the type of DECTSR requested, the entire command is ignored.</p>
</section>
<a id="5-207" data-page="5-207"></a>
<section id="DECTSR">
<h4>Terminal State Report (1) <span>&mdash;</span> DECTSR</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To report most settable terminal state in one compact sequence.</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  1    $    s    D...D  ST
9/11 3/1  2/4  7/3  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> The Terminal State Report is a device control string containing a collection of terminal device attributes.  A Terminal State Report is sent in response to a Request Terminal State Report control sequence (DECRQTSR) with Selective Parameter "1".</p>
<p>The data of the device control string for a Terminal State Report consists of a Sixel encoded, string of 8-bit bytes which contains the the state information for the device.  This string is guaranteed not to be longer than 256 characters, including the DCS control character, introducer sequence, and ST control character.</p>
<p>The state information reported is the same as the state information available through the other discrete TSI controls.  This generally represents all settable state in the terminal with the exception of large data items that are not practical to report (the contents of the logical display, DRCS, UDK definitions, and Macros).</p>
<p>The format of the data is firmware revision dependent.  Software should not expect the format to remain the same across firmware revisions or different members of a terminal family.</p>
<p>The format of DECTSR is: <samp>DCS 1 $ s D1...Dn &lt;checksum1> &lt;checksum2> ST</samp></p>
<p>Where</p>
<ul>
<li>D1...Dn are data reported</li>
<li>&lt;checksum1> &lt;checksum2> is a two bytes check sum of D1...Dn</li>
</ul>
<p>(checksum = 2's complement of D1 + D2 + ... + Dn; 8-bit addition with no Carry)</p>
<aside>
<h4>Implementation Guideline:&nbsp;</h4>
<p>On the VT420, there are 110 bytes in D1...Dn, system parameters are contained in low nibble of each byte, and D1...Dn are in the range 4/0 to 4/15 (bit 6 of Dn always set, bit 7,5,4 of Dn always reset).</p>
</aside>
</section>
<a id="5-208" data-page="5-208"></a>
<section id="DECRSTS">
<h4>Restore Terminal State <span>&mdash;</span> DECRSTS</h4>
<p><em>Levels:</em> 2x (TSI), 3-4</p>
<p><em>Purpose:</em> To restore previously reported terminal state (DECTSR).</p>
<div>
<p><em>Format:</em></p>
<pre><samp>DCS  Ps  $    p    D...D  ST
9/0  Ps  2/4  7/0  D...D  9/12</samp></pre>
</div>
<p><em>Description:</em> This device control string is sent to reset the terminal to the state described in the data of the control string.  This DCS takes one selective parameter, which indicates the format of the data of the DCS.  The data of the DCS must be in the format of one of the Terminal State Reports (DECTSR).  The type of DECTSR format that the data consists of is specified by the selective parameter:</p>
<table>
<thead>
<tr><th data-underline="--">Ps</th><th data-underline="--------------">Type of DECTSR</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>illegal, restore ignored</td></tr>
<tr><td>1</td><td>Terminal State Report (<a href="#DECTSR">DECTSR</a>)</td></tr>
</tbody>
</table>
<p>When this sequence is received, buffered, and checksummed by the terminal, the terminal will begin to change the terminal state according to the state encoded in the data of the control string.  If the checksum fails, the entire sequence is ignored.  If an invalid value is detected, the terminal will ignore the error if possible, and if not, ignore the remainder of the data, parsing until a ST control is encountered.  This may leave the terminal in a partially unrestored state.  No error indication is returned to the host.</p>
<aside>
<h4>Note</h4>
<p>Software should not depend on the format of the Terminal State Report (DECTSR) to be the same across members of the VT400 family, nor even across different firmware revisions of a single terminal model.  Software should not use DECRSTS to restore a terminal to a saved state unless that state was previously read from the terminal.</p>
</aside>
</section>
</section>
</section>
<a id="5-209" data-page="5-209"></a>
<section id="5.14">
<h2>5.14  Internal Functions And Procedures</h2>
<section id="5.14.1">
<h3>5.14.1  End Of Line</h3>
<pre><code>/*************
*
* end_of_line
* This function returns the last position of the line
* based on its line attributes and column mode.
*
* assumes line is on the current page
*************/
short int end_of_line (line)
  line_t line;
{
  line_t base;  /* first line(-1) of page */
  column_t end_line;
/*...........*/
if (column_mode = ONE_THIRTY_TWO) end_line = 132;
else end_line = 80;

base = (active_position.page-1) * lines_per_page;
if (line_rendition[line + base] != SINGLE_WIDTH)
  end_line /= 2;
return(end_line);
}
</code></pre>
</section>
<a id="5-210" data-page="5-210"></a>
<section id="5.14.2">
<h3>5.14.2  Scroll Up</h3>
<pre><code>/****************
*
* scroll_up
*
* This procedure causes the scroll area between the line
* designated and the Bottom Margin (inclusive) on the
* active page to scroll upward by the number of lines
* designated in the count.  Line and Character Renditions
* are scrolled with the data.  A new single-width line with
* all character positions empty is inserted at the Bottom Margin.
* Lines scrolled off the top of the scrolling region are lost.
*
******************/
void scroll_up(top_line, count)
  line_t top_line;
  line_t count;
{
  line_t y;
  column_t x;
  line_t base;     /* first line(-1) of page */
/*...............*/
base = (active_position.page-1) * lines_per_page;
while (count > 0)
  {
  for (y=top_line+base; y&lt;bottom_margin+base; y++)
    {
    line_rendition[y] = line_rendition[y+1];
    for (x=left_margin; x&lt;=right_margin; x++)
      strncpy( display[y][x], display[y-1][x],
               sizeof(character_t) );
    }
  line_rendition[bottom_margin+base] = SINGLE_WIDTH;
  for (x=left_margin; x&lt;=right_margin; x++)
    display[bottom_margin][x].code = EMPTY_CHARACTER;
  count -= 1;
  }
} /* end scroll_up */
</code></pre>
</section>
<a id="5-211" data-page="5-211"></a>
<section id="5.14.3">
<h3>5.14.3  Scroll Down</h3>
<pre><code>/****************
*
* scroll_down
*
* This procedure causes the scroll area between the line
* designated and the Bottom Margin (inclusive) on the
* active page to scroll downward by the number of lines
* designated in the count.  Line and Character Renditions
* are scrolled with the data.  A new single-width line with
* all character positions empty is inserted at the Top Margin.
* Lines scrolled off the bottom of the scrolling region are lost.
*
******************/
void scroll_down(top_line, count)
  line_t top_line;
  line_t count;
{
  line_t y;
  column_t x;
  line_t base;     /* first line(-1) of page */
/*...............*/
base = (active_position.page-1) * lines_per_page;
while (count > 0)
  {
  for (y=bottom_margin+base; y>top_line+base; y--)
    {
    line_rendition[y] = line_rendition[y-1];
    for (x=left_margin; x&lt;=right_margin; x++)
      strncpy( display[y][x], display[y-1][x],
               sizeof(character_t));
    }
  line_rendition[top_line+base] = SINGLE_WIDTH;
  for (x=left_margin; x&lt;=right_margin; x++)
    display[top_line][x].code = EMPTY_CHARACTER;
  count -= 1;
  }
} /* end scroll_down */
</code></pre>
</section>
<a id="5-212" data-page="5-212"></a>
<section id="5.14.4">
<h3>5.14.4  Scroll Left</h3>
<pre><code>/****************
*
* scroll_left
*
* This procedure causes the scroll area between the column
* designated and the Right Margin (inclusive) on the
* active page to scroll leftward by the number of columns
* designated in the count.  A new column with all character
* positions empty is inserted at the Right Margin.
* Characters scrolled past the scrolling region are lost.
*
******************/
void scroll_left(left_column, count)
  column_t left_column;
  column_t count;
{
  line_t y;
  column_t x;
  line_t base;     /* first line(-1) of page */
/*...............*/
base = (active_position.page-1) * lines_per_page;
while (count > 0)
  {
  for (y=top_margin+base; y&lt;=bottom_margin+base; y++)
    {
    for (x=left_column; x&lt;right_margin; x++)
      strncpy( display[y][x], display[y][x+1],
               sizeof(character_t));
    display[y][right_margin].code = EMPTY_CHARACTER;
    }
  count -= 1;
  }
} /* end scroll_left */
</code></pre>
</section>
<a id="5-213" data-page="5-213"></a>
<section id="5.14.5">
<h3>5.14.5  Scroll Right</h3>
<pre><code>/****************
*
* scroll_right
*
* This procedure causes the scroll area between the column
* designated and the Right Margin (inclusive) on the
* active page to scroll right by the number of columns
* designated in the count.  A new column with all character
* positions empty is inserted at the designated column.
* Characters scrolled past the scrolling region are lost.
*
******************/
void scroll_right(left_column, count)
  column_t left_column;
  column_t count;
{
  line_t y;
  column_t x;
  line_t base;     /* first line(-1) of page */
/*...............*/
base = (active_position.page-1) * lines_per_page;
while (count > 0)
  {
  for (y=top_margin+base; y&lt;=bottom_margin+base; y++)
    {
    for (x=right_margin; x>left_column; x--)
      strncpy( display[y][x], display[y][x-1],
               sizeof(character_t));
    display[y][left_column].code = EMPTY_CHARACTER;
    }
  count -= 1;
  }
} /* end scroll_right */
</code></pre>
</section>
</section>
<a id="5-214" data-page="5-214"></a>
<section id="5.15">
<h2>5.15  Control Function Reference To Other Chapters</h2>
<p>This subsection lists ANSI control functions that are not described in this chapter (DEC STD 70-5, Character Cell Display) and indicates where in the VSRM they are described as a reference to the rest of ANSI host interface.</p>
<h3>Control Function Reference</h3>
<ul>
<li>Terminal Management Functions<ul>
<li>DA<span> &mdash; </span>Device Attributes</li>
<li>DECRPTUI<span> &mdash; </span>Report Terminal Unit ID</li>
<li>DSR<span> &mdash; </span>Device Status Report</li>
<li>DECID<span> &mdash; </span>Identify Device</li>
<li>DECSCL<span> &mdash; </span>Select Conformance Level</li>
<li>DECSR<span> &mdash; </span>Secure Reset</li>
<li>DECSRC<span> &mdash; </span>Secure Reset Confirmation</li>
<li>DECSTR<span> &mdash; </span>Soft Terminal Reset</li>
<li>DECSTUI<span> &mdash; </span>Set Terminal Unit ID (Restricted)</li>
<li>RIS<span> &mdash; </span>Reset to Initial state</li>
</ul>
</li>
<li>Code Extension Functions<ul>
<li>Announce Subset of Code Extension Facilities</li>
<li>Locking Shifts: LS0, LS1, LS2, LS3, LS1R, LS2R, LS3R</li>
<li>Single Shifts: SS2, SS3</li>
<li>S7C1T<span> &mdash; </span>Select 7-bit C1 Transmission</li>
<li>S8C1T<span> &mdash; </span>Select 8-bit C1 Transmission</li>
</ul>
</li>
<li>Keyboard Processing Functions<ul>
<li>DECARM<span> &mdash; </span>Autorepeat Mode</li>
<li>DECBKM<span> &mdash; </span>Backarrow Key Mode</li>
<li>DECCKM<span> &mdash; </span>Cursor Keys Mode</li>
<li>DECKBUM<span> &mdash; </span>Keyboard Usage Mode</li>
<li>DECKPAM<span> &mdash; </span>Keypad Application Mode</li>
<li>DECKPNM<span> &mdash; </span>Keypad Numeric Mode</li>
<li>DECNKM<span> &mdash; </span>Numeric Keypad Mode</li>
<li>DSR<span> &mdash; </span>Device Status Report (keyboard status)</li>
<li>KAM<span> &mdash; </span>Keyboard Action Mode</li>
<li>DECLFC<span> &mdash; </span>Local Functions Control</li>
<li>DECLFKC<span> &mdash; </span>Local Function Key Control</li>
<li>DECSMKR<span> &mdash; </span>Select Modifier Key Reporting</li>
<li>DECKPM<span> &mdash; </span>Key Position Mode</li>
<li>DECEKBD<span> &mdash; </span>Extended Keyboard Report</li>
</ul>
</li>
<li>Terminal Synchronization<ul>
<li>XON</li>
<li>XOFF</li>
<li>BREAK</li>
<li>DECXRLM<span> &mdash; </span>Transmit Rate Limiting Mode</li>
</ul>
</li>
<li>Extensions<ul>
<li>DRCS<ul>
<li>DECDLD<span> &mdash; </span>Downline Load</li>
</ul>
</li>
<li>UDK<ul>
<li>DECUDK<span> &mdash; </span>User Defined Keys</li>
<li><a id="5-215" data-page="5-215"></a>DSR<span> &mdash; </span>Device Status Report (UDK lock)</li>
</ul>
</li>
<li>Session Management Extension<ul>
<li>DECES<span> &mdash; </span>Enable Sessions</li>
</ul>
</li>
<li>Printer Port<ul>
<li>DECPEX<span> &mdash; </span>Print Extent Mode</li>
<li>DECPFF<span> &mdash; </span>Print Form Feed Mode</li>
<li>DSR<span> &mdash; </span>Device Status Report (printer port)</li>
<li>MC<span> &mdash; </span>Media Copy</li>
</ul>
</li>
<li>Status Display<ul>
<li>DECSASD<span> &mdash; </span>Select Active Status Display</li>
<li>DECSSDT<span> &mdash; </span>Select Status Display Type</li>
</ul>
</li>
</ul>
</li>
<li>Documented Exceptions<ul>
<li>DECANM<span> &mdash; </span>ANSI/VT52 Mode</li>
<li>DECALN<span> &mdash; </span>Screen Alignment</li>
<li>DECAWM<span> &mdash; </span>Autowrap Mode</li>
<li>DECTST<span> &mdash; </span>Invoke Confidence Test</li>
<li>CRM<span> &mdash; </span>Control Representation Mode</li>
</ul>
</li>
</ul>
</section>
<a id="5-216" data-page="5-216"></a>
<section id="5.16">
<h2>5.16  Change History</h2>
<section id="5.16.1">
<h3>5.16.1  Rev 0.4 To 0.5</h3>
<p>The following changes were made at this revision to properly integrate this section with the rest of the Video Systems Reference Manual:</p>
<ol>
<li><p>The name was changed from "Character Cell Display Level 1" to "Character Cell Display".  All references to Level 1 operation only were removed, and explicit reference to both Level 1 and Level 2 operation was added for all functions.</p></li>
<li><p>The Reference Standards section was updated.</p></li>
<li><p>The Conformance section, the list of conforming products, and the tables of required functions were removed and made a separate chapter in the Video SRM ("Conformance Requirements").</p></li>
<li><p>The program flow diagrams and the executive routines were moved to the chapter "Specification Program Structure".</p></li>
<li><p>The Reset to Initial State control was moved to the chapter "Terminal Management".</p></li>
<li><p>Some variable names were changed to be consistent with their use throughout the rest of the Video SRM.</p></li>
<li><p>The algorithm for Insert or Replace Character was corrected to include the processing of Single Shift control functions.</p></li>
<li><p>The Set Mode and Reset Mode control functions were moved to the chapter "Specification Program Structure", and their detailed implementation was broken out into a separate section for each mode related to Character Cell Display operation.</p></li>
<li><p>The description of Blink rendition was changed.</p></li>
<li><p>A note was added concerning software dependence on the speed of implementing changes of state in Screen Mode.</p></li>
<li><p>The purpose section for Line Feed, Vertical Tab, Form Feed, Index, Reverse Index, and Next Line was reworded to indicate scrolling if necessary, and to indicate (where appropriate) the use of fallback implementation in video terminals.</p></li>
<li><p>The section on Substitute was reworded to remove the reference to "fallback" character.</p><a id="5-217" data-page="5-217"></a></li>
<li><p>The note on software use of Horizontal and Vertical Position was changed to remove the reference to retransmission.</p></li>
<li><p>A definition was added for the term "Margin".</p></li>
<li><p>Beginning of line and end of line conditions were added to the Erase In Display algorithm.</p></li>
<li><p>Clearing of the Last Column Flag was added to the algorithms for Delete Character and Reset Auto Wrap Mode.</p></li>
<li><p>A note was added to the section on slow scrolling to indicate that it must render text "recognizable", but not necessarily "readable".</p></li>
<li><p>A note was added on conforming software use of Double Height lines.</p></li>
<li><p>A section was added for Character Set Selection, which was previously a part of the chapter "Code Extension Layer".</p></li>
<li><p>A section was added for the Warning Bell, which was previously a part of the "Terminal Management" chapter.</p></li>
<li><p>A section was added for Text Cursor Enable Mode, which was previously a part of the "Terminal Management" chapter.</p></li>
<li><p>A section was added for Control Representation Mode, which is currently planned for Level 2 terminals (subject to review).</p></li>
</ol>
</section>
<a id="5-218" data-page="5-218"></a>
<section id="5.16.2">
<h3>5.16.2  Revision 0.5 To AX10</h3>
<ol>
<li><p>Added the Selectively Erasable Characters extension, which required the following:</p><ol>
<li><p>A state description for Character Attributes.</p></li>
<li><p>New entries in the state tables.</p></li>
<li><p>Addition of the Select Character Attribute (DECSCA) control function.</p></li>
<li><p>Modification of the Erase In Line (EL) and Erase In Display (ED) control functions.</p></li>
<li><p>Addition of the Selective Erase In Line (DECSEL) and Selective Erase In Display (DECSED) control functions.</p></li>
</ol>
<p>It also required changes to the following routines:</p><ul>
<li>Insert or Replace Graphic Character</li>
<li>Save Cursor</li>
<li>Restore Cursor</li>
</ul>
</li>
<li><p>Removed Control Representation Mode (CRM) to an appendix to the SRM.  It will not be invokable from the host.</p></li>
<li><p>Added the Erase Character (ECH) and Insert Character (ICH) control functions.</p></li>
<li><p>Added a note to the description of Auto Wrap Mode to indicate that Space characters also affect the wrap condition.</p></li>
<li><p>Added the following control functions to the list of functions which clear the Auto Wrap state (Last Column Flag):</p><ul>
<li>Erase Character</li>
<li>Insert Character</li>
<li>Erase In Line</li>
<li>Selective Erase In Line</li>
<li>Erase In Display</li>
<li>Selective Erase In Display</li>
</ul>
</li>
<li><p>Added a note that the Current Attribute is saved in the Cursor Save Buffer if the Selectively Erasable Characters extension is supported.</p></li>
<li><p>Added values to the Select Graphic Rendition (SGR) control function for Level 2 to turn off Bold, Blink, <a id="5-219" data-page="5-219"></a>Underscore, and Reverse renditions.</p></li>
<li><p>Made minor corrections to the algorithms for Double Width and Double Height lines.</p></li>
<li><p>Added a note to the Substitute control function referring to the section "Code Extension Layer" for the handling of Substitute within escape and control sequences.</p></li>
<li><p>Added a deviation note to the Index control function for the VT100 and VT125 to indicate that in these terminals the control is affected by the setting of New Line Mode.</p></li>
<li><p>Changed the algorithm for Tabulation Clear (TBC) to process multiple selective parameters.</p></li>
<li><p>Made extensive changes to the algorithms for Erase In Line (EL) and Erase In Display (ED) to provide the following:</p><ul>
<li>processing of multiple selective parameters.</li>
<li>setting of line rendition to single width when all characters are erased.</li>
<li>processing of private parameter for selective erase function.</li>
</ul>
</li>
<li><p>Corrected the coding of Delete Character (DCH), which is CSI Pn P.</p></li>
<li><p>Added a note on the use of User Preference Features (modes) which are not to be used by software except in response to an explicit user request.</p></li>
<li><p>Made notes that setting and resetting Column Mode (DECCOLM) will clear the screen, etc., even if the terminal was already in the selected state.</p></li>
<li><p>Noted that the Warning Bell may be disabled in Setup.</p></li>
<li><p>Modified the descriptions of Vertical Tab (VT) and Form Feed (FF) to point to the Line Feed algorithm.</p></li>
<li><p>Made Insert Replacement Mode (IRM), Delete Character (DCH), Delete Line (DL), and Insert Line (IL) a Level 1 Editing Extension, which is required in all future Level 1 implementations, and in Level 2.  Removed all VT100 family deviation notes on these functions.</p></li>
<li><p>Made Auto Wrap Mode an exception to Level 1, and removed all references to this and the Last Column Flag.  Also removed all VT100 family deviation notes on this function.</p><a id="5-220" data-page="5-220"></a></li>
<li><p>Modified the Save Cursor (DECSC) and Restore Cursor (DECRC) descriptions to differentiate between Level 1 and Level 2 functionality.</p></li>
<li><p>Added a character set table to the state descriptions and modified the algorithms for Designate Character Set to accommodate redefinition of the designator sequences using DRCS.</p></li>
<li><p>Corrected dual coding in the algorithm for Insert or Replace Graphic Characters.</p></li>
<li><p>Added a note to the Restore Cursor control indicating the handling of the condition in which the cursor is restored outside of the scrolling region with Origin Mode set.</p></li>
<li><p>Made corrections in the algorithms for Erase Character, Delete Character, Insert Character, Delete Line, and Insert Line.</p></li>
<li><p>Added a note on the use of the UK character set in Level 1 operation to the section on character set designation.</p></li>
</ol>
</section>
<section id="5.16.3">
<h3>5.16.3  Rev AX10 To AX11</h3>
<ol>
<li><p>Removed Rev AX10 change bars.  Added change bars to any change that could affect conformance or interpretation of the document or should be brought to the attention of terminal implementors or software engineers.</p></li>
<li><p>Added note that level 2 SGR parameters may be recognized when device is operating in level 1 mode, but that conforming software shall not rely on this feature.</p></li>
<li><p>Corrected sense of Selectively Erasable Attribute (set using DECSCA).  The default or attribute off condition is that characters are selectively erasable.</p></li>
</ol>
</section>
<a id="5-221" data-page="5-221"></a>
<section id="5.16.4">
<h3>5.16.4  Rev AX11 To AX12</h3>
<ol>
<li><p>Removed Rev AX11 change bars.  Added change bars to any change that could affect conformance or interpretation of the document or should be brought to the attention of terminal implementors or software engineers.</p></li>
<li><p>Updated Reference Standards section and put at end after Change History per convention for other chapters.</p></li>
<li><p>Added section to Introduction explaining chapter organization as a number of small sections.  Re-organized entire chapter to group related controls by function instead of syntax.</p></li>
<li><p>Modified all code to operate on the current page.</p></li>
</ol>
<p>Terminology Section:</p>
<ol start="5">
<li><p>Removed definitions of the following terms which are defined in the Code Extension section:</p><ul>
<li>Bit Combination</li>
<li>Character</li>
<li>Control Character</li>
<li>Control Function</li>
<li>Control Sequence</li>
<li>Control String</li>
<li>Escape Character (ESC)</li>
<li>Escape Sequence</li>
<li>Final Character</li>
<li>Intermediate Character</li>
<li>Numeric Parameter</li>
<li>Parameter</li>
<li>Parameter String</li>
<li>Selective Parameter</li>
</ul>
</li>
<li><p>Added definition of Logical Display - the lines and columns available for storing and presenting graphic characters as seen by the application or host computer.  A Logical Display may be organized as a single rectangular array of lines and columns (one page), or divided into a number of identically sized pages, each of which is a rectangular array of lines and columns.</p></li>
<li><p>Added definition of Page - An addressable area of a Logical Display organized as a rectangular array of lines and columns.  The number of lines and columns defines the Page Size.</p></li>
<li><p>Added subsection titled "Code Extension Terms" listing terms defined in the Code Extension chapter of the VSRM (DEC STD 70-3).</p><a id="5-222" data-page="5-222"></a></li>
<li><p>Removed the following terms which do not appear in the text of the chapter:  Introducer; Transfer; Transmission Control.</p></li>
<li><p>Clarified definition of Control Sequence Introducer (CSI) - The C1 control (represented by a single character in 8-&NoBreak;bits, or a two character ESC Fe sequence in 7-bits) which initiates a control sequence.  CSI is a prefix affecting the interpretation of a limited number of contiguous bit combinations.  [This should be in the Code Extension chapter as well, but isn't at this time]</p></li>
<li><p>Clarified definition of Default - A function-dependent value that is assumed when no explicit value, or a value of 0, is specified.</p></li>
<li><p>Clarified definition of Margin - A line which marks the upper or lower boundary of the scrolling region (vertical scroll margin).  A column which marks the left or right boundary of the scrolling region (horizontal scroll margin).</p></li>
</ol>
<p>Display Coordinate System and Addressing</p>
<ol start="13">
<li><p>Logical Display:  Described concept of Logical Display and Page Size, default sizes, and ability to change it.</p></li>
<li><p>Margins and Scrolling:  Re-organized text to combine syntax and semantics to be easier to follow.  Added section summarizing interaction of controls with scrolling region.  Added list of controls defined in this section.  Added descriptions for:  DECSLRM, DECLRMM, DECFI, DECBI to support left and right margins.</p></li>
<li><p>Cursor Movement:  Added DECXCPR extended cursor position report for use at Level 4, or with the Windowing Extension.  Updated algorithms for CUF and CUB to check right and left margins.</p></li>
</ol>
<p>Page Size and Arrangement:</p>
<ol start="16">
<li><p>Added description of DECSCPP and DECSLPP to support Level 4, or Windowing Extension.</p></li>
</ol>
<p>Page Movement:</p>
<ol start="17">
<li><p>New Subsection describing page movement controls for use at Level 4, or with the Windowing Extension.</p></li>
</ol>
<p>Windowing Extension:</p>
<ol start="18">
<li><p>Completely new subsection describing Windowing Extension.</p><a id="5-223" data-page="5-223"></a></li>
</ol>
<p>Visual Renditions</p>
<ol start="19">
<li><p>Added new subsection on ANSI Color Text Extension.  SGR parameters 31-37, 39, 41-47, 49.  Color Maps.  DECCTR - color table report.  Interactions with other visual attributes.  Guidelines for default color assignment.  DECSTGLT - Select Text Graphics Look-Up Table (for alternate text rendition mapping).</p></li>
</ol>
<p>Graphic Character Sets</p>
<ol start="20">
<li><p>Expanded section on Grahic Character sets including which sets are required at different conformance levels and extensions.  Designating sequences for character sets.  8-&NoBreak;bit Interface Architecture Extension.  NRCS Extension.</p></li>
</ol>
<p>Editing Functions:</p>
<ol start="21">
<li><p>Modified description of character insertion to cover behavior with respect to the margins.</p></li>
<li><p>Modified description of ICH, IL, and DL to be restriced to text within the Left Right Margins.</p></li>
<li><p>Added descriptions of DECIC and DECDC to support left and right margins.</p></li>
<li><p>Noted ECH, EL, DECSEL, ED, and DECSED are not affected by the margins.</p></li>
</ol>
<p>OLTP Features</p>
<ol start="25">
<li><p>Completely new subsection describing VT420 OLTP features.</p></li>
</ol>
<p>Saving and Restoring Terminal State</p>
<ol start="26">
<li><p>Terminal State Interrogation:  Completely new subsection describing TSI</p></li>
<li><p>Modified note on DECCIR (Cursor Information Report) to specify sequence returns UPSS designator if G-set was designated that way.</p></li>
</ol>
<p>Internal Functions and Procedures</p>
<ol start="28">
<li><p>Modified routines scroll_up and scroll_down to operate within the left and right margins.</p></li>
<li><p>Added routines scroll_left and scroll_right.</p></li>
</ol>
<p>Control Function Reference to Other Chapters</p>
<a id="5-224" data-page="5-224"></a>
<ol start="30">
<li><p>Completely new subsection listing control functions and what chapter of the VSRM they are described in.</p></li>
</ol>
</section>
</section>
<a id="5-225" data-page="5-225"></a>
<section id="5.17">
<h2>5.17  Reference Standards</h2>
<p>DIGITAL STANDARDS</p>
<dl>
<dt>EL-00138-00</dt>
<dd>DEC STD 138 Registry of Control
Functions for Character-Imaging Devices</dd>
<dt>EL-00169-00</dt>
<dd>DEC STD 169 Digital Standard Coded
Graphic Character Sets for Hardware
and Software</dd>
</dl>
<p>Copies of Digital Standards Can be obtained from Standards and Methods Control, CTS1-2/D4, DTN 287-3724, JOKUR::SMC</p>
<p>ANSI AND ISO STANDARDS</p>
<dl>
<dt>ANSI X3.4 - 1986</dt>
<dd>American National Standard Code for
Information Interchange (ASCII character set)</dd>
<dt>ANSI X3.41 - 1974</dt>
<dd>American National Standard Code Extension
Techniques for use with the 7-Bit Coded
Character Set of the American National
Standard Code for Information Interchange</dd>
<dt>ANSI X3.64 - 1979</dt>
<dd>Additional Controls for use with American
National Standard Code for Information
Interchange</dd>
<dt>dpANS X3.134.1-1985</dt>
<dd>8-bit ASCII Structure and Rules</dd>
<dt>dpANS X3.134.2-1985</dt>
<dd>7-bit and 8-bit ASCII Supplemental
Multinational Graphic Character Set</dd>
<dt>ISO 646</dt>
<dd>7-Bit Coded Character Set
for Information Interchange</dd>
<dt>ISO 2022:1986</dt>
<dd>Information Processing /
ISO 7-Bit and 8-Bit Coded Character Sets -
Code Extension Techniques</dd>
<dt>ISO 6429:1988</dt>
<dd>Information Processing /
Additional Controls for use with
Character Imaging Devices</dd>
<dt>ISO 8859-1:1987</dt>
<dd>Information Processing /
8-Bit Single-Byte Coded Character Sets -
Part 1 : ISO Latin Alphabet Nr 1;</dd>
</dl>
<p>Copies of ANSI and ISO Standards can be obtained from local Digital Libraries.</p>
</section>
</main>
<footer>
<a id="5-226" data-page="5-226"></a>
<section id="Index">
<h2>Section Index</h2>
<ul>
<li>Active Position, <a href="#5-20">5-20</a><ul>
<li>definition, <a href="#5-9">5-9</a></li>
</ul>
</li>
<li>Alternative Text Rendition Mapping, <a href="#5-113">5-113</a></li>
<li>Application<ul>
<li>definition, <a href="#5-9">5-9</a></li>
</ul>
</li>
<li>Application Program<ul>
<li>definition, <a href="#5-9">5-9</a></li>
</ul>
</li>
<li>ASCII, <a href="#5-115">5-115</a></li>
<li>Assign User-Preference Supplemental Set, <a href="#5-123">5-123</a></li>
<li>Audible Indicator<ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Audible Indicators, <a href="#5-114">5-114</a></li>
<li>Back Index<ul>
<li>control function, <a href="#5-39">5-39</a></li>
</ul>
</li>
<li>Back Space<ul>
<li>control function, <a href="#5-63">5-63</a></li>
</ul>
</li>
<li>BEL, <a href="#5-114">5-114</a></li>
<li>Bell<ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>8-bit Architecture Extension, <a href="#5-115">5-115</a></li>
<li>8-bit Multinational Characters, <a href="#5-126">5-126</a></li>
<li>7-bit NRCS Characters, <a href="#5-126">5-126</a></li>
<li>Blink Rendition, <a href="#5-101">5-101</a></li>
<li>Bold Rendition, <a href="#5-101">5-101</a></li>
<li>Bottom Margin, <a href="#5-25">5-25</a><ul>
<li>default value, <a href="#5-25">5-25</a></li>
</ul>
</li>
<li>BS, <a href="#5-63">5-63</a></li>
<li>Carriage Return<ul>
<li>control function, <a href="#5-58">5-58</a></li>
</ul>
</li>
<li>Change Attributes Rectangular Area<ul>
<li>control function, <a href="#5-173">5-173</a></li>
</ul>
</li>
<li>Character<ul>
<li>attribute, <a href="#5-165">5-165</a></li>
<li>rendition, <a href="#5-101">5-101</a></li>
</ul>
</li>
<li>Character Attribute, <a href="#5-165">5-165</a><ul>
<li>definition, <a href="#5-10">5-10</a></li>
<li>normal, <a href="#5-165">5-165</a></li>
<li>selection, <a href="#5-166">5-166</a></li>
<li>selectively erasable, <a href="#5-165">5-165</a></li>
</ul>
</li>
<li>Character Cell, <a href="#5-19">5-19</a></li>
<li>Character Cell Display<ul>
<li>definition, <a href="#5-6">5-6</a></li>
</ul>
</li>
<li>Character Imaging Device<ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Character Position, <a href="#5-19">5-19</a><ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Character Rendition<ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Character Set<ul>
<li>designation, <a href="#5-117">5-117</a></li>
</ul>
</li>
<li>Character Set Mode, <a href="#5-126">5-126</a></li>
<li>Character Set Selection<ul>
<li>DECNRCM, <a href="#5-126">5-126</a></li>
<li>UPSS, <a href="#5-123">5-123</a>, <a href="#5-125">5-125</a></li>
</ul>
</li>
<li>Character Sets, <a href="#5-115">5-115</a></li>
<li>Checksum Report, <a href="#5-181">5-181</a></li>
<li>Color Table Report, <a href="#5-109">5-109</a></li>
<li>Color Table Request, <a href="#5-109">5-109</a></li>
<li>Color Table Restore, <a href="#5-109">5-109</a></li>
<li>Color Text Extension, <a href="#5-106">5-106</a></li>
<li>Column, <a href="#5-19">5-19</a></li>
<li>132-Column Extension, <a href="#5-19">5-19</a>, <a href="#5-71">5-71</a></li>
<li>Column Mode<ul>
<li>control function, <a href="#5-71">5-71</a></li>
</ul>
</li>
<li>Control Code<ul>
<li>back index, <a href="#5-39">5-39</a></li>
<li>back space, <a href="#5-63">5-63</a></li>
<li>carriage return, <a href="#5-58">5-58</a></li>
<li>form feed, <a href="#5-62">5-62</a></li>
<li>forward index, <a href="#5-37">5-37</a></li>
<li>horizontal tab, <a href="#5-67">5-67</a></li>
<li>horizontal tabulation set, <a href="#5-69">5-69</a></li>
<li>index, <a href="#5-34">5-34</a></li>
<li>line feed, <a href="#5-59">5-59</a></li>
<li>next line, <a href="#5-64">5-64</a></li>
<li>reverse index, <a href="#5-36">5-36</a></li>
<li>substitute, <a href="#5-132">5-132</a></li>
<li>vertical tab, <a href="#5-61">5-61</a></li>
</ul>
</li>
<li>Control Codes<ul>
<li>warning bell, <a href="#5-114">5-114</a></li>
</ul>
</li>
<li>Copy Rectangular Area<ul>
<li>control function, <a href="#5-169">5-169</a></li>
</ul>
</li>
<li>CPR, <a href="#5-53">5-53</a></li>
<li>CR, <a href="#5-58">5-58</a></li>
<li>CUB, <a href="#5-47">5-47</a></li>
<li>CUD, <a href="#5-43">5-43</a></li>
<li>CUF, <a href="#5-45">5-45</a></li>
<li>CUP, <a href="#5-49">5-49</a></li>
<li>Cursor, <a href="#5-20">5-20</a><ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Cursor Backward<ul>
<li>control function, <a href="#5-47">5-47</a></li>
</ul>
</li>
<li>Cursor Control<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
</ul>
<a id="Index-1" data-page="Index-1"></a>
<ul>
<li>Cursor Down<ul>
<li>control function, <a href="#5-43">5-43</a></li>
</ul>
</li>
<li>Cursor Forward<ul>
<li>control function, <a href="#5-45">5-45</a></li>
</ul>
</li>
<li>Cursor Information Report, <a href="#5-200">5-200</a></li>
<li>Cursor Movement<ul>
<li>cursor backward, <a href="#5-47">5-47</a></li>
<li>cursor down, <a href="#5-43">5-43</a></li>
<li>cursor forward, <a href="#5-45">5-45</a></li>
<li>cursor position, <a href="#5-49">5-49</a></li>
<li>cursor position report, <a href="#5-53">5-53</a></li>
<li>cursor up, <a href="#5-41">5-41</a></li>
<li>extended cursor position report, <a href="#5-55">5-55</a></li>
<li>horizontal/vertical position, <a href="#5-51">5-51</a></li>
</ul>
</li>
<li>Cursor Position<ul>
<li>control function, <a href="#5-49">5-49</a></li>
</ul>
</li>
<li>Cursor Position Report<ul>
<li>control function, <a href="#5-53">5-53</a></li>
</ul>
</li>
<li>Cursor Save and Restore<ul>
<li>restore cursor, <a href="#5-189">5-189</a></li>
<li>save cursor, <a href="#5-187">5-187</a></li>
</ul>
</li>
<li>Cursor Save Buffer, <a href="#5-186">5-186</a></li>
<li>Cursor Symbol, <a href="#5-21">5-21</a><ul>
<li>definition, <a href="#5-10">5-10</a></li>
</ul>
</li>
<li>Cursor Up<ul>
<li>control function, <a href="#5-41">5-41</a></li>
</ul>
</li>
<li>CUU, <a href="#5-41">5-41</a></li>
<li>DCH, <a href="#5-144">5-144</a></li>
<li>DEC STD 169, <a href="#5-225">5-225</a></li>
<li>DEC Supplemental, <a href="#5-115">5-115</a></li>
<li>DEC Technical, <a href="#5-115">5-115</a></li>
<li>DECAUPSS, <a href="#5-123">5-123</a></li>
<li>DECBI, <a href="#5-39">5-39</a></li>
<li>DECCARA, <a href="#5-173">5-173</a></li>
<li>DECCIR, <a href="#5-200">5-200</a></li>
<li>DECCKSR, <a href="#5-181">5-181</a></li>
<li>DECCOLM, <a href="#5-71">5-71</a></li>
<li>DECCRA, <a href="#5-169">5-169</a></li>
<li>DECCTR, <a href="#5-109">5-109</a></li>
<li>DECDC, <a href="#5-151">5-151</a></li>
<li>DECDHLB, <a href="#5-99">5-99</a></li>
<li>DECDHLT, <a href="#5-99">5-99</a></li>
<li>DECDMAC, <a href="#5-182">5-182</a></li>
<li>DECDWL, <a href="#5-97">5-97</a></li>
<li>DECERA, <a href="#5-171">5-171</a></li>
<li>DECFI, <a href="#5-37">5-37</a></li>
<li>DECFRA, <a href="#5-170">5-170</a></li>
<li>DECHCCM, <a href="#5-85">5-85</a></li>
<li>DECIC, <a href="#5-150">5-150</a></li>
<li>DECINVM, <a href="#5-184">5-184</a></li>
<li>DECMSR, <a href="#5-185">5-185</a></li>
<li>DECNRCM, <a href="#5-126">5-126</a></li>
<li>DECOM, <a href="#5-29">5-29</a>, <a href="#5-31">5-31</a></li>
<li>DECPCCM, <a href="#5-87">5-87</a></li>
<li>DECPSR, <a href="#5-199">5-199</a></li>
<li>DECRARA, <a href="#5-175">5-175</a></li>
<li>DECRC, <a href="#5-189">5-189</a></li>
<li>DECRPDE, <a href="#5-88">5-88</a></li>
<li>DECRPM, <a href="#5-195">5-195</a></li>
<li>DECRPSS, <a href="#5-197">5-197</a></li>
<li>DECRQCRA, <a href="#5-179">5-179</a></li>
<li>DECRQDE, <a href="#5-88">5-88</a></li>
<li>DECRQM, <a href="#5-193">5-193</a></li>
<li>DECRQPSR, <a href="#5-198">5-198</a></li>
<li>DECRQSS, <a href="#5-196">5-196</a></li>
<li>DECRQTSR, <a href="#5-206">5-206</a></li>
<li>DECRQUPSS, <a href="#5-125">5-125</a></li>
<li>DECRSPS, <a href="#5-205">5-205</a></li>
<li>DECRSTS, <a href="#5-208">5-208</a></li>
<li>DECSACE, <a href="#5-177">5-177</a></li>
<li>DECSC, <a href="#5-187">5-187</a></li>
<li>DECSCA, <a href="#5-166">5-166</a></li>
<li>DECSCLM, <a href="#5-32">5-32</a></li>
<li>DECSCNM, <a href="#5-94">5-94</a>, <a href="#5-107">5-107</a></li>
<li>DECSCPP, <a href="#5-73">5-73</a></li>
<li>DECSED, <a href="#5-162">5-162</a></li>
<li>DECSEL, <a href="#5-159">5-159</a></li>
<li>DECSERA, <a href="#5-172">5-172</a></li>
<li>DECSLPP, <a href="#5-75">5-75</a></li>
<li>DECSLRM, <a href="#5-27">5-27</a></li>
<li>DECSNLS, <a href="#5-89">5-89</a></li>
<li>DECSTBM, <a href="#5-25">5-25</a></li>
<li>DECSTGLT, <a href="#5-113">5-113</a></li>
<li>DECSWL, <a href="#5-96">5-96</a></li>
<li>DECTABSR, <a href="#5-204">5-204</a></li>
<li>DECTCEM, <a href="#5-21">5-21</a></li>
<li>DECTSR, <a href="#5-207">5-207</a></li>
<li>DECVCCM, <a href="#5-86">5-86</a></li>
<li>DECXCPR, <a href="#5-55">5-55</a></li>
<li>Default<ul>
<li>definition, <a href="#5-11">5-11</a></li>
<li>left and right margins, <a href="#5-27">5-27</a></li>
<li>scrolling region, <a href="#5-25">5-25</a>, <a href="#5-27">5-27</a></li>
<li>top and bottom margins, <a href="#5-25">5-25</a></li>
</ul>
</li>
<li>default colors, <a href="#5-110">5-110</a></li>
<li>Define Macro<ul>
<li>control function, <a href="#5-182">5-182</a></li>
</ul>
</li>
<li>Delete<ul>
<li>character, <a href="#5-144">5-144</a></li>
<li>definition, <a href="#5-11">5-11</a></li>
<li>line, <a href="#5-148">5-148</a></li>
</ul>
</li>
<li>Delete Character<ul>
<li>control function, <a href="#5-144">5-144</a></li>
</ul>
</li>
<li>Delete Column<ul>
<li>control function, <a href="#5-151">5-151</a></li>
</ul>
</li>
<li>Delete Line<ul>
<li>control function, <a href="#5-148">5-148</a></li>
</ul>
</li>
</ul>
<a id="Index-2" data-page="Index-2"></a>
<ul>
<li>Designate<ul>
<li>character set, <a href="#5-117">5-117</a></li>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Designate Character Set<ul>
<li>control function, <a href="#5-117">5-117</a></li>
</ul>
</li>
<li>Device Status Report<ul>
<li>memory checksum, <a href="#5-180">5-180</a></li>
</ul>
</li>
<li>Display, <a href="#5-19">5-19</a><ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Display Attributes<ul>
<li>select character attribute, <a href="#5-166">5-166</a></li>
<li>select graphic rendition, <a href="#5-103">5-103</a></li>
</ul>
</li>
<li>DL, <a href="#5-148">5-148</a></li>
<li>Double Height Line, <a href="#5-95">5-95</a><ul>
<li>control function, <a href="#5-99">5-99</a></li>
</ul>
</li>
<li>Double Width Line, <a href="#5-95">5-95</a><ul>
<li>control function, <a href="#5-97">5-97</a></li>
</ul>
</li>
<li>dpANS X3.134.1-1985, <a href="#5-225">5-225</a></li>
<li>DRCS, <a href="#5-115">5-115</a></li>
<li>DSR, <a href="#5-180">5-180</a><ul>
<li>macro space report, <a href="#5-185">5-185</a></li>
</ul>
</li>
<li>ECH, <a href="#5-152">5-152</a></li>
<li>ED, <a href="#5-156">5-156</a></li>
<li>Editor Function<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>EL, <a href="#5-154">5-154</a></li>
<li>Empty Character<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>End Of Line<ul>
<li>internal function, <a href="#5-209">5-209</a></li>
</ul>
</li>
<li>Enter<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Erase<ul>
<li>character, <a href="#5-152">5-152</a></li>
<li>definition, <a href="#5-11">5-11</a></li>
<li>in display, <a href="#5-156">5-156</a></li>
<li>in line, <a href="#5-154">5-154</a></li>
<li>(selective) in display, <a href="#5-162">5-162</a></li>
<li>(selective) in line, <a href="#5-159">5-159</a></li>
</ul>
</li>
<li>Erase Character<ul>
<li>control function, <a href="#5-152">5-152</a></li>
</ul>
</li>
<li>Erase In Display<ul>
<li>control function, <a href="#5-156">5-156</a></li>
</ul>
</li>
<li>Erase In Line<ul>
<li>control function, <a href="#5-154">5-154</a></li>
</ul>
</li>
<li>Erase Rectangular Area<ul>
<li>control function, <a href="#5-171">5-171</a></li>
</ul>
</li>
<li>Extended Cursor Position Report<ul>
<li>control function, <a href="#5-55">5-55</a></li>
</ul>
</li>
<li>Extension<ul>
<li>Color Text, <a href="#5-106">5-106</a></li>
<li>132-Column, <a href="#5-19">5-19</a></li>
<li>132-column, <a href="#5-19">5-19</a>, <a href="#5-71">5-71</a></li>
<li>Horizontal Scrolling, <a href="#5-23">5-23</a></li>
<li>Level 1, <a href="#5-19">5-19</a></li>
<li>Level 2, <a href="#5-19">5-19</a></li>
</ul>
</li>
<li>FF, <a href="#5-62">5-62</a></li>
<li>Fill Rectangular Area<ul>
<li>control function, <a href="#5-170">5-170</a></li>
</ul>
</li>
<li>Fixed Space<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Font<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Form Feed<ul>
<li>control function, <a href="#5-62">5-62</a></li>
</ul>
</li>
<li>Format Effector<ul>
<li>definition, <a href="#5-11">5-11</a></li>
</ul>
</li>
<li>Forward Index<ul>
<li>control function, <a href="#5-37">5-37</a></li>
</ul>
</li>
<li>G-Sets, <a href="#5-118">5-118</a></li>
<li>G0, <a href="#5-118">5-118</a></li>
<li>G1, <a href="#5-118">5-118</a></li>
<li>G2, <a href="#5-118">5-118</a></li>
<li>G3, <a href="#5-118">5-118</a></li>
<li>GL, <a href="#5-118">5-118</a></li>
<li>GR, <a href="#5-118">5-118</a></li>
<li>Graphic Character<ul>
<li>definition, <a href="#5-12">5-12</a></li>
<li>insertion, <a href="#5-139">5-139</a></li>
<li>replacement, <a href="#5-139">5-139</a></li>
</ul>
</li>
<li>Graphic Rendition, <a href="#5-101">5-101</a><ul>
<li>blink, <a href="#5-101">5-101</a></li>
<li>bold, <a href="#5-101">5-101</a></li>
<li>definition, <a href="#5-12">5-12</a></li>
<li>normal, <a href="#5-101">5-101</a></li>
<li>reverse, <a href="#5-102">5-102</a></li>
<li>selection, <a href="#5-103">5-103</a></li>
<li>underscore, <a href="#5-102">5-102</a></li>
</ul>
</li>
<li>Graphic Symbol<ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Horizontal Cursor Coupling Mode<ul>
<li>control function, <a href="#5-85">5-85</a></li>
</ul>
</li>
<li>Horizontal Scrolling<ul>
<li>Extension, <a href="#5-23">5-23</a></li>
</ul>
</li>
<li>Horizontal Tab<ul>
<li>control function, <a href="#5-67">5-67</a></li>
</ul>
</li>
<li>Horizontal Tabulation, <a href="#5-65">5-65</a><ul>
<li>clearing, <a href="#5-66">5-66</a></li>
<li>default, <a href="#5-65">5-65</a></li>
</ul>
</li>
<li>Horizontal Tabulation Set<ul>
<li>control function, <a href="#5-69">5-69</a></li>
</ul>
</li>
<li>Horizontal/Vertical Position<ul>
<li>control function, <a href="#5-51">5-51</a></li>
</ul>
</li>
<li>HT, <a href="#5-67">5-67</a></li>
<li>HTS, <a href="#5-69">5-69</a></li>
<li>HVP, <a href="#5-51">5-51</a></li>
</ul>
<a id="Index-3" data-page="Index-3"></a>
<ul>
<li>ICH, <a href="#5-142">5-142</a></li>
<li>IL, <a href="#5-146">5-146</a></li>
<li>In Use Table, <a href="#5-118">5-118</a></li>
<li>IND, <a href="#5-34">5-34</a></li>
<li>Index<ul>
<li>control function, <a href="#5-34">5-34</a></li>
</ul>
</li>
<li>indexed color, <a href="#5-107">5-107</a></li>
<li>Insert<ul>
<li>character, <a href="#5-142">5-142</a></li>
</ul>
</li>
<li>Insert Character<ul>
<li>control function, <a href="#5-142">5-142</a></li>
</ul>
</li>
<li>Insert Column<ul>
<li>control function, <a href="#5-150">5-150</a></li>
</ul>
</li>
<li>Insert Line<ul>
<li>control function, <a href="#5-146">5-146</a></li>
</ul>
</li>
<li>Insert/Replacement Mode<ul>
<li>control function, <a href="#5-138">5-138</a></li>
</ul>
</li>
<li>Insertion<ul>
<li>character, <a href="#5-139">5-139</a></li>
</ul>
</li>
<li>Interfaces<ul>
<li>external, <a href="#5-8">5-8</a></li>
<li>internal, <a href="#5-8">5-8</a></li>
</ul>
</li>
<li>Internal Functions<ul>
<li>end of line, <a href="#5-209">5-209</a></li>
<li>scroll down, <a href="#5-211">5-211</a></li>
<li>scroll left, <a href="#5-212">5-212</a></li>
<li>scroll right, <a href="#5-213">5-213</a></li>
<li>scroll up, <a href="#5-210">5-210</a></li>
</ul>
</li>
<li>Invoke<ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Invoke Macro<ul>
<li>control function, <a href="#5-184">5-184</a></li>
</ul>
</li>
<li>IRM, <a href="#5-138">5-138</a></li>
<li>ISO 8859-1, <a href="#5-225">5-225</a></li>
<li>ISO Latin-1 Supplemental, <a href="#5-115">5-115</a></li>
<li>Left Margin, <a href="#5-27">5-27</a><ul>
<li>default value, <a href="#5-27">5-27</a></li>
</ul>
</li>
<li>Left Right Margin Mode<ul>
<li>control function, <a href="#5-29">5-29</a></li>
</ul>
</li>
<li>LF, <a href="#5-59">5-59</a></li>
<li>Line, <a href="#5-19">5-19</a><ul>
<li>definition, <a href="#5-12">5-12</a></li>
<li>rendition, <a href="#5-95">5-95</a></li>
</ul>
</li>
<li>Line Drawing, <a href="#5-115">5-115</a></li>
<li>Line Feed<ul>
<li>control function, <a href="#5-59">5-59</a></li>
</ul>
</li>
<li>Line Rendition, <a href="#5-95">5-95</a><ul>
<li>double-height line, <a href="#5-99">5-99</a></li>
<li>double-width line, <a href="#5-97">5-97</a></li>
<li>single-width line, <a href="#5-96">5-96</a></li>
</ul>
</li>
<li>LNM, <a href="#5-57">5-57</a></li>
<li>Logical Display, <a href="#5-19">5-19</a>, <a href="#5-70">5-70</a><ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Macro Space Report, <a href="#5-185">5-185</a><ul>
<li>DSR, <a href="#5-185">5-185</a></li>
</ul>
</li>
<li>Margin<ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Margins, <a href="#5-23">5-23</a></li>
<li>Memory Checksum<ul>
<li>DSR, <a href="#5-180">5-180</a></li>
</ul>
</li>
<li>Modes, <a href="#5-133">5-133</a><ul>
<li>column, <a href="#5-71">5-71</a></li>
<li>definition, <a href="#5-12">5-12</a></li>
<li>Horizontal Cursor Coupling, <a href="#5-85">5-85</a></li>
<li>insert/replacement, <a href="#5-138">5-138</a></li>
<li>Left Right Margin, <a href="#5-29">5-29</a></li>
<li>new line, <a href="#5-57">5-57</a></li>
<li>origin, <a href="#5-31">5-31</a></li>
<li>Page Cursor Coupling, <a href="#5-87">5-87</a></li>
<li>screen, <a href="#5-94">5-94</a></li>
<li>scrolling, <a href="#5-32">5-32</a></li>
<li>Send-Receive, <a href="#5-135">5-135</a></li>
<li>text cursor enable, <a href="#5-21">5-21</a></li>
<li>Vertical Cursor Coupling, <a href="#5-86">5-86</a></li>
</ul>
</li>
<li>National Replacement Character Set Mode, <a href="#5-126">5-126</a></li>
<li>NEL, <a href="#5-64">5-64</a></li>
<li>New Line Mode, <a href="#5-57">5-57</a><ul>
<li>control function, <a href="#5-57">5-57</a></li>
</ul>
</li>
<li>Next Line<ul>
<li>control function, <a href="#5-64">5-64</a></li>
</ul>
</li>
<li>Next Page<ul>
<li>control function, <a href="#5-77">5-77</a></li>
</ul>
</li>
<li>Normal Rendition, <a href="#5-101">5-101</a></li>
<li>NP, <a href="#5-77">5-77</a></li>
<li>NRCS, <a href="#5-115">5-115</a></li>
<li>Operating System<ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Origin Mode<ul>
<li>control function, <a href="#5-31">5-31</a></li>
</ul>
</li>
<li>Page, <a href="#5-19">5-19</a><ul>
<li>definition, <a href="#5-12">5-12</a></li>
</ul>
</li>
<li>Page Arrangement, <a href="#5-70">5-70</a></li>
<li>Page Cursor Coupling Mode<ul>
<li>control function, <a href="#5-87">5-87</a></li>
</ul>
</li>
<li>Page Position Absolute<ul>
<li>control function, <a href="#5-81">5-81</a></li>
</ul>
</li>
<li>Page Position Backward<ul>
<li>control function, <a href="#5-83">5-83</a></li>
</ul>
</li>
<li>Page Position Relative<ul>
<li>control function, <a href="#5-82">5-82</a></li>
</ul>
</li>
<li>Page Size, <a href="#5-19">5-19</a>, <a href="#5-70">5-70</a></li>
<li>Pan Down, <a href="#5-91">5-91</a></li>
<li>Pan Up, <a href="#5-92">5-92</a></li>
</ul>
<a id="Index-4" data-page="Index-4"></a>
<ul>
<li>PP, <a href="#5-79">5-79</a></li>
<li>PPA, <a href="#5-81">5-81</a></li>
<li>PPB, <a href="#5-83">5-83</a></li>
<li>PPR, <a href="#5-82">5-82</a></li>
<li>Preceding Page<ul>
<li>control function, <a href="#5-79">5-79</a></li>
</ul>
</li>
<li>Presentation State Report, <a href="#5-199">5-199</a></li>
<li>Received Data Stream<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>Reference Standards, <a href="#5-225">5-225</a></li>
<li>ReGIS, <a href="#5-112">5-112</a></li>
<li>Replacement<ul>
<li>character, <a href="#5-139">5-139</a></li>
</ul>
</li>
<li>Report Displayed Extent, <a href="#5-88">5-88</a></li>
<li>Report Mode, <a href="#5-195">5-195</a></li>
<li>Report Selection or Setting, <a href="#5-197">5-197</a></li>
<li>Request Checksum of Rectangular Area<ul>
<li>control function, <a href="#5-179">5-179</a></li>
</ul>
</li>
<li>Request Displayed Extent, <a href="#5-88">5-88</a></li>
<li>Request Mode, <a href="#5-193">5-193</a></li>
<li>Request Presentation State Report, <a href="#5-198">5-198</a></li>
<li>Request Selection or Setting, <a href="#5-196">5-196</a></li>
<li>Request Terminal State Report, <a href="#5-206">5-206</a></li>
<li>Request User-Preference Supplemental Set, <a href="#5-125">5-125</a></li>
<li>Reset Mode<ul>
<li>column, <a href="#5-71">5-71</a></li>
<li>Horizontal Cursor Coupling, <a href="#5-85">5-85</a></li>
<li>insert/replacement, <a href="#5-138">5-138</a></li>
<li>Left Right Margin, <a href="#5-29">5-29</a></li>
<li>new line, <a href="#5-57">5-57</a></li>
<li>origin, <a href="#5-31">5-31</a></li>
<li>Page Cursor Coupling, <a href="#5-87">5-87</a></li>
<li>screen, <a href="#5-94">5-94</a></li>
<li>scrolling, <a href="#5-32">5-32</a></li>
<li>send receive mode, <a href="#5-135">5-135</a></li>
<li>text cursor enable, <a href="#5-21">5-21</a></li>
<li>Vertical Cursor Coupling, <a href="#5-86">5-86</a></li>
</ul>
</li>
<li>Restore Cursor<ul>
<li>control function, <a href="#5-189">5-189</a></li>
</ul>
</li>
<li>Restore Presentation State, <a href="#5-205">5-205</a></li>
<li>Restore Terminal State, <a href="#5-208">5-208</a></li>
<li>Reverse Attribute, <a href="#5-112">5-112</a></li>
<li>Reverse Attributes Rectangular Area<ul>
<li>control function, <a href="#5-175">5-175</a></li>
</ul>
</li>
<li>Reverse Index<ul>
<li>control function, <a href="#5-36">5-36</a></li>
</ul>
</li>
<li>Reverse Rendition, <a href="#5-102">5-102</a></li>
<li>RI, <a href="#5-36">5-36</a></li>
<li>Right Margin, <a href="#5-27">5-27</a><ul>
<li>default value, <a href="#5-27">5-27</a></li>
</ul>
</li>
<li>Save Cursor<ul>
<li>control function, <a href="#5-187">5-187</a></li>
</ul>
</li>
<li>Screen Mode<ul>
<li>control function, <a href="#5-94">5-94</a></li>
</ul>
</li>
<li>Scroll<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>Scroll Down, <a href="#5-92">5-92</a><ul>
<li>internal function, <a href="#5-211">5-211</a></li>
</ul>
</li>
<li>Scroll Left<ul>
<li>internal function, <a href="#5-212">5-212</a></li>
</ul>
</li>
<li>Scroll Right<ul>
<li>internal function, <a href="#5-213">5-213</a></li>
</ul>
</li>
<li>Scroll Up, <a href="#5-91">5-91</a><ul>
<li>internal function, <a href="#5-210">5-210</a></li>
</ul>
</li>
<li>Scrolling, <a href="#5-23">5-23</a></li>
<li>Scrolling Mode<ul>
<li>control function, <a href="#5-32">5-32</a></li>
</ul>
</li>
<li>Scrolling Region, <a href="#5-23">5-23</a>, <a href="#5-25">5-25</a>, <a href="#5-27">5-27</a>, <a href="#5-31">5-31</a>, <a href="#5-32">5-32</a><ul>
<li>default value, <a href="#5-25">5-25</a>, <a href="#5-27">5-27</a></li>
</ul>
</li>
<li>SD, <a href="#5-92">5-92</a></li>
<li>Select Attribute Change Extent<ul>
<li>control function, <a href="#5-177">5-177</a></li>
</ul>
</li>
<li>Select Character Attribute<ul>
<li>control function, <a href="#5-166">5-166</a></li>
</ul>
</li>
<li>Select Graphic Rendition<ul>
<li>control function, <a href="#5-103">5-103</a></li>
</ul>
</li>
<li>Select Number of Lines per Screen, <a href="#5-89">5-89</a></li>
<li>Select Text/Graphics Look-Up Table, <a href="#5-113">5-113</a></li>
<li>Selective Erase In Display<ul>
<li>control function, <a href="#5-162">5-162</a></li>
</ul>
</li>
<li>Selective Erase In Line<ul>
<li>control function, <a href="#5-159">5-159</a></li>
</ul>
</li>
<li>Selective Erase Rectangular Area<ul>
<li>control function, <a href="#5-172">5-172</a></li>
</ul>
</li>
<li>Selectively Erasable Characters, <a href="#5-165">5-165</a></li>
<li>Send-Receive Mode<ul>
<li>control function, <a href="#5-135">5-135</a></li>
</ul>
</li>
<li>Service Class<ul>
<li>character cell display, <a href="#5-6">5-6</a></li>
</ul>
</li>
<li>Set Columns Per Page<ul>
<li>control function, <a href="#5-73">5-73</a></li>
</ul>
</li>
<li>Set Left and Right Margins<ul>
<li>control function, <a href="#5-27">5-27</a></li>
</ul>
</li>
<li>Set Lines Per Page<ul>
<li>control function, <a href="#5-75">5-75</a></li>
</ul>
</li>
</ul>
<a id="Index-5" data-page="Index-5"></a>
<ul>
<li>Set Mode<ul>
<li>column, <a href="#5-71">5-71</a></li>
<li>Horizontal Cursor Coupling, <a href="#5-85">5-85</a></li>
<li>insert/replacement, <a href="#5-138">5-138</a></li>
<li>Left Right Margin, <a href="#5-29">5-29</a></li>
<li>new line, <a href="#5-57">5-57</a></li>
<li>origin, <a href="#5-31">5-31</a></li>
<li>Page Cursor Coupling, <a href="#5-87">5-87</a></li>
<li>screen, <a href="#5-94">5-94</a></li>
<li>scrolling, <a href="#5-32">5-32</a></li>
<li>send receive mode, <a href="#5-135">5-135</a></li>
<li>text cursor enable, <a href="#5-21">5-21</a></li>
<li>Vertical Cursor Coupling, <a href="#5-86">5-86</a></li>
</ul>
</li>
<li>Set Top and Bottom Margins<ul>
<li>control function, <a href="#5-25">5-25</a></li>
</ul>
</li>
<li>SGR, <a href="#5-103">5-103</a>, <a href="#5-106">5-106</a>, <a href="#5-107">5-107</a></li>
<li>Single Width Line, <a href="#5-95">5-95</a><ul>
<li>control function, <a href="#5-96">5-96</a></li>
</ul>
</li>
<li>Sixels, <a href="#5-112">5-112</a></li>
<li>Software Conformance<ul>
<li>designate character sets, <a href="#5-118">5-118</a></li>
<li>double-height lines, <a href="#5-95">5-95</a>, <a href="#5-99">5-99</a></li>
<li>horizontal/vertical position, <a href="#5-51">5-51</a></li>
<li>new line mode, <a href="#5-57">5-57</a></li>
<li>screen mode, <a href="#5-94">5-94</a></li>
</ul>
</li>
<li>SRM, <a href="#5-135">5-135</a></li>
<li>String Delimiter<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>SU, <a href="#5-91">5-91</a></li>
<li>SUB, <a href="#5-132">5-132</a></li>
<li>Substitute<ul>
<li>control function, <a href="#5-132">5-132</a></li>
</ul>
</li>
<li>Tabulation<ul>
<li>clearing, <a href="#5-66">5-66</a></li>
<li>definition, <a href="#5-13">5-13</a></li>
<li>horizontal, <a href="#5-65">5-65</a></li>
<li>stop, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>Tabulation Clear, <a href="#5-66">5-66</a><ul>
<li>control function, <a href="#5-66">5-66</a></li>
</ul>
</li>
<li>Tabulation Stop<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>Tabulation Stop Report, <a href="#5-204">5-204</a></li>
<li>Tabulation Stops<ul>
<li>clearing, <a href="#5-66">5-66</a></li>
<li>default, <a href="#5-65">5-65</a></li>
<li>horizontal, <a href="#5-65">5-65</a></li>
</ul>
</li>
<li>TBC, <a href="#5-66">5-66</a></li>
<li>Terminal State Report (1), <a href="#5-207">5-207</a></li>
<li>Text Cursor Enable Mode<ul>
<li>control function, <a href="#5-21">5-21</a></li>
</ul>
</li>
<li>Top Margin, <a href="#5-25">5-25</a><ul>
<li>default value, <a href="#5-25">5-25</a></li>
</ul>
</li>
<li>Transmit<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>Transmitted Data Stream<ul>
<li>definition, <a href="#5-13">5-13</a></li>
</ul>
</li>
<li>TSI, <a href="#5-109">5-109</a><ul>
<li>cursor information report, <a href="#5-200">5-200</a></li>
<li>Presentation State Report, <a href="#5-199">5-199</a></li>
<li>report mode, <a href="#5-195">5-195</a></li>
<li>report selection or setting, <a href="#5-197">5-197</a></li>
<li>request Mode, <a href="#5-193">5-193</a></li>
<li>request presentation state report, <a href="#5-198">5-198</a></li>
<li>request selection or setting, <a href="#5-196">5-196</a></li>
<li>request terminal state report, <a href="#5-206">5-206</a></li>
<li>restore presentation state, <a href="#5-205">5-205</a></li>
<li>restore terminal state, <a href="#5-208">5-208</a></li>
<li>tabulation stop report, <a href="#5-204">5-204</a></li>
<li>terminal state report (l), <a href="#5-207">5-207</a></li>
</ul>
</li>
<li>UK set, <a href="#5-115">5-115</a></li>
<li>Underscore Rendition, <a href="#5-102">5-102</a></li>
<li>UPSS, <a href="#5-123">5-123</a>, <a href="#5-125">5-125</a></li>
<li>User-Preference Supplemental Set, <a href="#5-123">5-123</a>, <a href="#5-125">5-125</a></li>
<li>Vertical Cursor Coupling Mode<ul>
<li>control function, <a href="#5-86">5-86</a></li>
</ul>
</li>
<li>Vertical Tab<ul>
<li>control function, <a href="#5-61">5-61</a></li>
</ul>
</li>
<li>VT, <a href="#5-61">5-61</a></li>
<li>Warning Bell<ul>
<li>control function, <a href="#5-114">5-114</a></li>
</ul>
</li>
<li>Windowing Extension<ul>
<li>DECHCCM, <a href="#5-85">5-85</a></li>
<li>DECPCCM, <a href="#5-87">5-87</a></li>
<li>DECRQDE/DECRPDE, <a href="#5-88">5-88</a></li>
<li>DECSCPP, <a href="#5-73">5-73</a></li>
<li>DECSLPP, <a href="#5-75">5-75</a></li>
<li>DECVCCM, <a href="#5-86">5-86</a></li>
<li>DECXCPR, <a href="#5-55">5-55</a></li>
<li>NP, <a href="#5-77">5-77</a></li>
<li>PP, <a href="#5-79">5-79</a></li>
<li>PPA, <a href="#5-81">5-81</a></li>
<li>PPB, <a href="#5-83">5-83</a></li>
<li>PPR, <a href="#5-82">5-82</a></li>
<li>SD, <a href="#5-92">5-92</a></li>
<li>SU, <a href="#5-91">5-91</a></li>
</ul>
</li>
</ul>
</section>
</footer>
</body>
</html>
